(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{1063:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"withParams",{enumerable:!0,get:function(){return o.default}}),e.regex=e.ref=e.len=e.req=void 0;var r,o=(r=n(1101))&&r.__esModule?r:{default:r};function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var l=function(t){if(Array.isArray(t))return!!t.length;if(null==t)return!1;if(!1===t)return!0;if(t instanceof Date)return!isNaN(t.getTime());if("object"===c(t)){for(var e in t)return!0;return!1}return!!String(t).length};e.req=l;e.len=function(t){return Array.isArray(t)?t.length:"object"===c(t)?Object.keys(t).length:String(t).length};e.ref=function(t,e,n){return"function"==typeof t?t.call(e,n):n[t]};e.regex=function(t,e){return(0,o.default)({type:t},function(t){return!l(t)||e.test(t)})}},1076:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"alpha",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"alphaNum",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"numeric",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"between",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"email",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"ipAddress",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"macAddress",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(e,"maxLength",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(e,"minLength",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"required",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(e,"requiredIf",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(e,"requiredUnless",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(e,"sameAs",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(e,"url",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(e,"or",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(e,"and",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(e,"not",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(e,"minValue",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(e,"maxValue",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(e,"integer",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(e,"decimal",{enumerable:!0,get:function(){return I.default}}),e.helpers=void 0;var r=$(n(1100)),o=$(n(1103)),c=$(n(1104)),l=$(n(1105)),d=$(n(1106)),f=$(n(1107)),v=$(n(1108)),m=$(n(1109)),h=$(n(1110)),_=$(n(1111)),w=$(n(1112)),y=$(n(1113)),x=$(n(1114)),j=$(n(1115)),O=$(n(1116)),k=$(n(1117)),C=$(n(1118)),A=$(n(1119)),P=$(n(1120)),S=$(n(1121)),I=$(n(1122)),R=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};desc.get||desc.set?Object.defineProperty(e,n,desc):e[n]=t[n]}return e.default=t,e}(n(1063));function $(t){return t&&t.__esModule?t:{default:t}}e.helpers=R},1100:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=(0,n(1063).regex)("alpha",/^[a-zA-Z]*$/);e.default=r},1101:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r="web"===t.env.BUILD?n(1102).withParams:n(562).withParams;e.default=r}).call(this,n(59))},1102:function(t,e,n){"use strict";(function(t){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.withParams=void 0;var r="undefined"!=typeof window?window:void 0!==t?t:{},o=r.vuelidate?r.vuelidate.withParams:function(t,e){return"object"===n(t)&&void 0!==e?e:t(function(){})};e.withParams=o}).call(this,n(42))},1103:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=(0,n(1063).regex)("alphaNum",/^[a-zA-Z0-9]*$/);e.default=r},1104:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=(0,n(1063).regex)("numeric",/^[0-9]*$/);e.default=r},1105:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(1063);e.default=function(t,e){return(0,r.withParams)({type:"between",min:t,max:e},function(n){return!(0,r.req)(n)||(!/\s/.test(n)||n instanceof Date)&&+t<=+n&&+e>=+n})}},1106:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=(0,n(1063).regex)("email",/(^$|^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$)/);e.default=r},1107:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(1063),o=(0,r.withParams)({type:"ipAddress"},function(t){if(!(0,r.req)(t))return!0;if("string"!=typeof t)return!1;var e=t.split(".");return 4===e.length&&e.every(c)});e.default=o;var c=function(t){if(t.length>3||0===t.length)return!1;if("0"===t[0]&&"0"!==t)return!1;if(!t.match(/^\d+$/))return!1;var e=0|+t;return e>=0&&e<=255}},1108:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(1063);e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:":";return(0,r.withParams)({type:"macAddress"},function(e){if(!(0,r.req)(e))return!0;if("string"!=typeof e)return!1;var n="string"==typeof t&&""!==t?e.split(t):12===e.length||16===e.length?e.match(/.{2}/g):null;return null!==n&&(6===n.length||8===n.length)&&n.every(o)})};var o=function(t){return t.toLowerCase().match(/^[0-9a-f]{2}$/)}},1109:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(1063);e.default=function(t){return(0,r.withParams)({type:"maxLength",max:t},function(e){return!(0,r.req)(e)||(0,r.len)(e)<=t})}},1110:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(1063);e.default=function(t){return(0,r.withParams)({type:"minLength",min:t},function(e){return!(0,r.req)(e)||(0,r.len)(e)>=t})}},1111:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(1063),o=(0,r.withParams)({type:"required"},r.req);e.default=o},1112:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(1063);e.default=function(t){return(0,r.withParams)({type:"requiredIf",prop:t},function(e,n){return!(0,r.ref)(t,this,n)||(0,r.req)(e)})}},1113:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(1063);e.default=function(t){return(0,r.withParams)({type:"requiredUnless",prop:t},function(e,n){return!!(0,r.ref)(t,this,n)||(0,r.req)(e)})}},1114:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(1063);e.default=function(t){return(0,r.withParams)({type:"sameAs",eq:t},function(e,n){return e===(0,r.ref)(t,this,n)})}},1115:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=(0,n(1063).regex)("url",/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[\/?#]\S*)?$/i);e.default=r},1116:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(1063);e.default=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,r.withParams)({type:"or"},function(){for(var t=this,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e.length>0&&e.reduce(function(e,n){return e||n.apply(t,r)},!1)})}},1117:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(1063);e.default=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,r.withParams)({type:"and"},function(){for(var t=this,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e.length>0&&e.reduce(function(e,n){return e&&n.apply(t,r)},!0)})}},1118:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(1063);e.default=function(t){return(0,r.withParams)({type:"not"},function(e,n){return!(0,r.req)(e)||!t.call(this,e,n)})}},1119:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(1063);e.default=function(t){return(0,r.withParams)({type:"minValue",min:t},function(e){return!(0,r.req)(e)||(!/\s/.test(e)||e instanceof Date)&&+e>=+t})}},1120:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(1063);e.default=function(t){return(0,r.withParams)({type:"maxValue",max:t},function(e){return!(0,r.req)(e)||(!/\s/.test(e)||e instanceof Date)&&+e<=+t})}},1121:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=(0,n(1063).regex)("integer",/^-?[0-9]*$/);e.default=r},1122:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=(0,n(1063).regex)("decimal",/^[-]?\d*(\.\d+)?$/);e.default=r},1231:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAmdJREFUSA21ls9rU0EQx2c2sWmCBVuphVh/QAsK1rZ4FlQUxR9YqtdeBHvw0GD/AvHkPT0a7EUPBYso2OJBrODNiwcFfyBoEX8heojEIr63znfztnm/+vKerQNhs5vZz8zOzs6EKUGKj6r9rPSYq/m0qA3Ip+ypf5TxrWJ9X7t899eRygdvPTJwZEUWSk9myu4ffZU0XSDSuTid1ho7xDSr8nylcXAKhgMSMVB6PHPW1e5NgXcFNNtNmOqK1UTj0NQ9v6ryT4pL1YrA72SGAyIOYS8YfubqCTzPAQ8Y9Sun+s7kyknG7UmMgWbM3Zf/5HmcVYQrr/biToy33oVmi3kc2K4hXEgSEUYqaqJ37bPF7k47siPh2S3h0mMbD4cTOge28h5RWrcCelvyBbq84wD1FzYH1u0E7LxM8EIzS7fAF0bGabRrGxVVjq69fxrHGMAl2+cfUIB353oHqYOjD9kPf9P4QTc+vQjs9U3Ka+b8pe3DdGvfKZrff4YK4qGVMPz4s3n68rthf46MMBCpH9Ca+/rabDzWs4tuDzWNxME/J8DB5s6l6gJpfRLQsOwpddOD0fPU11Gih9+XaeumThNzhAWet4HLI+BFhZIbBtv5KwGd8EJwtGdnNrhAwFao52LKsdDwaI0sr9Tp+c9v6Tw3EHbANrVIwnRdwnQxDPfPc8zkaHnzaYW5tnK4MmmyCM1CmkY9aW82OIqdMEWMAVP1pFmIETfJSKrfmuV6wna31XeA+s3E0+syInAwbC+AQ+YO/J7915YJQ7COZiE5XEvKrpZTaPpcMw0m1I+hEzlBayPRRvxt+QvzgQD15GCKOwAAAABJRU5ErkJggg=="},1867:function(t,e,n){},1868:function(t,e,n){},1869:function(t,e,n){},1870:function(t,e,n){},1871:function(t,e,n){},1872:function(t,e,n){},1873:function(t,e,n){},1874:function(t,e,n){},1875:function(t,e,n){},1876:function(t,e,n){},1877:function(t,e,n){},1878:function(t,e,n){},1879:function(t,e,n){},1880:function(t,e,n){},2758:function(t,e,n){"use strict";var r=n(1867);n.n(r).a},2759:function(t,e,n){"use strict";var r=n(1868);n.n(r).a},2760:function(t,e,n){"use strict";var r=n(1869);n.n(r).a},2761:function(t,e,n){"use strict";var r=n(1870);n.n(r).a},2762:function(t,e,n){"use strict";var r=n(1871);n.n(r).a},2763:function(t,e,n){"use strict";var r=n(1872);n.n(r).a},2764:function(t,e,n){"use strict";var r=n(1873);n.n(r).a},2765:function(t,e,n){"use strict";var r=n(1874);n.n(r).a},2766:function(t,e,n){"use strict";var r=n(1875);n.n(r).a},2767:function(t,e,n){"use strict";var r=n(1876);n.n(r).a},2768:function(t,e,n){"use strict";var r=n(1877);n.n(r).a},2769:function(t,e,n){"use strict";var r=n(1878);n.n(r).a},2770:function(t,e,n){"use strict";var r=n(1879);n.n(r).a},2771:function(t,e,n){"use strict";var r=n(1880);n.n(r).a},2881:function(t,e,n){"use strict";n.r(e);n(39),n(24),n(124),n(13);var r=n(2),o=n(1),c=n(10),l=(n(17),{props:{id:{type:Number,required:!0},title:{type:String,required:!0},views:{type:Number,default:0},answersCount:{type:Number,default:0},isCollected:{type:Boolean,default:!1}},computed:Object(o.a)({},Object(c.d)("auth",{loggedIn:function(t){return t.loggedIn}})),methods:Object(o.a)({},Object(c.b)("question",["collectQuestion","cancelCollectQuestion"]),{collect:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.collectQuestion(this.id);case 2:t.sent.ok&&this.$router.go();case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),cancelCollect:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.cancelCollectQuestion(this.id);case 2:t.sent.ok&&this.$router.go();case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()})}),d=(n(2758),n(5)),f=Object(d.a)(l,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("div",{staticClass:"title"},[t._v("\n    "+t._s(t.title)+"\n  ")]),t._v(" "),n("div",{staticClass:"heat"},[n("div",{staticClass:"views"},[t._v("\n      "+t._s(t.views)+"查看\n    ")]),t._v(" "),n("div",{staticClass:"reply"},[t._v("\n      "+t._s(t.answersCount)+"回复\n    ")]),t._v(" "),t.isCollected?n("b-btn",{staticClass:"button",attrs:{variant:"primary"},on:{click:t.cancelCollect}},[t._v("\n      已收藏\n    ")]):[t.loggedIn?n("b-btn",{staticClass:"button",attrs:{variant:"primary"},on:{click:t.collect}},[t._v("\n        收藏\n      ")]):n("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.sign-modal",modifiers:{"sign-modal":!0}}],staticClass:"button",attrs:{variant:"primary"}},[t._v("\n        收藏\n      ")])]],2)])},[],!1,null,"69b81bf4",null).exports,v={props:{author:{type:Object,required:!0},createdAt:{type:String,required:!0},type:{type:String,required:!0},lab:{type:Object,default:null},course:{type:Object,default:null},owner:{type:Object,default:null}},data:function(){return{localCreatedAt:this.createdAt}},computed:{from:function(){return this.lab||this.owner},course_html_url:function(){var t=this.lab||this.owner;return t.parent&&t.parent.html_url||t.html_url}},mounted:function(){this.localCreatedAt=this.$dateTimeFormat(this.createdAt)}},m=(n(2759),Object(d.a)(v,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"meta"},[n("user-avatar",{staticClass:"user-avatar",attrs:{user:t.author}}),t._v(" "),n("user-name",{attrs:{user:t.author}}),t._v(" "),n("div",{staticClass:"datetime"},[t._v("\n    "+t._s(t.localCreatedAt)+"\n  ")]),t._v(" "),n("nuxt-link",{staticClass:"question-type",attrs:{to:"/questions/?type="+t.type}},[t._v("\n    "+t._s(t.$QuestionEnum.getType(t.type))+"\n  ")]),t._v(" "),t.from?n("div",{staticClass:"lab"},[n("span",[t._v("来自：")]),t._v(" "),n("nuxt-link",{attrs:{to:t.course_html_url}},[t._v("\n      "+t._s(t.from.name)+"\n    ")])],1):t._e()],1)},[],!1,null,"3af697aa",null).exports),h={props:{question:{type:Object,required:!0},userStatus:{type:Object,default:function(){return{}}}}},_=(n(2760),Object(d.a)(h,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"btns"},[t.userStatus.can_edit?n("nuxt-link",{staticClass:"btn btn-primary",attrs:{to:"/questions/"+t.question.id+"/edit/"}},[t._v("\n    修改\n  ")]):t._e(),t._v(" "),t.userStatus.can_delete?n("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.delete-question-modal",modifiers:{"delete-question-modal":!0}}],staticClass:"btn",attrs:{variant:"danger"}},[t._v("\n    删除\n  ")]):t._e(),t._v(" "),t.userStatus.can_select?[t.question.is_selected?n("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.cancel-select-question-modal",modifiers:{"cancel-select-question-modal":!0}}],staticClass:"btn",attrs:{variant:"warning"}},[t._v("\n      取消置精\n    ")]):n("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.select-question-modal",modifiers:{"select-question-modal":!0}}],staticClass:"btn select-question-btn",attrs:{variant:"warning"}},[t._v("\n      置精\n    ")])]:t._e(),t._v(" "),t.userStatus.can_top?[t.question.is_toped?n("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.cancel-top-question-modal",modifiers:{"cancel-top-question-modal":!0}}],staticClass:"btn",attrs:{variant:"danger"}},[t._v("\n      取消置顶\n    ")]):n("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.top-question-modal",modifiers:{"top-question-modal":!0}}],staticClass:"btn",attrs:{variant:"danger"}},[t._v("\n      置顶\n    ")])]:t._e(),t._v(" "),t.userStatus.can_confirm?[t.question.is_course_correction_confirmed?n("b-btn",{staticClass:"btn",attrs:{variant:"success",disabled:""}},[t._v("\n      已确认为课程纠错贴\n    ")]):n("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.confirm-question-modal",modifiers:{"confirm-question-modal":!0}}],staticClass:"btn",attrs:{variant:"success"}},[t._v("\n      确认为课程纠错贴\n    ")])]:t._e()],2)},[],!1,null,"54049e7f",null).exports),w={props:{modalId:{type:String,required:!0},title:{type:String,required:!0},content:{type:String,required:!0},ok:{type:Function,required:!0}},methods:{okHandler:function(){this.$refs.modal.hide(),this.ok()}}},y=Object(d.a)(w,function(){var t=this.$createElement,e=this._self._c||t;return e("b-modal",{ref:"modal",attrs:{id:this.modalId,title:this.title,"ok-title":"确定","cancel-title":"取消"},on:{ok:this.okHandler}},[e("p",{staticClass:"my-4"},[this._v("\n    "+this._s(this.content)+"\n  ")])])},[],!1,null,null,null).exports,x={components:{BaseModal:y},props:{questionId:{type:Number,required:!0}},data:function(){return{modals:(d=this,[{"modal-id":"delete-question-modal",title:"确定删除",content:"删除后不可恢复",ok:(l=Object(r.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.deleteQuestion(d.questionId);case 2:t.sent.ok&&d.$router.push({path:"/questions/"});case 4:case"end":return t.stop()}},t)})),function(){return l.apply(this,arguments)})},{"modal-id":"select-question-modal",title:"置精帖子",content:"确定把该帖子置精",ok:(c=Object(r.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.selectQuestion(d.questionId);case 2:t.sent.ok&&d.$router.go();case 4:case"end":return t.stop()}},t)})),function(){return c.apply(this,arguments)})},{"modal-id":"cancel-select-question-modal",title:"取消置精帖子",content:"确定把该帖子取消置精",ok:(o=Object(r.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.cancelSelectQuestion(d.questionId);case 2:t.sent.ok&&d.$router.go();case 4:case"end":return t.stop()}},t)})),function(){return o.apply(this,arguments)})},{"modal-id":"top-question-modal",title:"置顶帖子",content:"确定把该帖子置顶",ok:(n=Object(r.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.topQuestion(d.questionId);case 2:t.sent.ok&&d.$router.go();case 4:case"end":return t.stop()}},t)})),function(){return n.apply(this,arguments)})},{"modal-id":"cancel-top-question-modal",title:"取消置顶帖子",content:"确定把该帖子取消置顶",ok:(e=Object(r.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.cancelTopQuestion(d.questionId);case 2:t.sent.ok&&d.$router.go();case 4:case"end":return t.stop()}},t)})),function(){return e.apply(this,arguments)})},{"modal-id":"confirm-question-modal",title:"确认为课程纠错贴",content:"确定把该帖子设置为课程纠错贴",ok:(t=Object(r.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.confirmQuestion(d.questionId);case 2:t.sent.ok&&d.$router.go();case 4:case"end":return t.stop()}},t)})),function(){return t.apply(this,arguments)})}])};var t,e,n,o,c,l,d},methods:Object(o.a)({},Object(c.b)("question",["deleteQuestion","selectQuestion","cancelSelectQuestion","topQuestion","cancelTopQuestion","confirmQuestion"]))},j=Object(d.a)(x,function(){var t=this.$createElement,e=this._self._c||t;return e("div",this._l(this.modals,function(t){return e("base-modal",{key:t["modal-id"],attrs:{"modal-id":t["modal-id"],title:t.title,content:t.content,ok:t.ok}})}),1)},[],!1,null,null,null).exports,O={props:{questionId:{type:Number,required:!0},answer:{type:Object,required:!0},userStatus:{type:Object,required:!0}},computed:Object(o.a)({},Object(c.d)("auth",{loggedIn:function(t){return t.loggedIn}})),methods:Object(o.a)({},Object(c.b)("question",["getAnswers","getAnswersUserStatus","likeAnswer","cancelLikeAnswer"]),{like:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.likeAnswer(this.answer.id);case 2:return t.next=4,this.getAnswers(this.questionId);case 4:return t.next=6,this.getAnswersUserStatus();case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),cancelLike:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.cancelLikeAnswer(this.answer.id);case 2:return t.next=4,this.getAnswers(this.questionId);case 4:return t.next=6,this.getAnswersUserStatus();case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()})},k=(n(2761),Object(d.a)(O,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"meta"},[n("div",{staticClass:"meta-users"},[n("user-name",{attrs:{user:t.answer.author,"show-label":!0}}),t._v(" "),t.answer.parent?[n("span",[t._v("回复")]),t._v(" "),n("user-name",{attrs:{user:t.answer.parent.author}})]:t._e()],2),t._v(" "),n("div",{staticClass:"like"},[t.loggedIn?[t.userStatus.is_liked?n("i",{staticClass:"fa fa-thumbs-o-up active",on:{click:t.cancelLike}}):n("i",{staticClass:"fa fa-thumbs-o-up",on:{click:t.like}})]:n("i",{directives:[{name:"b-modal",rawName:"v-b-modal.sign-modal",modifiers:{"sign-modal":!0}}],staticClass:"fa fa-thumbs-o-up"}),t._v(" "),n("span",{staticClass:"divide"},[t._v("\n      |\n    ")]),t._v(" "),n("span",[t._v("\n      "+t._s(t.answer.likes_count)+"\n    ")])],2)])},[],!1,null,"4e8f19d3",null).exports),C={props:{questionId:{type:Number,required:!0},answer:{type:Object,default:function(){return{}}},userStatus:{type:Object,default:function(){return{}}}},data:function(){return{isEdit:!1,content:this.answer.content,createdAt:this.answer.created_at}},computed:Object(o.a)({},Object(c.d)("auth",{loggedIn:function(t){return t.loggedIn}})),mounted:function(){this.createdAt=this.$dateTimeFormat(this.answer.created_at)},methods:Object(o.a)({},Object(c.b)("question",["getAnswers","getAnswer","patchAnswer","setReply","acceptAnswer"]),{updateAnswer:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=Object(o.a)({},this.answer,{content:this.content}),t.next=3,this.patchAnswer(e);case 3:this.isEdit=!1,this.getAnswers(this.questionId);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),accept:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.acceptAnswer(this.answer.id);case 2:t.sent.ok&&this.$router.go();case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),reply:function(){this.getAnswer(this.answer),this.setReply(),window.scrollTo(0,document.body.scrollHeight)}})},A=(n(2762),{components:{AnswerMeta:k,AnswerContent:Object(d.a)(C,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"answer-content"},[t.isEdit?[n("b-form-textarea",{attrs:{rows:5,"max-rows":10},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t._v(" "),n("div",{staticClass:"btns"},[n("div",{staticClass:"edit",on:{click:function(e){t.isEdit=!1}}},[t._v("\n        取消\n      ")]),t._v(" "),n("div",{staticClass:"delete",on:{click:t.updateAnswer}},[t._v("\n        保存\n      ")])])]:[n("div",{staticClass:"markdown",domProps:{innerHTML:t._s(t.$marked(t.answer.content))}}),t._v(" "),n("div",{staticClass:"created-at"},[t._v("\n      "+t._s(t.createdAt)+"\n    ")]),t._v(" "),n("div",{staticClass:"btns"},[t.loggedIn?n("div",{staticClass:"reply",on:{click:t.reply}},[t._v("\n        回复\n      ")]):n("div",{directives:[{name:"b-modal",rawName:"v-b-modal.sign-modal",modifiers:{"sign-modal":!0}}],staticClass:"reply"},[t._v("\n        回复\n      ")]),t._v(" "),t.userStatus.can_edit?n("div",{staticClass:"edit",on:{click:function(e){t.isEdit=!0}}},[t._v("\n        编辑\n      ")]):t._e(),t._v(" "),t.userStatus.can_delete?n("div",{directives:[{name:"b-modal",rawName:"v-b-modal.delete-answer-modal",modifiers:{"delete-answer-modal":!0}}],staticClass:"delete",on:{click:function(e){return t.getAnswer(t.answer)}}},[t._v("\n        删除\n      ")]):t._e()]),t._v(" "),t._e()]],2)},[],!1,null,"4ea71107",null).exports},props:{questionId:{type:Number,required:!0},answer:{type:Object,required:!0},userStatus:{type:Object,default:function(){return{}}}}}),P=(n(2763),Object(d.a)(A,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"answer"},[n("user-avatar",{staticClass:"user-avatar",attrs:{user:t.answer.author}}),t._v(" "),n("div",{staticClass:"content"},[n("answer-meta",{attrs:{"question-id":t.questionId,answer:t.answer,"user-status":t.userStatus}}),t._v(" "),n("answer-content",{attrs:{"question-id":t.questionId,answer:t.answer,"user-status":t.userStatus}})],1)],1)},[],!1,null,"6bde31ad",null).exports),S={components:{QuestionAnswer:P},props:{questionId:{type:Number,required:!0},answer:{type:Object,required:!0}},computed:Object(o.a)({},Object(c.c)("question",["getAnswerUserStatusById"]),{userStatus:function(){return this.getAnswerUserStatusById(this.answer.id)}})},I=(n(2764),Object(d.a)(S,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"best-answer"},[e("div",{staticClass:"title"},[this._v("\n    最佳答案\n  ")]),this._v(" "),e("question-answer",{staticClass:"answer",attrs:{"question-id":this.questionId,answer:this.answer,"user-status":this.userStatus}})],1)},[],!1,null,"4a7e5ea3",null).exports),R=n(1076),$={data:function(){return{questionId:this.$route.params.id,content:"",isPreview:!1}},computed:Object(o.a)({previewBtnText:function(){return this.isPreview?"退出预览":"预览"},markedContent:function(){return this.$marked(this.content)}},Object(c.d)("auth",{loggedIn:function(t){return t.loggedIn},user:function(t){return t.user}}),Object(c.d)("question",{question:function(t){return t.question},answerBeenReplied:function(t){return t.answer},isReply:function(t){return t.isReply}}),{answer:function(){return{content:this.content,parent_id:this.isReply&&this.answerBeenReplied.id}}}),methods:Object(o.a)({},Object(c.b)("question",["getAnswers","publishAnswer","clearReply"]),{getContent:function(t){this.content=t},togglePreview:function(){this.isPreview=!this.isPreview},commit:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){var data,e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.$v.$invalid){t.next=2;break}return t.abrupt("return",!1);case 2:return data=Object(o.a)({},this.answer),this.isReply||delete data.parent_id,t.next=6,this.publishAnswer({questionId:this.questionId,answer:data});case 6:(e=t.sent).ok?this.$router.go():this.$showMessage("error",e.message);case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}),validations:{content:{required:R.required,minLength:Object(R.minLength)(5)}}},M=(n(2765),Object(d.a)($,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"answer-editor"},[t.loggedIn?[n("markdown-editor",{directives:[{name:"show",rawName:"v-show",value:!t.isPreview,expression:"!isPreview"}],ref:"editor",staticClass:"editor",attrs:{placeholder:t.isReply?"回复："+t.answerBeenReplied.author.name:"","get-value":t.getContent}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isPreview,expression:"isPreview"}],staticClass:"preview",domProps:{innerHTML:t._s(t.markedContent)}})]:n("div",{staticClass:"should-login"},[t._v("\n    请\n    "),n("a",{directives:[{name:"b-modal",rawName:"v-b-modal.sign-modal",modifiers:{"sign-modal":!0}}],attrs:{href:"javascript:;"}},[t._v("\n      登录\n    ")]),t._v("\n    后回复\n  ")]),t._v(" "),t.$v.content.minLength?t._e():n("div",{staticClass:"text-danger"},[n("i",{staticClass:"fa fa-times-circle"}),t._v("\n    内容最少输入 "+t._s(t.$v.content.$params.minLength.min)+" 字符\n  ")]),t._v(" "),t.loggedIn?n("div",{staticClass:"footer"},[n("div",{staticClass:"author"},[n("user-avatar",{attrs:{user:t.user}}),t._v(" "),n("user-name",{attrs:{user:t.user}})],1),t._v(" "),n("div",{staticClass:"btns"},[t.isReply?n("b-btn",{staticClass:"btn",attrs:{variant:"outline-primary"},on:{click:t.clearReply}},[t._v("\n        清除回复\n      ")]):t._e(),t._v(" "),n("b-btn",{staticClass:"btn",attrs:{variant:"outline-primary"},on:{click:t.togglePreview}},[t._v("\n        "+t._s(t.previewBtnText)+"\n      ")]),t._v(" "),n("b-btn",{staticClass:"btn",attrs:{variant:"primary"},on:{click:t.commit}},[t._v("\n        发布\n      ")])],1)]):t._e()],2)},[],!1,null,"6246fb49",null).exports),E={props:{modalId:{type:String,default:"delete-answer-modal"}},computed:Object(o.a)({},Object(c.d)("question",{answer:function(t){return t.answer}})),methods:Object(o.a)({},Object(c.b)("question",["deleteAnswer"]),{removeAnswer:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.$refs.modal.hide(),t.next=3,this.deleteAnswer(this.answer.id);case 3:t.sent.ok&&this.$router.go();case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()})},Q=Object(d.a)(E,function(){var t=this.$createElement,e=this._self._c||t;return e("b-modal",{ref:"modal",attrs:{id:this.modalId,title:"确定删除","ok-title":"确定","cancel-title":"取消"},on:{ok:this.removeAnswer}},[e("div",[this._v("删除后不可恢复")])])},[],!1,null,null,null).exports,D={props:{questions:{type:Array,required:!0}}},U=(n(2766),Object(d.a)(D,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("side-box",{attrs:{"box-title":"相关帖子"}},[n("div",{attrs:{slot:"box-body-content"},slot:"box-body-content"},t._l(t.questions,function(e){return n("nuxt-link",{key:e.id,staticClass:"question",attrs:{to:e.html_url}},[t._v("\n      "+t._s(e.title)+"\n    ")])}),1)])},[],!1,null,"6234cc63",null).exports),N={computed:Object(o.a)({},Object(c.d)("user",{hundredLevelUserInfo:function(t){return t.hundredLevelUserInfo}}),{currentUser:function(){return this.$auth.user},achievedBailou:function(){return this.currentUser.level>=100}}),methods:{handleClick:function(){this.achievedBailou?this.$root.$emit("bv::show::modal","modal-apply-club"):this.$showMessage(!1,"您还未到达100层，先去努力爬楼吧！")}}},B=(n(2767),Object(d.a)(N,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("side-box",{attrs:{"has-footer":!1}},[r("div",{staticClass:"text-center",attrs:{slot:"box-body-content"},slot:"box-body-content"},[r("user-avatar",{attrs:{user:t.currentUser,width:80,height:80,"class-name":"inline-block"}}),t._v(" "),r("p",{staticClass:"current-level font-16 color-text"},[t._v("\n      当前楼层：L"+t._s(t.currentUser.level)+"\n    ")]),t._v(" "),t.achievedBailou?r("div",{staticClass:"achievement-info vertical-center justify-center achieved"},[r("img",{attrs:{src:n(593),alt:"百楼俱乐部"}}),t._v(" "),r("span",{staticClass:"font-14"},[t._v("第"+t._s(t.hundredLevelUserInfo.rank||" - ")+"位百楼成就获得者")])]):r("div",{staticClass:"achievement-info vertical-center justify-center"},[r("span",{staticClass:"font-14"},[t._v("我的百楼成就：待获得")])]),t._v(" "),r("span",{staticClass:"apply-join",on:{click:t.handleClick}},[t._v("🤗 申请加入百楼俱乐部 >")])],1)])},[],!1,null,"dd86c1e2",null).exports),L={data:function(){return{filter:"total",loading:!0,rankData:{}}},computed:{yesterdayDate:function(){var t=Date.now(),e=new Date(t-864e5);return this.$dateTimeFormat(e,"YYYY-MM-DD",!0)}},watch:{filter:function(t){this.rankData={},this.loadData()}},mounted:function(){this.loadData()},methods:{loadData:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,e={},"yesterday"===this.filter&&(e.rank_date=this.yesterdayDate),t.next=5,this.$ajax.get(this.$urls.usersLevelRank,e);case 5:n=t.sent,this.loading=!1,n.ok&&(this.rankData=n.data);case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},T=(n(2768),Object(d.a)(L,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("side-box",{attrs:{"has-footer":!1}},[r("div",{staticClass:"text-center",attrs:{slot:"box-body-content"},slot:"box-body-content"},[r("p",{staticClass:"box-title font-16 color-text"},[t._v("\n      楼层排名\n    ")]),t._v(" "),r("p",{staticClass:"radio-group block flex justify-center font-12"},[r("span",{class:{active:"total"===t.filter},on:{click:function(e){t.filter="total"}}},[t._v("总")]),t._v(" "),r("span",{class:{active:"yesterday"===t.filter},on:{click:function(e){t.filter="yesterday"}}},[t._v("昨日上升")])]),t._v(" "),r("div",{staticClass:"rank-list text-left"},[r("ul",{staticClass:"rankings"},t._l(t.rankData.rank_info,function(e,o){return r("li",{key:o},[r("div",{staticClass:"ranking-item vertical-center font-14 color-text"},[r("div",{staticClass:"ranking-number text-center"},[0===o?r("img",{attrs:{src:n(592),alt:"第一名"}}):1===o?r("img",{attrs:{src:n(594),alt:"第二名"}}):2===o?r("img",{attrs:{src:n(595),alt:"第三名"}}):r("span",{staticClass:"font-16"},[t._v(t._s(o+1))])]),t._v(" "),r("div",{staticClass:"ranking-user text-left"},[r("user-avatar",{attrs:{user:e,width:32,height:32,"class-name":"inline-block"}}),t._v(" "),r("span",{staticClass:"user-name font-14 vertical-middle",attrs:{title:e.name}},[t._v(t._s(e.name))])],1),t._v(" "),r("div",{staticClass:"ranking-user-level"},[r("span",[t._v("\n                "+t._s("total"===t.filter?e.level:e.rank_info.raised_level)+"楼\n              ")])])])])}),0),t._v(" "),r("div",{staticClass:"box-footer text-center"},[t.loading?r("img",{staticClass:"loading-img",staticStyle:{width:"30px"},attrs:{src:n(584),alt:"加载中"}}):t._e()])])])])},[],!1,null,"2f2270c9",null).exports),z=(n(28),n(25)),H={data:function(){return{loading:!0,pageData:{},members:[]}},mounted:function(){this.loadData()},methods:{loadData:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){var e,n,r,o=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:1,this.loading=!0,n={page:e},t.next=5,this.$ajax.get(this.$urls.bailouUsers,n);case 5:r=t.sent,this.loading=!1,r.ok&&(this.pageData=r.data,this.members=[].concat(Object(z.a)(this.members),Object(z.a)(this.pageData.results)));case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),renderTooltipContent:function(t){return'\n        <div class="full-width full-height text-left">\n          <p class="no-margin font-14">\n            '.concat(t.name,'\n            <span\n              class="font-12"\n              style="color: #ffc500"\n            > L').concat(t.level,'</span>\n          </p>\n          <p class="no-margin font-12">\n            第 <span style="color: #ffc500">').concat(t.rank,"</span> 位百楼成就获得者\n          </p>\n        </div>\n      ")}}},Y=(n(2769),{components:{LevelInfoBox:B,LevelRankBox:T,ClubMembersBox:Object(d.a)(H,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("side-box",{attrs:{"box-title":"百楼墙","class-name":"club-members-bolx","has-footer":!1}},[r("template",{slot:"box-header-content"},[r("div",{staticClass:"box-title full-width text-center"},[r("span",[t._v("百楼墙")])])]),t._v(" "),r("template",{slot:"box-body-content"},[r("div",{staticClass:"club-members"},t._l(t.members,function(e,n){return r("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.html",modifiers:{html:!0}}],key:n,staticClass:"user-box inline-block text-center",attrs:{title:t.renderTooltipContent(e)}},[r("user-avatar",{attrs:{user:e,width:50,height:50,"class-name":"inline-block"}})],1)}),0),t._v(" "),r("div",{staticClass:"box-footer text-center"},[t.loading?r("img",{staticClass:"loading-img",staticStyle:{width:"30px"},attrs:{src:n(584),alt:"加载中"}}):t.pageData.next?r("p",{staticClass:"no-margin font-12",on:{click:function(e){return t.loadData(t.pageData.page+1)}}},[t._v("\n        查看更多\n      ")]):t._e()])])],2)},[],!1,null,"619edb8c",null).exports}}),K=Object(d.a)(Y,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"sidebar-club one-hundred-level-club"},[this.$auth.loggedIn?e("level-info-box"):this._e(),this._v(" "),e("level-rank-box"),this._v(" "),e("club-members-box")],1)},[],!1,null,null,null).exports,J={data:function(){return{wechatId:"",showModal:!1,submitted:!1}},methods:{handleSubmit:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$ajax.post(this.$urls.applyJoinClub,{wechat_id:this.wechatId});case 2:(e=t.sent).ok?this.submitted=!0:(this.showModal=!1,this.$showMessage("danger",e.message||"申请提交失败"));case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},V=(n(2770),{components:{QuestionHeader:f,QuestionMeta:m,QuestionBtns:_,QuestionModals:j,QuestionAnswer:P,BestAnswer:I,AnswerEditor:M,DeleteAnswerModal:Q,RelatedQuestions:U,SidebarClub:K,ApplyClubModal:Object(d.a)(J,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-modal",{ref:"modal",staticClass:"text-center",attrs:{id:"modal-apply-club","hide-header":!0,"hide-footer":!0},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[r("div",{staticClass:"content inline-block"},[r("div",{staticClass:"content-header"},[t.submitted?r("div",{staticClass:"title font-20 color-primary"},[r("img",{attrs:{src:n(1231),alt:"成功"}}),t._v(" "),r("span",{staticClass:"vertical-middle"},[t._v("提交成功")])]):r("div",{staticClass:"title font-20"},[t._v("\n        请填写您的微信号\n      ")])]),t._v(" "),r("div",{staticClass:"content-body"},[t.submitted?[r("p",{staticClass:"font-16"},[t._v("\n          申请将在3个工作日内处理，如有其他疑问，请微信扫描下方二维码咨询。\n        ")]),t._v(" "),r("img",{staticClass:"qrcode-img",attrs:{src:"https://dn-simplecloud.shiyanlou.com/course/1552038885644_团子.png",alt:"实验楼团子"}})]:[r("b-form-input",{attrs:{placeholder:"填写您的微信号"},model:{value:t.wechatId,callback:function(e){t.wechatId=e},expression:"wechatId"}})]],2),t._v(" "),r("div",{staticClass:"content-footer"},[t.submitted?r("b-btn",{staticClass:"btn-action",attrs:{variant:"primary"},on:{click:function(e){t.showModal=!1}}},[t._v("\n        我知道了\n      ")]):r("b-btn",{staticClass:"btn-action",attrs:{variant:"primary",disabled:!t.wechatId},on:{click:t.handleSubmit}},[t._v("\n        提交\n      ")])],1)])])},[],!1,null,null,null).exports},data:function(){return{id:parseInt(this.$route.params.id)}},computed:Object(o.a)({},Object(c.d)({menuHost:function(t){return t.env.menuHost}}),Object(c.d)("auth",{loggedIn:function(t){return t.loggedIn}}),Object(c.d)("question",{question:function(t){return t.question},answers:function(t){return t.answers},questionUserStatus:function(t){return t.questionUserStatus},answersUserStatus:function(t){return t.answersUserStatus},relatedQuestions:function(t){return t.relatedQuestions}}),{breadCrumbs:function(){var t=this.question.type||"";return[{text:"讨论",to:{path:"/questions/"}},{text:this.$QuestionEnum.getType(t),to:{path:"/questions/",query:{type:t}}},{text:this.question&&this.question.title}]}}),watch:{$route:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.params,r=e.query,t.next=3,this.getAnswers({params:n,query:r});case 3:t.sent.ok&&this.getAnswersUserStatus();case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},asyncData:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(e){var n,o,c,l,d,f,v,m,h;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.params,o=e.query,c=e.store,l=e.error,t.next=3,c.dispatch("question/getQuestion",n.id);case 3:if(d=c.state.auth,(f=c.state.question.question).id){t.next=7;break}return t.abrupt("return",l({statusCode:404,message:"Not found"}));case 7:v=function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){var e,n=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=n.length>0&&void 0!==n[0]&&n[0],!(d.loggedIn&&d.user.level>=100&&6512===f.id)){t.next=8;break}if(!e){t.next=7;break}return t.next=5,c.dispatch("user/getHundredLevelUserInfo",{userId:d.user.id});case 5:t.next=8;break;case 7:c.dispatch("user/getHundredLevelUserInfo",{userId:d.user.id});case 8:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),m=function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.dispatch("question/getAnswers",{params:n,query:o});case 2:return t.next=4,c.dispatch("question/getAnswersUserStatus");case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),h=function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([c.dispatch("question/getQuestionUserStatus",n.id),m()]);case 2:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),t.next=17;break;case 13:return t.next=15,v(!0);case 15:t.next=19;break;case 17:h(),v();case 19:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),mounted:function(){this.getRelatedQuestions(this.id)},methods:Object(o.a)({},Object(c.b)("question",["getAnswers","getAnswersUserStatus","getRelatedQuestions"])),head:function(){return{title:this.question.title}}}),F=(n(2771),Object(d.a)(V,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("side-page",[n("div",{attrs:{slot:"breadcrumb"},slot:"breadcrumb"},[n("bread-crumb",{attrs:{items:t.breadCrumbs}})],1),t._v(" "),n("div",{attrs:{slot:"content"},slot:"content"},[t.question.id?n("common-content",[n("question-header",{attrs:{id:t.question.id,title:t.question.title,views:t.question.views,"answers-count":t.question.answers_count,"is-collected":t.questionUserStatus.is_collected}}),t._v(" "),n("question-meta",{attrs:{author:t.question.author,type:t.question.type,lab:t.question.lab,owner:t.question.owner,"created-at":t.question.created_at}}),t._v(" "),n("markdown-viewer",{attrs:{content:t._f("marked")(t.question.content)}}),t._v(" "),n("question-btns",{attrs:{question:t.question,"user-status":t.questionUserStatus}}),t._v(" "),t.question.accept_answer?n("best-answer",{attrs:{"question-id":t.question.id,answer:t.question.accept_answer}}):t._e(),t._v(" "),t.answers.results&&t.answers.results.length?n("div",{staticClass:"answers"},[n("div",{staticClass:"title"},[t._v("\n          全部回复\n        ")]),t._v(" "),t._l(t.answers.results,function(e,r){return n("question-answer",{key:e.id,attrs:{"question-id":t.id,answer:e,"user-status":t.answersUserStatus[r]}})}),t._v(" "),n("base-pagination",{attrs:{previous:t.answers.previous,next:t.answers.next}})],2):t._e(),t._v(" "),t.question?n("div",{staticClass:"add-answer"},[n("div",{staticClass:"title"},[t._v("\n          你的回复\n        ")]),t._v(" "),n("answer-editor",{attrs:{id:t.question.id}})],1):t._e()],1):t._e()],1),t._v(" "),n("div",{attrs:{slot:"side"},slot:"side"},[6512!==t.question.id?[n("side-btn",{attrs:{text:"我要发帖",link:"/questions/publish"}}),t._v(" "),n("side-img",{attrs:{src:"https://static.shiyanlou.com/img/banner-vip.png",link:t.menuHost+"/vip"}}),t._v(" "),n("related-questions",{attrs:{questions:t.relatedQuestions}})]:[n("sidebar-club")]],2),t._v(" "),n("div",{attrs:{slot:"modal"},slot:"modal"},[n("question-modals",{attrs:{"question-id":t.question.id}}),t._v(" "),n("delete-answer-modal",{attrs:{"modal-id":"delete-answer-modal"}}),t._v(" "),n("apply-club-modal")],1)])},[],!1,null,"6552630e",null));e.default=F.exports}}]);