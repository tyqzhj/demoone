(window.webpackJsonp=window.webpackJsonp||[]).push([[28,1],{1083:function(t,e,n){"use strict";var r=n(1137),o=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=m;var c=n(1123);c.inherits=n(559);var l=n(1258),d=n(1193);c.inherits(m,l);for(var h=o(d.prototype),f=0;f<h.length;f++){var v=h[f];m.prototype[v]||(m.prototype[v]=d.prototype[v])}function m(t){if(!(this instanceof m))return new m(t);l.call(this,t),d.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",y)}function y(){this.allowHalfOpen||this._writableState.ended||r.nextTick(_,this)}function _(t){t.end()}Object.defineProperty(m.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(m.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),m.prototype._destroy=function(t,e){this.push(null),this.end(),r.nextTick(e,t)}},1086:function(t,e,n){var r=n(125),o=r.Buffer;function c(t,e){for(var n in t)e[n]=t[n]}function l(t,e,n){return o(t,e,n)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=r:(c(r,e),e.Buffer=l),c(o,l),l.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return o(t,e,n)},l.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=o(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},l.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return o(t)},l.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},1098:function(t,e,n){"use strict";var r,o="object"==typeof Reflect?Reflect:null,c=o&&"function"==typeof o.apply?o.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var l=Number.isNaN||function(t){return t!=t};function d(){d.init.call(this)}t.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._eventsCount=0,d.prototype._maxListeners=void 0;var h=10;function f(t){return void 0===t._maxListeners?d.defaultMaxListeners:t._maxListeners}function v(t,e,n,r){var o,c,l,d;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(c=t._events)?(c=t._events=Object.create(null),t._eventsCount=0):(void 0!==c.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),c=t._events),l=c[e]),void 0===l)l=c[e]=n,++t._eventsCount;else if("function"==typeof l?l=c[e]=r?[n,l]:[l,n]:r?l.unshift(n):l.push(n),(o=f(t))>0&&l.length>o&&!l.warned){l.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=t,h.type=e,h.count=l.length,d=h,console&&console.warn&&console.warn(d)}return t}function m(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},o=function(){for(var t=[],i=0;i<arguments.length;i++)t.push(arguments[i]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,c(this.listener,this.target,t))}.bind(r);return o.listener=n,r.wrapFn=o,o}function y(t,e,n){var r=t._events;if(void 0===r)return[];var o=r[e];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(o):w(o,o.length)}function _(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function w(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}Object.defineProperty(d,"defaultMaxListeners",{enumerable:!0,get:function(){return h},set:function(t){if("number"!=typeof t||t<0||l(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");h=t}}),d.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},d.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||l(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},d.prototype.getMaxListeners=function(){return f(this)},d.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var n="error"===t,r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var l=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw l.context=o,l}var d=r[t];if(void 0===d)return!1;if("function"==typeof d)c(d,this,e);else{var h=d.length,f=w(d,h);for(i=0;i<h;++i)c(f[i],this,e)}return!0},d.prototype.addListener=function(t,e){return v(this,t,e,!1)},d.prototype.on=d.prototype.addListener,d.prototype.prependListener=function(t,e){return v(this,t,e,!0)},d.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.on(t,m(this,t,e)),this},d.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.prependListener(t,m(this,t,e)),this},d.prototype.removeListener=function(t,e){var n,r,o,i,c;if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);if(void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===e||n[i].listener===e){c=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,o),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,c||e)}return this},d.prototype.off=d.prototype.removeListener,d.prototype.removeAllListeners=function(t){var e,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},d.prototype.listeners=function(t){return y(this,t,!0)},d.prototype.rawListeners=function(t){return y(this,t,!1)},d.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):_.call(t,e)},d.prototype.listenerCount=_,d.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},1123:function(t,e,n){(function(t){function n(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===n(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===n(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===n(t)},e.isError=function(t){return"[object Error]"===n(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(this,n(125).Buffer)},1124:function(t,e,n){},1125:function(t,e,n){},1126:function(t,e,n){},1127:function(t,e,n){},1128:function(t,e,n){},1129:function(t,e,n){},1130:function(t,e,n){},1131:function(t,e,n){},1132:function(t,e,n){},1133:function(t,e,n){},1137:function(t,e,n){"use strict";(function(e){!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,n,r,o){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var c,i,l=arguments.length;switch(l){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,r)});case 4:return e.nextTick(function(){t.call(null,n,r,o)});default:for(c=new Array(l-1),i=0;i<c.length;)c[i++]=arguments[i];return e.nextTick(function(){t.apply(null,c)})}}}:t.exports=e}).call(this,n(59))},1153:function(t,e,n){},1154:function(t,e,n){},1155:function(t,e,n){},1156:function(t,e,n){},1157:function(t,e,n){},1158:function(t,e,n){},1159:function(t,e,n){},1160:function(t,e,n){},1161:function(t,e,n){},1162:function(t,e,n){},1163:function(t,e,n){},1164:function(t,e,n){},1165:function(t,e,n){},1166:function(t,e,n){},1167:function(t,e,n){},1168:function(t,e,n){},1169:function(t,e,n){},1170:function(t,e,n){},1171:function(t,e,n){},1172:function(t,e,n){},1173:function(t,e,n){},1174:function(t,e,n){},1175:function(t,e,n){},1176:function(t,e,n){},1177:function(t,e,n){},1178:function(t,e,n){},1179:function(t,e,n){},1180:function(t,e,n){},1181:function(t,e,n){},1182:function(t,e,n){},1183:function(t,e,n){},1184:function(t,e,n){},1185:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAVCAYAAAAjODzXAAAAAXNSR0IArs4c6QAAAjZJREFUSA1j/A8EDCSCz39/MWx+c49h3es7DEc/PmWw4pdiCBJVZfAVUWLgY2YjyTSY9YzEOgRk+ZY39xnWvr7NsOfdI4af//5gWMjGxMzgIiTHEAx0lA+RjiLKIcRYjuEaqAAxjoI5AqQFI0Rglq8D+nw3Dp/jshyXOC5HYTgEZPnWt8Bgf0U9y/E5ylVIniFQRBkl+hiTru/8v/bVHaxxjsswaoiDQgMUUoGiKgzzNdwYmHiAqZyFkZEaZpNsBiMDI8O97x/B+sBp5Mvf3+DcsOD5VYYTH5+TbCApGgRY2RmCRVQZYiU0gWnwIcMuID5gGMrAAjKEh5mVIV5CC4xPfHrO4HhuNSlmE612ibYnuKxhZWAC69n9/hEDA7QYAzsE2SQFDn5kLlXZoPIFBJBzC8wCiNNgPDrT94Hp4+2fHwzfgEljwByy8tUthiMfnjKEiakxpN3YPXAOefTjE4M6lyBDHDBt3vz2nv4OgaWPVCldcFpxvbCWoUzOFJJr6Jw0wNYJsLAzbNTzB7NBjhuwNILueQyHMNGolAUV5/gAhkPEWDkZbASk8ekhS85JUBavPgyHgFSv0/VlCBdXZ2CkUuhY8EsyzNZwBTsEl5kY7RFkZ1/7+o5hwYurDJve3GV4+P0TshRBNhew2rAGNiETJbXBNSyyBljOAYmB2CCM1yHIml/++sZw8tMLhlPAuujRj88Mb35/B+Mf//4yiACjU5iVA0xrcguB27CGPGIMzDhCFJtDAPGaAKZlSZN6AAAAAElFTkSuQmCC"},1186:function(t,e,n){},1187:function(t,e,n){},1188:function(t,e,n){},1189:function(t,e,n){},1190:function(t,e,n){},1191:function(t,e,n){},1192:function(t,e,n){(e=t.exports=n(1258)).Stream=e,e.Readable=e,e.Writable=n(1193),e.Duplex=n(1083),e.Transform=n(1262),e.PassThrough=n(1411)},1193:function(t,e,n){"use strict";(function(e){var r=n(1137);function o(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;t.entry=null;for(;r;){var o=r.callback;e.pendingcb--,o(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=C;var c,l=r.nextTick;C.WritableState=k;var d=n(1123);d.inherits=n(559);var h={deprecate:n(1410)},f=n(1259),v=n(1086).Buffer,m=e.Uint8Array||function(){};var y,_=n(1260);function w(){}function k(t,e){c=c||n(1083),t=t||{};var d=e instanceof c;this.objectMode=!!t.objectMode,d&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var h=t.highWaterMark,f=t.writableHighWaterMark,v=this.objectMode?16:16384;this.highWaterMark=h||0===h?h:d&&(f||0===f)?f:v,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var m=!1===t.decodeStrings;this.decodeStrings=!m,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,o=n.sync,c=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,o,c){--e.pendingcb,n?(r.nextTick(c,o),r.nextTick(A,t,e),t._writableState.errorEmitted=!0,t.emit("error",o)):(c(o),t._writableState.errorEmitted=!0,t.emit("error",o),A(t,e))}(t,n,o,e,c);else{var d=j(n);d||n.corked||n.bufferProcessing||!n.bufferedRequest||S(t,n),o?l(M,t,n,d,c):M(t,n,d,c)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function C(t){if(c=c||n(1083),!(y.call(C,this)||this instanceof c))return new C(t);this._writableState=new k(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),f.call(this)}function x(t,e,n,r,o,c,l){e.writelen=r,e.writecb=l,e.writing=!0,e.sync=!0,n?t._writev(o,e.onwrite):t._write(o,c,e.onwrite),e.sync=!1}function M(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),A(t,e)}function S(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,c=new Array(r),l=e.corkedRequestsFree;l.entry=n;for(var d=0,h=!0;n;)c[d]=n,n.isBuf||(h=!1),n=n.next,d+=1;c.allBuffers=h,x(t,e,!0,e.length,c,"",l.finish),e.pendingcb++,e.lastBufferedRequest=null,l.next?(e.corkedRequestsFree=l.next,l.next=null):e.corkedRequestsFree=new o(e),e.bufferedRequestCount=0}else{for(;n;){var f=n.chunk,v=n.encoding,m=n.callback;if(x(t,e,!1,e.objectMode?1:f.length,f,v,m),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function j(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function O(t,e){t._final(function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),A(t,e)})}function A(t,e){var n=j(e);return n&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,r.nextTick(O,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}d.inherits(C,f),k.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(k.prototype,"buffer",{get:h.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(y=Function.prototype[Symbol.hasInstance],Object.defineProperty(C,Symbol.hasInstance,{value:function(object){return!!y.call(this,object)||this===C&&(object&&object._writableState instanceof k)}})):y=function(object){return object instanceof this},C.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},C.prototype.write=function(t,e,n){var o,c=this._writableState,l=!1,d=!c.objectMode&&(o=t,v.isBuffer(o)||o instanceof m);return d&&!v.isBuffer(t)&&(t=function(t){return v.from(t)}(t)),"function"==typeof e&&(n=e,e=null),d?e="buffer":e||(e=c.defaultEncoding),"function"!=typeof n&&(n=w),c.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),r.nextTick(e,n)}(this,n):(d||function(t,e,n,o){var c=!0,l=!1;return null===n?l=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(l=new TypeError("Invalid non-string/buffer chunk")),l&&(t.emit("error",l),r.nextTick(o,l),c=!1),c}(this,c,t,n))&&(c.pendingcb++,l=function(t,e,n,r,o,c){if(!n){var l=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=v.from(e,n));return e}(e,r,o);r!==l&&(n=!0,o="buffer",r=l)}var d=e.objectMode?1:r.length;e.length+=d;var h=e.length<e.highWaterMark;h||(e.needDrain=!0);if(e.writing||e.corked){var f=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:o,isBuf:n,callback:c,next:null},f?f.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else x(t,e,!1,d,r,o,c);return h}(this,c,d,t,e,n)),l},C.prototype.cork=function(){this._writableState.corked++},C.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||S(this,t))},C.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(C.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),C.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},C.prototype._writev=null,C.prototype.end=function(t,e,n){var o=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),o.corked&&(o.corked=1,this.uncork()),o.ending||o.finished||function(t,e,n){e.ending=!0,A(t,e),n&&(e.finished?r.nextTick(n):t.once("finish",n));e.ended=!0,t.writable=!1}(this,o,n)},Object.defineProperty(C.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),C.prototype.destroy=_.destroy,C.prototype._undestroy=_.undestroy,C.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,n(42))},1194:function(t,e,n){},1195:function(t,e,n){},1196:function(t,e,n){},1197:function(t,e,n){},1198:function(t,e,n){},1199:function(t,e,n){},1200:function(t,e,n){},1201:function(t,e,n){},1202:function(t,e,n){},1203:function(t,e,n){},1204:function(t,e,n){},1205:function(t,e,n){},1206:function(t,e,n){},1207:function(t,e,n){},1208:function(t,e,n){},1209:function(t,e,n){},1210:function(t,e,n){},1211:function(t,e,n){},1212:function(t,e,n){},1213:function(t,e,n){},1214:function(t,e,n){},1215:function(t,e,n){},1216:function(t,e,n){},1217:function(t,e,n){},1218:function(t,e,n){},1219:function(t,e,n){},1220:function(t,e,n){},1221:function(t,e,n){},1222:function(t,e,n){},1223:function(t,e,n){},1227:function(t,e,n){t.exports=n.p+"img/2a8a992.png"},1231:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAmdJREFUSA21ls9rU0EQx2c2sWmCBVuphVh/QAsK1rZ4FlQUxR9YqtdeBHvw0GD/AvHkPT0a7EUPBYso2OJBrODNiwcFfyBoEX8heojEIr63znfztnm/+vKerQNhs5vZz8zOzs6EKUGKj6r9rPSYq/m0qA3Ip+ypf5TxrWJ9X7t899eRygdvPTJwZEUWSk9myu4ffZU0XSDSuTid1ho7xDSr8nylcXAKhgMSMVB6PHPW1e5NgXcFNNtNmOqK1UTj0NQ9v6ryT4pL1YrA72SGAyIOYS8YfubqCTzPAQ8Y9Sun+s7kyknG7UmMgWbM3Zf/5HmcVYQrr/biToy33oVmi3kc2K4hXEgSEUYqaqJ37bPF7k47siPh2S3h0mMbD4cTOge28h5RWrcCelvyBbq84wD1FzYH1u0E7LxM8EIzS7fAF0bGabRrGxVVjq69fxrHGMAl2+cfUIB353oHqYOjD9kPf9P4QTc+vQjs9U3Ka+b8pe3DdGvfKZrff4YK4qGVMPz4s3n68rthf46MMBCpH9Ca+/rabDzWs4tuDzWNxME/J8DB5s6l6gJpfRLQsOwpddOD0fPU11Gih9+XaeumThNzhAWet4HLI+BFhZIbBtv5KwGd8EJwtGdnNrhAwFao52LKsdDwaI0sr9Tp+c9v6Tw3EHbANrVIwnRdwnQxDPfPc8zkaHnzaYW5tnK4MmmyCM1CmkY9aW82OIqdMEWMAVP1pFmIETfJSKrfmuV6wna31XeA+s3E0+syInAwbC+AQ+YO/J7915YJQ7COZiE5XEvKrpZTaPpcMw0m1I+hEzlBayPRRvxt+QvzgQD15GCKOwAAAABJRU5ErkJggg=="},1232:function(t,e,n){"use strict";n(13);var r=n(2),o=(n(83),n(95),n(17),n(1136)),c=n.n(o),l={props:{realPrice:{type:Number,default:0},qrcodeUrl:{type:String,default:""},changeChannel:{type:Function,default:null}},watch:{qrcodeUrl:function(t){t&&c.a.toCanvas(this.$refs.qrcode,t)}}},d=(n(1277),n(5)),h=Object(d.a)(l,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-center"},[n("p",{staticClass:"vip-wx-price font-18 bold"},[t._v("\n    付款：\n    "),n("span",{staticClass:"color-red"},[t._v("\n      ￥"+t._s(t.realPrice)+"\n    ")])]),t._v(" "),n("div",{staticClass:"vip-wx-qrcode"},[n("canvas",{ref:"qrcode",staticClass:"canvas-qrcode",attrs:{width:"256",height:"256"}})]),t._v(" "),n("p",[t._v("微信扫描二维码完成支付")]),t._v(" "),n("a",{attrs:{href:"javascript:;"},on:{click:t.changeChannel}},[t._v("\n    更换支付方式\n  ")])])},[],!1,null,"44a66f73",null).exports,f={props:{changeChannel:{type:Function,default:null},queryBillStatus:{type:Function,default:null}}},v=(n(1278),Object(d.a)(f,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-center"},[n("div",{staticClass:"content-box inline-block"},[n("h4",{staticClass:"text-center color-text"},[t._v("\n      支付确认\n    ")]),t._v(" "),n("br"),t._v(" "),n("div",{staticClass:"checker-group flex"},[n("b-button",{staticClass:"checker paid-success",attrs:{variant:"primary"},on:{click:t.queryBillStatus}},[t._v("\n        支付成功\n      ")]),t._v(" "),n("b-button",{staticClass:"checker",attrs:{variant:"outline-primary"},on:{click:t.changeChannel}},[t._v("\n        选择支付方式\n      ")])],1)])])},[],!1,null,"5922c102",null).exports),m={props:{title:{type:String,required:!0},last:{type:Boolean,default:!1},shrinkable:{type:Boolean,default:!1}},data:function(){return{showBody:!1}},computed:{collapseId:function(){return"collapse-".concat(this.title)}},methods:{toggleShowBody:function(){this.showBody=!this.showBody}}},y=(n(1279),Object(d.a)(m,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"module-section",class:{last:t.last}},[t.shrinkable?n("div",{staticClass:"section-header shrinkable",on:{click:t.toggleShowBody}},[n("span",[t._v(t._s(t.title))]),t._v(" "),n("i",{staticClass:"fa fa-angle-down",class:{active:t.showBody}})]):n("div",{staticClass:"section-header"},[n("span",[t._v(t._s(t.title))])]),t._v(" "),t.shrinkable?n("b-collapse",{attrs:{id:t.collapseId},model:{value:t.showBody,callback:function(e){t.showBody=e},expression:"showBody"}},[n("div",{staticClass:"section-body"},[t._t("section-body")],2)]):n("div",{staticClass:"section-body"},[t._t("section-body")],2)],1)},[],!1,null,"03dae3f2",null).exports),_=n(570),w=n.n(_),k=n(569),C=n.n(k),x={components:{BaseModule:y},props:{setPurchaseDays:{type:Function,required:!0},levelIndex:{type:Number,default:1}},data:function(){return{selected:365,daysOption:[365,730]}},computed:{daysImages:function(){var t=[null,C.a];return 2===this.levelIndex&&t.splice(0,1,w.a),t}},watch:{selected:function(t){this.setPurchaseDays(t)}}},M=(n(1280),Object(d.a)(x,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("base-module",{attrs:{title:"开通时长"}},[n("template",{slot:"section-body"},[n("div",{staticClass:"year-options"},t._l(t.daysOption,function(e,r){return n("div",{key:r,staticClass:"option-btn year-option",class:{active:e===t.selected},on:{click:function(n){t.selected=e}}},[n("span",[t._v(t._s((e/365).toFixed(0))+"年")]),t._v(" "),t.daysImages[r]?n("img",{attrs:{src:t.daysImages[r],alt:"额外赠送天数"}}):t._e()])}),0)])],2)},[],!1,null,"be584dbe",null).exports),S={components:{BaseModule:y},props:{purpose:{type:String,default:"common"},courseId:{type:Number,default:0},updateCoupon:{type:Function,required:!0}},data:function(){return{coupon:"",message:"",queryStatus:!1}},computed:{realPurpose:function(){return"common"===this.purpose?"common":"buy_".concat(this.purpose)}},methods:{queryCoupon:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){var e,n,r,data,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.coupon&&this.realPurpose){t.next=2;break}return t.abrupt("return");case 2:return e=this.$urls.verifyCoupon(this.coupon,this.realPurpose,this.courseId),t.next=5,this.$ajax.post(e);case 5:n=t.sent,r=n.ok,data=n.data,o=n.response,r?(this.queryStatus=!0,this.parseCouponInfo(data)):(this.queryStatus=!1,o.data&&this.parseCouponInfo(o.data));case 10:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),parseCouponInfo:function(t){var e=t.price,n=void 0===e?0:e,r=t.message,o=void 0===r?"":r,c=t.percent,l=void 0===c?1:c;this.message=o,this.queryStatus&&this.updateCoupon({price:n,percent:l,coupon:this.coupon})}}},j=(n(1281),Object(d.a)(S,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("base-module",{attrs:{title:"使用优惠码/邀请码",shrinkable:!0}},[n("template",{slot:"section-body"},[n("b-input-group",{staticClass:"input-group-wrapper mb-2",attrs:{size:"sm"}},[n("b-form-input",{model:{value:t.coupon,callback:function(e){t.coupon=e},expression:"coupon"}}),t._v(" "),n("b-input-group-append",[n("b-button",{attrs:{size:"sm",variant:"outline-primary"},on:{click:t.queryCoupon}},[t._v("\n          使用\n        ")])],1)],1),t._v(" "),t.message?n("p",{staticClass:"no-margin",class:[t.queryStatus?"color-primary":"color-red"]},[t._v("\n      "+t._s(t.message)+"\n    ")]):t._e()],1)],2)},[],!1,null,"f8ef626e",null).exports),O={props:{realPrice:{type:Number,default:0},updateFenqiNum:{type:Function,required:!0},interestFreeNum:{type:Number,default:0}},data:function(){return{activePlan:{num:0}}},computed:{pricePlanPerPeriod:function(){var t=this,e=[],n=this.realPrice,r=0,o=0,text="";return[0,3,6,12].map(function(c){r=t.calculateFee(t.realPrice,c),c>0?(text="x ".concat(c," 期"),(n=t.realPrice/c).toFixed(2),o=n+r):(text="不分期",o=t.realPrice),e.push({num:c,text:text,fee:r,price:o.toFixed(2)})}),e}},methods:{calculateFee:function(t,e){if(e<=this.interestFreeNum)return 0;if(0===e)return 0;var n=t*{3:.023,6:.045,12:.075}[e]/e;return+(n=n.toFixed(2))},setActivePlan:function(t){this.activePlan=t,this.updateFenqiNum(t.num)}}},A=(n(1282),{components:{BaseModule:y,AntCreditPayPanel:Object(d.a)(O,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"ant-installment relative"},[r("div",{staticClass:"installment flex space-between"},[t._l(t.pricePlanPerPeriod,function(e,o){return[r("div",{key:o,staticClass:"installment-plan relative",class:{active:e.num===t.activePlan.num},on:{click:function(n){return t.setActivePlan(e)}}},[r("img",{directives:[{name:"show",rawName:"v-show",value:e.num===t.activePlan.num,expression:"plan.num === activePlan.num"}],staticClass:"checked",attrs:{src:n(572),alt:"checked"}}),t._v(" "),r("span",{staticClass:"price"},[t._v("\n          ￥"+t._s(e.price)+"\n        ")]),t._v(" "+t._s(e.text)+"\n      ")])]})],2),t._v(" "),r("p",{staticClass:"selected-plan flex"},[t.activePlan.num?r("span",{staticClass:"fee"},[t._v("\n      已选择\n      "),r("span",{staticClass:"bold"},[t._v("\n        "+t._s(t.activePlan.num)+" 期\n      ")]),t._v(" ， 每期含手续费 "+t._s(t.activePlan.fee)+" 元\n    ")]):r("span",{staticClass:"fee"},[t._v("\n      已选择\n      "),r("span",{staticClass:"bold"},[t._v("\n        不分期\n      ")]),t._v(" ，无手续费\n    ")]),t._v(" "),r("nuxt-link",{staticClass:"inline-block float-right",staticStyle:{color:"#aaa"},attrs:{to:"/questions/88927/",target:"_blank"}},[t._v("\n      使用花呗分期时遇到问题？\n    ")])],1)])},[],!1,null,"25864bd1",null).exports},props:{realPrice:{type:Number,default:0},updateFenqiNum:{type:Function,required:!0},updateChannel:{type:Function,required:!0},interestFreeNum:{type:Number,default:0}},data:function(){return{channles:["ALI_WEB","WX_NATIVE","ANT_CREDIT_PAY"],selectedChannle:"ALI_WEB",fenqiNum:0}},watch:{selectedChannle:function(t){this.updateChannel(t),"ANT_CREDIT_PAY"!==t&&(this.fenqiNum=0)},fenqiNum:function(t){this.updateFenqiNum(t)}},mounted:function(){this.updateChannel(this.selectedChannle)},methods:{updateFenqi:function(t){this.fenqiNum=t}}}),L=(n(1283),Object(d.a)(A,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("base-module",{attrs:{title:"支付方式",last:!0}},[n("template",{slot:"section-body"},[n("div",{staticClass:"payment-channels flex"},[t._l(t.channles,function(e,r){return[n("div",{key:r,staticClass:"channel",class:[e,e===t.selectedChannle?"active":""],on:{click:function(n){t.selectedChannle=e}}})]})],2),t._v(" "),"ANT_CREDIT_PAY"==t.selectedChannle?n("ant-credit-pay-panel",{attrs:{"real-price":t.realPrice,"update-fenqi-num":t.updateFenqi,"interest-free-num":t.interestFreeNum}}):t._e()],1)],2)},[],!1,null,"0881e13f",null).exports),I=n(4),E=n.n(I),T={components:{WxQrcode:h,AlipayChecker:v,DaysModule:M,CouponModule:j,PaymentModule:L},props:{price:{type:Number,default:399},modalTitle:{type:String,default:""},showCoupon:{type:Boolean,default:!0},purchaseType:{type:String,default:"member"},vipLevelIndex:{type:Number,default:1},payHint:{type:String,default:""},needBook:{type:Boolean,default:!1},bookPrice:{type:Number,default:0},courseId:{type:Number,default:0},labId:{type:Number,default:0},successUrl:{type:String,default:""},returnUrl:{type:String,default:""},successMessage:{type:String,default:""},redirectDelay:{type:Number,default:0},daysModule:{type:Boolean,default:!1},purchaseDays:{type:Number,default:365},setPurchaseDays:{type:Function,default:null}},data:function(){return{showModal:!1,channel:"",agreeTerms:!0,fenqiNum:0,interestFreeNum:0,bookMailInfo:{needBook:!0},showBookMailInfo:!1,showAlipayChecker:!1,showWxQrcode:!1,wxQrcodeUrl:"",coupon:"",couponPrice:0,couponPercent:1,billNumber:0,billQueryTimer:null,newTab:null}},computed:{realPrice:function(){if(this.price<0)return this.price;var t=this.price*this.couponPercent-this.couponPrice;return this.bookMailInfo.needBook&&(t+=this.bookPrice),t<0&&(t=0),parseFloat(t.toFixed(2))},purchaseParmas:function(){var data={channel:this.channel,beans:0};switch(this.purchaseType){case"member":data.level=this.vipLevelIndex;break;case"lab":data.buy_start_times=1,data.return_url=window.location.href;break;default:this.needBook?(data.recipient=this.bookMailInfo.recipient,data.recipient_addr=this.bookMailInfo.recipient_addr,data.recipient_phone=this.bookMailInfo.ecipient_phone,data.need_book=!0):data.need_book=!1}return"ANT_CREDIT_PAY"===this.channel&&(data.channel="ALI_WEB"),this.coupon&&(data.coupon_num=this.coupon),this.fenqiNum>0&&(data.fq_num=""+this.fenqiNum),this.returnUrl&&(data.return_url="".concat(location.origin).concat(this.returnUrl)),this.daysModule&&(data.buy_days=this.purchaseDays),data},purchaseUrl:function(){var t="";switch(this.purchaseType){case"member":t=this.$urls.purchaseVip;break;case"lab":t=this.$urls.purchaseLab(this.labId);break;default:t=this.$urls.purchaseCourse(this.courseId)}return t},paymentChannels:function(){return["ALI_WEB","WX_NATIVE","ANT_CHECK_LATER"]},shouldOpenNewTab:function(){return this.realPrice>0&&this.purchaseParmas.channel.includes("ALI")}},watch:{showModal:function(t){this.resetCoupon(),t||365===this.purchaseDays||this.setPurchaseDays(365)}},beforeDestroy:function(){clearInterval(this.billQueryTimer)},mounted:function(){E()().isBetween("2019-11-04 10:00:00","2019-11-13 00:00:00")&&(this.interestFreeNum=6)},methods:{resetCoupon:function(){this.coupon="",this.couponPrice=0,this.couponPercent=1},setBookMailInfo:function(t){this.bookMailInfo=t},setFenqiNum:function(t){this.fenqiNum=t},setChannel:function(t){this.channel=t},setCouponData:function(t){var e=t.coupon,n=t.price,r=t.percent;this.coupon=e,this.couponPrice=n,this.couponPercent=r},purchaseConfirm:function(){this.agreeTerms&&(this.needBook&&this.purchaseParmas.needBook&&!this.purchaseParmas.recipient||this.doPurchase({url:this.purchaseUrl,params:this.purchaseParmas}))},doPurchase:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(e){var n,r,o=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=e.url,r=e.params,this.shouldOpenNewTab&&(this.newTab=window.open()),this.$ajax.post(n,r).then(function(t){t.ok?t.data.need_pay?o.handleResponse(t.data):(o.$showMessage("success",o.successMessage||"支付成功"),o.successUrl?o.redirectDelay?setTimeout(function(){location.href=o.successUrl},+o.redirectDelay):location.href=o.successUrl:location.reload()):(o.$actionMessage(!1,t.response.data.message,!1,"",""),o.shouldOpenNewTab&&o.newTab&&o.newTab.close())});case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),changeChannel:function(){this.showAlipayChecker=!1,this.showWxQrcode=!1,clearInterval(this.billQueryTimer)},handleResponse:function(t){if(this.billNumber=t.bill_number,t.alipay_form){var e=document.createElement("div");e.innerHTML=t.alipay_form;var form=e.querySelector("form");form.setAttribute("charset","utf-8"),form.setAttribute("accept-charset","utf-8"),this.newTab.document.body.append(e),this.newTab.document.forms.alipaysubmit.submit(),this.showAlipayChecker=!0}else t.url||t.wx_wap_url?this.newTab.location.href=t.url||t.wx_wap_url:(this.showWxQrcode=!0,this.wxQrcodeUrl=t.wx_qrcode_url,this.queryWxBillStatus())},queryWxBillStatus:function(){var t=this;this.billQueryTimer=setInterval(function(){t.queryBillStatus({billNumber:t.billNumber,channel:"wx"})},3e3)},queryAlipayBillStatus:function(){this.queryBillStatus({billNumber:this.billNumber,channel:"alipay"})},queryBillStatus:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(e){var n,r,o,c,l=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.billNumber,r=e.channel,o=void 0===r?"":r,t.next=3,this.$ajax.get(this.$urls.queryBillStatus(n));case 3:(c=t.sent).ok&&(c.data.is_paid?(this.$showMessage("success",this.successMessage||"支付成功"),this.successUrl?this.redirectDelay?setTimeout(function(){l.$router.push({path:l.successUrl})},+this.redirectDelay):this.$router.push({path:this.successUrl}):location.reload()):"alipay"===o&&(this.$showMessage("danger","支付失败"),location.reload()));case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}},D=(n(1284),n(1285),Object(d.a)(T,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{attrs:{id:"modal-purchase",title:t.modalTitle,size:"lg"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[n("div",{staticClass:"custom-modal-header w-100 vertical-center",attrs:{slot:"modal-header"},slot:"modal-header"},[n("h3",{staticClass:"no-margin"},[t._v("\n      "+t._s(t.modalTitle)+"\n    ")]),t._v(" "),n("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){t.showModal=!1}}},[t._v("\n      ×\n    ")])]),t._v(" "),n("div",{ref:"modalContent",staticClass:"custom-modal-content text-left"},[n("wx-qrcode",{directives:[{name:"show",rawName:"v-show",value:t.showWxQrcode,expression:"showWxQrcode"}],attrs:{"qrcode-url":t.wxQrcodeUrl,"bill-number":t.billNumber,"change-channel":t.changeChannel,"real-price":t.realPrice}}),t._v(" "),n("alipay-checker",{directives:[{name:"show",rawName:"v-show",value:t.showAlipayChecker,expression:"showAlipayChecker"}],attrs:{"bill-number":t.billNumber,"query-bill-status":t.queryAlipayBillStatus,"change-channel":t.changeChannel}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.showWxQrcode&&!t.showAlipayChecker,expression:"!showWxQrcode && !showAlipayChecker"}]},[t.daysModule?n("days-module",{attrs:{"level-index":t.vipLevelIndex,"set-purchase-days":t.setPurchaseDays}}):t._e(),t._v(" "),t.showCoupon?n("coupon-module",{attrs:{"update-coupon":t.setCouponData,purpose:t.purchaseType,"course-id":t.courseId}}):t._e(),t._v(" "),n("payment-module",{attrs:{"real-price":t.realPrice,"update-fenqi-num":t.setFenqiNum,"update-channel":t.setChannel,"interest-free-num":t.interestFreeNum}})],1)],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.showWxQrcode&&!t.showAlipayChecker,expression:"!showWxQrcode && !showAlipayChecker"}],staticClass:"custom-modal-footer w-100 flex",attrs:{slot:"modal-footer"},slot:"modal-footer"},[n("div",{staticClass:"box-left"},[n("span",{staticClass:"vertical-middle font-18"},[t._v("\n        付款:\n      ")]),t._v(" "),n("strong",{staticClass:"color-red vertical-middle real-price"},[t._v("\n        "+t._s(t.realPrice>-1?"￥"+t.realPrice:"")+"\n      ")]),t._v(" "),t.payHint?n("p",{staticClass:"pay-hint font-14 color-red"},[t._v("\n        "+t._s(t.payHint)+"\n      ")]):t._e()]),t._v(" "),n("div",{staticClass:"box-right"},[n("b-button",{staticClass:"btn-confirm",class:{disabled:!t.agreeTerms},attrs:{variant:"danger"},on:{click:t.purchaseConfirm}},[t._v("\n        确认购买\n      ")]),t._v(" "),n("div",{staticClass:"checkbox-terms"},[n("b-form-checkbox",{staticClass:"no-margin font-13",attrs:{value:!0,"unchecked-value":!1,plain:""},model:{value:t.agreeTerms,callback:function(e){t.agreeTerms=e},expression:"agreeTerms"}},[t._v("\n          同意\n          "),n("a",{attrs:{href:"/paid_account_terms",target:"_blank"}},[t._v("\n            实验楼用户付费协议\n          ")])])],1)],1)])])},[],!1,null,"1c29ce6c",null));e.a=D.exports},1254:function(t,e,n){t.exports=n.p+"img/9f0571e.png"},1255:function(t,e,n){t.exports=n.p+"img/c156abe.png"},1256:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAVCAYAAAAjODzXAAAAAXNSR0IArs4c6QAAAcxJREFUSA3FVsmKAjEQfd2uB1EQFMUFcTn5BQoePPjR4tmD/6DgLqgXQUFBcXxxOkS76Y7O2BYEKkml6lFrjOuN8CKdz2fMZjNMp1Os12uk02kUi0Xk83mEQiFtbappQxcIjc/nc0wmE6xWK1wuF5vBQCCAbDarBUoFQd4ViI5xG5rfAy9QnkD+YlwXVDAYfBCVHvmE8QdLyoaeymQyMnwWKKPf71+ZdE4xV95/hDVNE4VCAc1mEyaz3DCMjxjSUbrf74WYSFaGhtUwGo2w2Wx03r8tEw6HRVgqlQqWy6VYnU4HImsYJ15wbbdbdLvdtw25PWy1WsjlcmBISIvFQoo/pu/tOBaLycv/Ztj01LJV9d+hqSc+8ofDAafTSRTK14CMx2MxHkqlEgaDAb4GhN6Ix+Mol8vY7Xb+A7FaRa1WE0nQ6/VQr9fvVeNjWkhTLON2uy2T92uhkYh+Gd+AcMa4kQ1INBoVHx23R+/ccdA5kZUzNiAUZuxYVpaQk4JXzlKpFBqNhnzipNf1Y8SyGg6H4mdmDSepzYPh2OAXslqtign7LK52WPkfeRZy2h+PRzGHOIvYA7i3umIkEgEXw5pIJEAPJJNJT4+qYH4A/Avwl1fj9woAAAAASUVORK5CYII="},1257:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAgxJREFUSA21ljtuAjEQhne9IETBAbJKR5MD5BaREhANjzRcIFIKonQoHUqKSLkATXg0CBKJW+QAaeiiXICCAnbh/53xCgQELw9L1no94+/32uPxus4/pdfrnU8mkxvXda/glkX1xf0Xz9F8Ph+m0+mPQqHwI/1rD3etBx2dTscPw/AJzSog3iYf0wfxAO2mUqpeKpUovFLWBAC/DoLgHV4Z1CkAA4gMEonEFyAaAHF/NptdwpaDLQe/JOrY87xbiHyiHZUVgVardYcBr7Aq1D6gtWKxOIq8NzS63W4WYi8w5VFDiN5XKpU34xoJyMz7NGCmj+VymYOsS7vdruHLGhyAL8mbL9ECXHMsyzdsGcAf4sLNLETkGe9crgvuCZfCkQ3lmvf3hZMjY7kKGWE6iqGIjirqlGuO50FFGFNAqmQrxjlDkdGya0NtlMmQyPPIVnjhIXIYijYAGx/DIpt7wBPqMM5tBtv4LLGyFNDH3xwiG8AunyWWr6No14C49lQqFZ0vCkTHPy5omz8290xs+hzoVMDcsm1A3P4l1khhx4cEYMeZtI5SDItsxXyOjgAvOSauQxXIIItMspVcFk2Ak5IVD9IQBtN3k2wdRQirOjrGqHkmrH0VZCzT9liYOu87zHq8LGBAjgob+4hIJmW6DuXi0dEZxStnfdILhwIsJ70y/yROfOkbET6P8duyADFNLbDfiJeBAAAAAElFTkSuQmCC"},1258:function(t,e,n){"use strict";(function(e,r){var o=n(1137);t.exports=S;var c,l=n(580);S.ReadableState=M;n(1098).EventEmitter;var d=function(t,e){return t.listeners(e).length},h=n(1259),f=n(1086).Buffer,v=e.Uint8Array||function(){};var m=n(1123);m.inherits=n(559);var y=n(1407),_=void 0;_=y&&y.debuglog?y.debuglog("stream"):function(){};var w,k=n(1408),C=n(1260);m.inherits(S,h);var x=["error","close","destroy","pause","resume"];function M(t,e){t=t||{};var r=e instanceof(c=c||n(1083));this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var o=t.highWaterMark,l=t.readableHighWaterMark,d=this.objectMode?16:16384;this.highWaterMark=o||0===o?o:r&&(l||0===l)?l:d,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new k,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(w||(w=n(1261).StringDecoder),this.decoder=new w(t.encoding),this.encoding=t.encoding)}function S(t){if(c=c||n(1083),!(this instanceof S))return new S(t);this._readableState=new M(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),h.call(this)}function j(t,e,n,r,o){var c,l=t._readableState;null===e?(l.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,I(t)}(t,l)):(o||(c=function(t,e){var n;r=e,f.isBuffer(r)||r instanceof v||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var r;return n}(l,e)),c?t.emit("error",c):l.objectMode||e&&e.length>0?("string"==typeof e||l.objectMode||Object.getPrototypeOf(e)===f.prototype||(e=function(t){return f.from(t)}(e)),r?l.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):O(t,l,e,!0):l.ended?t.emit("error",new Error("stream.push() after EOF")):(l.reading=!1,l.decoder&&!n?(e=l.decoder.write(e),l.objectMode||0!==e.length?O(t,l,e,!1):T(t,l)):O(t,l,e,!1))):r||(l.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(l)}function O(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&I(t)),T(t,e)}Object.defineProperty(S.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),S.prototype.destroy=C.destroy,S.prototype._undestroy=C.undestroy,S.prototype._destroy=function(t,e){this.push(null),e(t)},S.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=f.from(t,e),e=""),n=!0),j(this,t,e,!1,n)},S.prototype.unshift=function(t){return j(this,t,null,!0,!1)},S.prototype.isPaused=function(){return!1===this._readableState.flowing},S.prototype.setEncoding=function(t){return w||(w=n(1261).StringDecoder),this._readableState.decoder=new w(t),this._readableState.encoding=t,this};var A=8388608;function L(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=A?t=A:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function I(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(_("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?o.nextTick(E,t):E(t))}function E(t){_("emit readable"),t.emit("readable"),U(t)}function T(t,e){e.readingMore||(e.readingMore=!0,o.nextTick(D,t,e))}function D(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(_("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function N(t){_("readable nexttick read 0"),t.read(0)}function R(t,e){e.reading||(_("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),U(t),e.flowing&&!e.reading&&t.read(0)}function U(t){var e=t._readableState;for(_("flow",e.flowing);e.flowing&&null!==t.read(););}function P(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?function(t,e){var p=e.head,n=1,r=p.data;t-=r.length;for(;p=p.next;){var o=p.data,c=t>o.length?o.length:t;if(c===o.length?r+=o:r+=o.slice(0,t),0===(t-=c)){c===o.length?(++n,p.next?e.head=p.next:e.head=e.tail=null):(e.head=p,p.data=o.slice(c));break}++n}return e.length-=n,r}(t,e):function(t,e){var n=f.allocUnsafe(t),p=e.head,r=1;p.data.copy(n),t-=p.data.length;for(;p=p.next;){var o=p.data,c=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,c),0===(t-=c)){c===o.length?(++r,p.next?e.head=p.next:e.head=e.tail=null):(e.head=p,p.data=o.slice(c));break}++r}return e.length-=r,n}(t,e);return r}(t,e.buffer,e.decoder),n);var n}function B(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,o.nextTick($,e,t))}function $(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function F(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1}S.prototype.read=function(t){_("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return _("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?B(this):I(this),null;if(0===(t=L(t,e))&&e.ended)return 0===e.length&&B(this),null;var r,o=e.needReadable;return _("need readable",o),(0===e.length||e.length-t<e.highWaterMark)&&_("length less than watermark",o=!0),e.ended||e.reading?_("reading or ended",o=!1):o&&(_("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=L(n,e))),null===(r=t>0?P(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&B(this)),null!==r&&this.emit("data",r),r},S.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},S.prototype.pipe=function(t,e){var n=this,c=this._readableState;switch(c.pipesCount){case 0:c.pipes=t;break;case 1:c.pipes=[c.pipes,t];break;default:c.pipes.push(t)}c.pipesCount+=1,_("pipe count=%d opts=%j",c.pipesCount,e);var h=(!e||!1!==e.end)&&t!==r.stdout&&t!==r.stderr?v:S;function f(e,r){_("onunpipe"),e===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,_("cleanup"),t.removeListener("close",x),t.removeListener("finish",M),t.removeListener("drain",m),t.removeListener("error",C),t.removeListener("unpipe",f),n.removeListener("end",v),n.removeListener("end",S),n.removeListener("data",k),y=!0,!c.awaitDrain||t._writableState&&!t._writableState.needDrain||m())}function v(){_("onend"),t.end()}c.endEmitted?o.nextTick(h):n.once("end",h),t.on("unpipe",f);var m=function(t){return function(){var e=t._readableState;_("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&d(t,"data")&&(e.flowing=!0,U(t))}}(n);t.on("drain",m);var y=!1;var w=!1;function k(e){_("ondata"),w=!1,!1!==t.write(e)||w||((1===c.pipesCount&&c.pipes===t||c.pipesCount>1&&-1!==F(c.pipes,t))&&!y&&(_("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,w=!0),n.pause())}function C(e){_("onerror",e),S(),t.removeListener("error",C),0===d(t,"error")&&t.emit("error",e)}function x(){t.removeListener("finish",M),S()}function M(){_("onfinish"),t.removeListener("close",x),S()}function S(){_("unpipe"),n.unpipe(t)}return n.on("data",k),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?l(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",C),t.once("close",x),t.once("finish",M),t.emit("pipe",n),c.flowing||(_("pipe resume"),n.resume()),t},S.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n),this);if(!t){var r=e.pipes,o=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<o;i++)r[i].emit("unpipe",this,n);return this}var c=F(e.pipes,t);return-1===c?this:(e.pipes.splice(c,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n),this)},S.prototype.on=function(t,e){var n=h.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&I(this):o.nextTick(N,this))}return n},S.prototype.addListener=S.prototype.on,S.prototype.resume=function(){var t=this._readableState;return t.flowing||(_("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,o.nextTick(R,t,e))}(this,t)),this},S.prototype.pause=function(){return _("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(_("pause"),this._readableState.flowing=!1,this.emit("pause")),this},S.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var i in t.on("end",function(){if(_("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)}),t.on("data",function(o){(_("wrapped data"),n.decoder&&(o=n.decoder.write(o)),n.objectMode&&null==o)||(n.objectMode||o&&o.length)&&(e.push(o)||(r=!0,t.pause()))}),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<x.length;o++)t.on(x[o],this.emit.bind(this,x[o]));return this._read=function(e){_("wrapped _read",e),r&&(r=!1,t.resume())},this},Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),S._fromList=P}).call(this,n(42),n(59))},1259:function(t,e,n){t.exports=n(1098).EventEmitter},1260:function(t,e,n){"use strict";var r=n(1137);function o(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var n=this,c=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return c||l?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||r.nextTick(o,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(r.nextTick(o,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},1261:function(t,e,n){"use strict";var r=n(1086).Buffer,o=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function c(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===o||!o(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=h,this.end=f,e=4;break;case"utf8":this.fillLast=d,e=4;break;case"base64":this.text=v,this.end=m,e=3;break;default:return this.write=y,void(this.end=_)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function l(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function d(t){var p=this.lastTotal-this.lastNeed,e=function(t,e,p){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==e?e:this.lastNeed<=t.length?(t.copy(this.lastChar,p,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,p,0,t.length),void(this.lastNeed-=t.length))}function h(t,i){if((t.length-i)%2==0){var e=t.toString("utf16le",i);if(e){var n=e.charCodeAt(e.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],e.slice(0,-1)}return e}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",i,t.length-1)}function f(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function v(t,i){var e=(t.length-i)%3;return 0===e?t.toString("base64",i):(this.lastNeed=3-e,this.lastTotal=3,1===e?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",i,t.length-e))}function m(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function y(t){return t.toString(this.encoding)}function _(t){return t&&t.length?this.write(t):""}e.StringDecoder=c,c.prototype.write=function(t){if(0===t.length)return"";var e,i;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<t.length?e?e+this.text(t,i):this.text(t,i):e||""},c.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},c.prototype.text=function(t,i){var e=function(t,e,i){var n=e.length-1;if(n<i)return 0;var r=l(e[n]);if(r>=0)return r>0&&(t.lastNeed=r-1),r;if(--n<i||-2===r)return 0;if((r=l(e[n]))>=0)return r>0&&(t.lastNeed=r-2),r;if(--n<i||-2===r)return 0;if((r=l(e[n]))>=0)return r>0&&(2===r?r=0:t.lastNeed=r-3),r;return 0}(this,t,i);if(!this.lastNeed)return t.toString("utf8",i);this.lastTotal=e;var n=t.length-(e-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",i,n)},c.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},1262:function(t,e,n){"use strict";t.exports=l;var r=n(1083),o=n(1123);function c(t,data){var e=this._transformState;e.transforming=!1;var n=e.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));e.writechunk=null,e.writecb=null,null!=data&&this.push(data),n(t);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}function l(t){if(!(this instanceof l))return new l(t);r.call(this,t),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",d)}function d(){var t=this;"function"==typeof this._flush?this._flush(function(e,data){h(t,e,data)}):h(this,null,null)}function h(t,e,data){if(e)return t.emit("error",e);if(null!=data&&t.push(data),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}o.inherits=n(559),o.inherits(l,r),l.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},l.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},l.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var o=this._readableState;(r.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},l.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},l.prototype._destroy=function(t,e){var n=this;r.prototype._destroy.call(this,t,function(t){e(t),n.emit("close")})}},1263:function(t,e,n){t.exports=n.p+"img/bdca71d.svg"},1264:function(t,e,n){t.exports=n.p+"img/ed220d0.svg"},1265:function(t,e,n){"use strict";var r=n(1),o=(n(4),n(1338)),c=n.n(o),l=n(10),d={props:{userInfo:{type:Object,default:function(){return{}}}},computed:Object(r.a)({},Object(l.d)("user",{hundredLevelUserInfo:function(t){return t.hundredLevelUserInfo}})),methods:{downloadImage:function(){c()(document.querySelector("#modalHundredLevel .modal-body"),{useCORS:!0}).then(function(canvas){var a=document.createElement("a");a.href=canvas.toDataURL("image/png"),a.download="百楼俱乐部.png",a.click()})}}},h=(n(1274),n(5)),component=Object(h.a)(d,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"hundred-level-modal"},[r("b-modal",{attrs:{id:"modalHundredLevel","hide-header":"",size:"lg"}},[r("div",{staticClass:"content-header"},[r("div",{staticClass:"user-info"},[r("user-avatar",{attrs:{user:t.userInfo,"class-name":"inline-block"}}),t._v(" "),r("div",{staticClass:"user-detail"},[r("span",[t._v("\n            "+t._s(t.userInfo.name)+"\n          ")]),t._v(" "),r("span",[t._v("\n            "+t._s(t.$dateTimeFormat(t.hundredLevelUserInfo.date,"YYYY-MM-DD",!0))+"\n          ")])])],1),t._v(" "),r("img",{staticClass:"shiyanlou-logo float-right",staticStyle:{height:"50px"},attrs:{src:n(1272),alt:"实验楼"}})]),t._v(" "),r("div",{staticClass:"content-body text-center"},[r("div",{staticClass:"rank"},[r("span",{staticClass:"text"},[t._v("\n          第\n          "),r("span",{staticClass:"num"},[t._v("\n            "+t._s(t.hundredLevelUserInfo.rank)+"\n          ")]),t._v("\n          位百楼成就获得者\n        ")])]),t._v(" "),r("img",{attrs:{src:n(1273),alt:"百楼成就"}})]),t._v(" "),r("div",{staticClass:"content-footer"},[r("ul",t._l(t.$UserEnum.hundredLevelDetails,function(e,n){return r("li",{key:n},[r("span",[t._v("\n            "+t._s(t.hundredLevelUserInfo[e.key])+t._s(e.unit)+"\n          ")]),t._v(" "),r("span",[t._v("\n            "+t._s(e.value)+"\n          ")])])}),0)]),t._v(" "),r("template",{slot:"modal-footer"},[r("div",{staticClass:"content-actions flex vertical-center space-between"},[r("div",{staticClass:"flex"},[r("div",{staticClass:"content-action local-save",on:{click:t.downloadImage}},[r("img",{attrs:{src:n(571),alt:"本地下载"}}),t._v(" "),r("span",{staticClass:"vertical-middle"},[t._v("保存到本地")])])]),t._v(" "),r("div",{staticClass:"club-invite"},[r("a",{staticClass:"club-invite-link color-primary",attrs:{href:"/questions/6512",target:"_blank"}},[r("img",{attrs:{src:n(573),alt:"奖杯"}}),t._v(" "),r("span",{staticClass:"vertical-middle link-text"},[t._v("恭喜你获得百楼俱乐部的邀请，点击查看 >")])])])])])],2)],1)},[],!1,null,null,null);e.a=component.exports},1272:function(t,e,n){t.exports=n.p+"img/14e0d18.png"},1273:function(t,e,n){t.exports=n.p+"img/f84e044.png"},1274:function(t,e,n){"use strict";var r=n(1124);n.n(r).a},1277:function(t,e,n){"use strict";var r=n(1125);n.n(r).a},1278:function(t,e,n){"use strict";var r=n(1126);n.n(r).a},1279:function(t,e,n){"use strict";var r=n(1127);n.n(r).a},1280:function(t,e,n){"use strict";var r=n(1128);n.n(r).a},1281:function(t,e,n){"use strict";var r=n(1129);n.n(r).a},1282:function(t,e,n){"use strict";var r=n(1130);n.n(r).a},1283:function(t,e,n){"use strict";var r=n(1131);n.n(r).a},1284:function(t,e,n){"use strict";var r=n(1132);n.n(r).a},1285:function(t,e,n){"use strict";var r=n(1133);n.n(r).a},1307:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAnNJREFUSA3tlTuIE2EQx7OJmwRXwUIFBV+gguhFo4E8hGijhdjYqnAoeAgenIWFyonNgY0WgmhE8MqrjxMLUVHQbNhERDByGA7sbMIpEhXz9DfLrWQfJruNzfnBMN/M/Oc/O/t9sxsK/V8B3oDixBqGkW+327P41zhjw2xFURbD4fDxdDqt92NX9Buy73Q6RwHPs73kjPmwb5N/BJytiNlJqVTa0e1285CLfQJRstnsMR+kNkixWHwKxXeccz1WNBp9kUqlFsxOKPCSQBP/T0Dr2Bu27GBGDp6d8GjNZvMaqVvDS/kbcJ7K5XK7sO8H43Sh7wgPfKPIRomaRTB6iOsSuNIDOPr5rE4WaHG7cBBcRK0MwPcHSm4MkTMJwbcF9Un2VpHH7C/WarUYwQ/INgkGXeRtQj5WKhUVPU7+M+Ewi8Tj8es4V9fr9dfoffg3l8vlPQLwu+SGgpWnH2m1Wq/gWatp2lXJN4skk8mvXLf92AbtjiFdgLcE4HdBOiV56LPot+QlE4nEF8n3PGye6gBgnekdZXpnhhUCfxr8Q8jzmUym5MRbZ2LzA3xDwhWmd1rX9XO2YJ8BsUKBMebsHu7LXgUE7tmJxQPBGYgK2M+RaVVVHzHBP6rV6qpGo3EQ8kn8MnyTzMYNK8+pBxYRMB/M3XQ0wfYkZBodttAq9i9kLhKJTPFK37H/6xpaxMqkqwnIL1BkHF1A3+T13LXig7TnmXglQNzD/w3iJ+jGku0Fdfl8F3FlBnD8kyJDz4QrfJ5Xs54zyKD3MjsFbpV8MuR3UMb/mX/Pg0GNDewEUnmIQyLsY+h5ChxGv0fkIyqxPLJM1m/AKgV8WA5+twAAAABJRU5ErkJggg=="},1308:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAhtJREFUSA3tlD9II0EUxrObTRBBCIiNxaGdV4gaEkyCIoJErrhCbEUQxEZBLLW54mrhChsLaxG82kpBhIT8IbHK5Q4LPU4LNQaCSP7txt+Mp6yrWQNJcXAOvJ2dN9/7vjdvHuNwvI9/rQKKOaFUKtVdqVS6arWaZvbX+3c6nbc+n+9EURS9Hkb4n0QSicSnarW6jkAv/ja7IBmoKAbk5+C3A4HAmp2QzDiZTH7gBF8J1l0u10ypVLp8SwScQ9f1VciX4vH4L/Bb5ph0Ou0h6UGPxxOVImTTCaBfVdVFv9//3Qy2+6e82WKxeGAYhhfcVjab7SgUCn2sp/CPwevN5XIjUgRFBYcb4LUdqXUPshq+IrHd0Wj0Sz6fH2c9xFrwnGOy7A1dMOC6A0IHJfsMwMucZL1MQxxiA+VyeVQENi1CiVWI97AV7umMbqsI4lgsNiBmMZoWgdxA55IOO3mgfPlVX7pa72mJCKex5Wm6XH/PPRyJRL653e5dLjsTCoVuzPVoiQgn0emsMAILkB/Tzke0d+ZR6Nkx2TAeNxqZIRV4FYEYLTtJA8yyPsWmEN5klkOK0Hp3AK/RmOCJcQHQGjBBPoz1YL95Kf7QYbvBYHAG5jCC88z77N3IB1IQ83bt4Agj9IP56iEH26+I/UgytyQ5jchPK1okCldViohNhNo5/hwZjLDZbg2wrkUwuAtN0zZeE7Di39f/YQXuAbxWDOVugbdJAAAAAElFTkSuQmCC"},1309:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAipJREFUSA3tlcFrE0EUxpONNaGQpYdAEXopNHoIBjaGJEKhLRREPVkR9NKTkn+gDQiKF9H2UMhJClXosXgQSqEXqfSWbAiktOSiIAhepAjCYkOaZtPfW51QQjZtQgoFHRi+mbdvvu+9N29Yj+f/uGgV8KqAcrncNOvFRqMRBS8pew945PV6d30+XyaRSGzJeUckn8+HbdveZf9D07T3CB30QK6OBFjch2MErmgqlfriRIzAXT4EMI5j/K68e8VSqbRQqVT2//JmNSEivSHBfggIj2EYvwBL8Toi8uE8R9ci1FpjdtUYp4rQdY8LhUJEZWqa5ksa5Y3s+ZYpFotX1Dc37CgCyQsOZpkDQlAuly+TxRNq/Un2jPFarbZ9mpCrCNE+h2Sefr9Dv+8Io2VZM4LBYPCDYCgUegB8FSH8h8XWbriKEPEjpklb59RB9mnmaiQSORRbOByuktUytqtsbyi/VnS9QL/ff7tarW4T5RrleFiv10fp+wkySysS7ucW9jUCmaP9N5W9FV0zicVi3xCa5ICB0D3Ipoj4YzKZ/KxIEF1B4BkCS8rWDl0zEWcRIotr8Xi8hoAE9O4kia7rY6p0J+2t644i4iwCgtTeBmQ2x1kExNm1XE2mPiyUyE/hog31PnB6KLG8q0Gmw6vKtYHhFXVf5wG+5TJ/9yoGR4BGmeW8lFl4//xPZEE73qRbXrO8jqPzwsXe7eDuhHyPQJ/Sic031i3PP+x/DBPn3QC5lw/kAAAAAElFTkSuQmCC"},1356:function(t,e,n){t.exports=n.p+"img/01a1ffb.svg"},1357:function(t,e,n){t.exports=n.p+"img/68f1163.svg"},1358:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgdmlld0JveD0iMCAwIDIwIDIwIj4KICAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPHBhdGggZmlsbD0iI0ZGRiIgc3Ryb2tlPSIjQzZDNkM2IiBzdHJva2Utd2lkdGg9IjEuMyIgZD0iTTEwIDE3LjgzOWw4LjA2NC0xLjQ5M2EuMzUuMzUgMCAwIDAgLjI4Ni0uMzQ0di0xMy4zYS4zNS4zNSAwIDAgMC0uNDE0LS4zNDRsLTcuOCAxLjQ0NGMtLjEzNi4wMTctLjEzNi4wMTctLjI3MyAwbC03LjgtMS40NDRhLjM1LjM1IDAgMCAwLS40MTMuMzQ0djEzLjNjMCAuMTY4LjEyLjMxMy4yODYuMzQ0TDEwIDE3LjgzOXoiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjQzZDNkM2IiBkPSJNOS41IDEzLjVoMXYxaC0xdi0xem0xLjcxNy00LjY5NGMwLS43MDItLjQyOC0xLjE5Mi0xLjI3NS0xLjE5Mi0uNjEyIDAtMS4xNTkuMjkxLTEuNjc4Ljg2NUw3LjUgNy43NjRDOC4xNzEgNy4wMTcgOC45OTQgNi41IDEwLjA5NCA2LjVjMS40MzUgMCAyLjQwNi44MDggMi40MDYgMi4xOTggMCAxLjc3OC0yLjI5IDIuMDgxLTIuMDUgMy44MDJIOS4yN2MtLjMxMS0xLjkyOCAxLjk0Ny0yLjQxNyAxLjk0Ny0zLjY5NHoiLz4KICAgIDwvZz4KPC9zdmc+Cg=="},1359:function(t,e,n){t.exports=n.p+"img/cc491c4.svg"},1360:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgdmlld0JveD0iMCAwIDIwIDIwIj4KICAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgc3Ryb2tlPSIjQzZDNkM2Ij4KICAgICAgICA8cGF0aCBmaWxsPSIjQzZDNkM2IiBzdHJva2Utd2lkdGg9Ii43IiBkPSJNMTMuOTIyIDQuMjN2Ni4xNDhhLjU1LjU1IDAgMCAxLS41NS41NUg4LjcwNHY1LjQ3OGEuNTUuNTUgMCAwIDEtLjU1LjU1SDMuNWEuMTUuMTUgMCAwIDAtLjE1LjE1di40MzRjMCAuMDgzLjA2Ny4xNS4xNS4xNWg1LjgwMnYtNS40NzhhLjU1LjU1IDAgMCAxIC41NS0uNTVoNC42NjdWNS41MTRhLjU1LjU1IDAgMCAxIC41NS0uNTVIMTkuNWEuMTUuMTUgMCAwIDAgLjE1LS4xNVY0LjM4YS4xNS4xNSAwIDAgMC0uMTUtLjE1aC01LjU3OHoiLz4KICAgICAgICA8cGF0aCBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjEuMiIgZD0iTTYuMzUgNS4xM0w0Ljc0OCA0LjA0NGMtLjE2Ni0uMTQ4LS4xNjYtLjE0OC0uMjQxLS4zMjZhLjYxMy42MTMgMCAwIDEgLjMzMy0uNzQ1bC4xMDktLjAzNiA0LjYzNS0xLjA5MmEuNzIuNzIgMCAwIDEgLjkyNi42MjRsLjU1MyA0LjYwMWMuMDAyLjE1Ny4wMDIuMTU3LS4wNS4zMTFhLjYxLjYxIDAgMCAxLS44ODguMjY4bC0xLjM5Mi0uODljLS41MDkuODgtMS41OTUgMi4yMjgtMi42MzIgMy4wNi0xLjM5IDEuMTE3LTIuODk4IDEuODc1LTQuNTIyIDIuMjdsLS4zOS0xLjEyOWMxLjc5OS0uODE2IDMuMDUzLTEuNzI0IDMuNzctMi43MDdBOC4xMDYgOC4xMDYgMCAwIDAgNi4zNSA1LjEyOXoiLz4KICAgIDwvZz4KPC9zdmc+Cg=="},1361:function(t,e,n){"use strict";var r=n(1153);n.n(r).a},1362:function(t,e,n){"use strict";var r=n(1154);n.n(r).a},1363:function(t,e,n){"use strict";var r=n(1155);n.n(r).a},1364:function(t,e,n){"use strict";var r=n(1156);n.n(r).a},1365:function(t,e,n){"use strict";var r=n(1157);n.n(r).a},1366:function(t,e,n){"use strict";var r=n(1158);n.n(r).a},1367:function(t,e,n){"use strict";var r=n(1159);n.n(r).a},1368:function(t,e,n){"use strict";var r=n(1160);n.n(r).a},1369:function(t,e,n){"use strict";var r=n(1161);n.n(r).a},1370:function(t,e,n){"use strict";var r=n(1162);n.n(r).a},1371:function(t,e,n){"use strict";var r=n(1163);n.n(r).a},1372:function(t,e,n){"use strict";var r=n(1164);n.n(r).a},1373:function(t,e,n){"use strict";var r=n(1165);n.n(r).a},1374:function(t,e,n){"use strict";var r=n(1166);n.n(r).a},1375:function(t,e,n){"use strict";var r=n(1167);n.n(r).a},1376:function(t,e,n){"use strict";var r=n(1168);n.n(r).a},1377:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNyIgaGVpZ2h0PSIyNyIgdmlld0JveD0iMCAwIDI3IDI3Ij4KICAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPHBhdGggZmlsbD0iIzA4QkY5MSIgZD0iTTAgMGgyNGEzIDMgMCAwIDEgMyAzdjI0TDAgMHoiIG9wYWNpdHk9Ii44MDEiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjRkZGIiBkPSJNMTcuNzY2IDkuNzUybDQuMzg3LTQuMzg4YS45OTYuOTk2IDAgMCAxIDEuNDEzLjAwMi45OTkuOTk5IDAgMCAxIC4wMDIgMS40MTNsLTQuOTU0IDQuOTUzYTEuMDA2IDEuMDA2IDAgMCAxLS4xNjguMTM1Ljk5NC45OTQgMCAwIDEtMS40MDUtLjAxMmwtMy41MzItMy41MzJhLjk5OS45OTkgMCAwIDEtLjAwMi0xLjQxNi45OTQuOTk0IDAgMCAxIDEuNDE2LjAwMmwyLjg0MyAyLjg0M3oiLz4KICAgIDwvZz4KPC9zdmc+Cg=="},1378:function(t,e,n){"use strict";var r=n(1169);n.n(r).a},1379:function(t,e,n){"use strict";var r=n(1170);n.n(r).a},1380:function(t,e,n){"use strict";var r=n(1171);n.n(r).a},1381:function(t,e,n){"use strict";var r=n(1172);n.n(r).a},1382:function(t,e,n){"use strict";var r=n(1173);n.n(r).a},1383:function(t,e,n){"use strict";var r=n(1174);n.n(r).a},1384:function(t,e,n){"use strict";var r=n(1175);n.n(r).a},1385:function(t,e,n){"use strict";var r=n(1176);n.n(r).a},1386:function(t,e,n){"use strict";var r=n(1177);n.n(r).a},1387:function(t,e,n){"use strict";var r=n(1178);n.n(r).a},1388:function(t,e,n){"use strict";var r=n(1179);n.n(r).a},1389:function(t,e,n){"use strict";var r=n(1180);n.n(r).a},1390:function(t,e,n){"use strict";var r=n(1181);n.n(r).a},1391:function(t,e,n){"use strict";var r=n(1182);n.n(r).a},1392:function(t,e,n){"use strict";var r=n(1183);n.n(r).a},1393:function(t,e,n){"use strict";var r=n(1184);n.n(r).a},1394:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAr5JREFUSA3tVEtoE1EUvXemMWmSioIVFLQKVRAVP3UhLUmmC12IG7cqlAp+qHHiwoVKxU3BjS7SRJsi2KVrqbgQNQ1WKlURQUpRCi787GorTdJ85l3vGxlNJkOms3EhDoT37rvnnnM/Lw/g/+ehA2jHBnLpKJLxgAjW2H1uNiLMA6hHi1p8qhbbUmvIvSLoMCHOooqX7D5X2xBJQnGIcXUiZiWrc5ltVahEQQgUCMcAEJc1/YgrqQ0QyCafIGIeicZBUcjXQhOLPfqcWUmFSjkgLHMFRSRoJ4RpW7wHk7oF4nYWCpXLcI0Dtygymvu/AVQ8wdnv4L6OemBsgBIqacmjAvVxshslwBTh7hAYSsMlaGDwcoB/+H6JAMwpYHRKDlafZ8mgFz4Ly13woxB5k4egg9k+yb0pwiU8EgAXOz8O+5FwBpC2Sqfnj3ATKsqHrtejPgEUB4SnksMU8VPbdUJq+/KZXggQe3lGm8PZkV1eROQNJaAOjt89s1Sa5CrW+RXf1d8iC739C63hwH6ejbxVZzgDUcXKLS8iFSoPyTggOMVJvvWtCu1bjAx8lxyOww4+T3YJA6fY2VfU9PtuYoFs6iS3+B7PMlrs1V/a8dbg684LkcQbHuIVzmgsODF8us5ZYxARBnNJrpxGEOiyk4CEO1Zi8YQmUv0GiAzDnvEtH1sbCjz8euBsoT17O1xQRY8QYpAAuhk/uKwlblhx9rWpiASHJ9M7q1WR4H/scTZDPLcK730sXOJqxxUVhvIR/Z2duNZ2FbHArblUgkicVxHjBkFGAbxZ0C7csfzNVseZOAbIARD8yMf0x5zZkvkYOQIbD1cu0hi74pO/IuI6k2A2dU4gree0DzJ4DwFm+LrGuV3TvH/FWX4raPrdZmU1rcQcA4oYE8ifn6/rLJNrvL5nAfmIxvgpiTYT+Ld8PwGXY/+c9NryfgAAAABJRU5ErkJggg=="},1395:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAlpJREFUSA3tVE1oE1EQnnm7m9hgoGA9GErRg6IHqUahYCNJQKoeFIrgSURBFFuheNSLgjdBKG4P5lA8ivgD4qE3N40BEVLwFH/oQdEWraWU/Jl0971xdkNLmti1EAXBzmH3vXkz8818b94AbMi/xgA2JhTKmhEk2kpAeqN+rbWGRulYf9f0Izwt17Jx9SsgwbR5HEHdAYIdrN/k5+SdCVRIMKOAHpyMb7vuB+Rl3JFN9YBdvUWIEgPGGbLtud+CEHA+cA0BrzzPfPvA9uONPp3W/c4qLO7r7tZeeSAoa1sUwl5BYrjSf/lJo7HfenPm7jtbwQtGi7ogXdnxcMUp7maCBmtQiANo0dmvFKtzj4KZkgEHaN4vaPMZyiAJUasCUSRkmTdKspwEEPu5Ro6DM6z3aF/XBTcHX7X3aKMTJCDKd5QTQhvRSU3+QK1XSPuwa9s2iOLUBcCEobSrO8P6p6mDl2w3cMAye92/K22DuEQT4VwhOTw9VY/Z8uUk/r78KRDfOG3TVeeB+oKWOSoM8dgQwXzh0IWFRn7aB+Hu4nciUagBctTFJZRvOjLmSyFVfnnWrCoTBXCzrF8wqCmF7CXgNYJ+FAnPMuBHUmpQIqaWI3mVaJIq3Ofz3OdHDuRSE+HiLjc/X0kkEur25FgfN9d2AfisHB/6goifbxI9HU3f67E1JyYlnTOUWPAGJAc28qWlhwRqgF/qWy7vuy9C/ZAHNuwhwJJhaKeKsaH3zT4Jy9LTyaSzMoUjuVRosVw9TyRiTHKo2aFlj+BwQrO6po39CqDFfkPx/zHwE9BX2zKysOQKAAAAAElFTkSuQmCC"},1396:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAmtJREFUSA3tlU9oE0EUxt+bdMM2kRIEq1IPWqweQgtSL2JrsiCIelJR9CIIShRDTloQFHsQ/ANCbYK2VNFj6cGjF9HdFMEIFaShPVQpCl6sCKE13SRr5jmzcUKp3dbECoIOLN/um3nfb+ftzCzA//a3VQDVCwXN/r0c4SYBdQBBg4rXrAjfEHCcMdaT3xN/JvNdSFN6oK1EpXEk+CQiI0g0X7P5jwQC1AnhiHjc5Ed/x2zk7Fv3jR1eOghAumB22dHEx3oBKi9kPrxRwNnPFV/oY7IDgUJSbeP3AdInZ5zKiZLNKV8XIjv+ZKsZ0kvEoqZZ08JYERIw75xe8yIVVjO9lU5dy2D2rnxutJI9gdHBjarPS5eF6OnkVQ7QRw5q0iA8MeIn4GeQ2POKIXVxXrRWAnlCdCt5BTi/CMx3IG+cfyNNp2dmDkttbW5+LLWlBY4KmZagYGZovYwt1TwhAPwEIL4KB7WXKpGQxwDZo4nwsZKMvWtLFBmjASDaRsVipxq3WL0/oObbD07ZmvxaHO4cGzw+ZTtbnDKPNDCMKZPgaHJfmdMwMrgwH4k/UfHF6jmTwu74B9B8UQLYMZkvHCpzbojkp3Pd8SllwjkNIcJlO5K4rWJLqfdMxGgJErPY/npnzJFL17KsB9YCl9Z1G7aq0i0I/3S7LESOlgCpvYhioYG8qu1XAHKwZ7mqTqtw40LEqflFeq3N9DetgieIEmtEEFC+7lEfMu9tLqCTFYAxcVreZxzz9cIqRz0/KfK7ddLac8a599WfVqOV2gXErwNSu1hR7g6vByQMHSDMiv10yY7Gq3usHq9/NOc77YPc8hnQeRYAAAAASUVORK5CYII="},1397:function(t,e,n){"use strict";var r=n(1186);n.n(r).a},1398:function(t,e,n){"use strict";var r=n(1187);n.n(r).a},1399:function(t,e,n){"use strict";var r=n(1188);n.n(r).a},1400:function(t,e,n){"use strict";var r=n(1189);n.n(r).a},1401:function(t,e,n){"use strict";var r=n(1190);n.n(r).a},1402:function(t,e,n){t.exports=n.p+"img/1a90b2c.jpg"},1403:function(t,e,n){"use strict";var r=n(1191);n.n(r).a},1404:function(t,e,n){"use strict";var r=n(559),o=n(1405),c=n(1086).Buffer,l=new Array(16);function d(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function h(t,e){return t<<e|t>>>32-e}function f(a,b,t,e,n,r,s){return h(a+(b&t|~b&e)+n+r|0,s)+b|0}function v(a,b,t,e,n,r,s){return h(a+(b&e|t&~e)+n+r|0,s)+b|0}function m(a,b,t,e,n,r,s){return h(a+(b^t^e)+n+r|0,s)+b|0}function y(a,b,t,e,n,r,s){return h(a+(t^(b|~e))+n+r|0,s)+b|0}r(d,o),d.prototype._update=function(){for(var t=l,i=0;i<16;++i)t[i]=this._block.readInt32LE(4*i);var a=this._a,b=this._b,e=this._c,n=this._d;a=f(a,b,e,n,t[0],3614090360,7),n=f(n,a,b,e,t[1],3905402710,12),e=f(e,n,a,b,t[2],606105819,17),b=f(b,e,n,a,t[3],3250441966,22),a=f(a,b,e,n,t[4],4118548399,7),n=f(n,a,b,e,t[5],1200080426,12),e=f(e,n,a,b,t[6],2821735955,17),b=f(b,e,n,a,t[7],4249261313,22),a=f(a,b,e,n,t[8],1770035416,7),n=f(n,a,b,e,t[9],2336552879,12),e=f(e,n,a,b,t[10],4294925233,17),b=f(b,e,n,a,t[11],2304563134,22),a=f(a,b,e,n,t[12],1804603682,7),n=f(n,a,b,e,t[13],4254626195,12),e=f(e,n,a,b,t[14],2792965006,17),a=v(a,b=f(b,e,n,a,t[15],1236535329,22),e,n,t[1],4129170786,5),n=v(n,a,b,e,t[6],3225465664,9),e=v(e,n,a,b,t[11],643717713,14),b=v(b,e,n,a,t[0],3921069994,20),a=v(a,b,e,n,t[5],3593408605,5),n=v(n,a,b,e,t[10],38016083,9),e=v(e,n,a,b,t[15],3634488961,14),b=v(b,e,n,a,t[4],3889429448,20),a=v(a,b,e,n,t[9],568446438,5),n=v(n,a,b,e,t[14],3275163606,9),e=v(e,n,a,b,t[3],4107603335,14),b=v(b,e,n,a,t[8],1163531501,20),a=v(a,b,e,n,t[13],2850285829,5),n=v(n,a,b,e,t[2],4243563512,9),e=v(e,n,a,b,t[7],1735328473,14),a=m(a,b=v(b,e,n,a,t[12],2368359562,20),e,n,t[5],4294588738,4),n=m(n,a,b,e,t[8],2272392833,11),e=m(e,n,a,b,t[11],1839030562,16),b=m(b,e,n,a,t[14],4259657740,23),a=m(a,b,e,n,t[1],2763975236,4),n=m(n,a,b,e,t[4],1272893353,11),e=m(e,n,a,b,t[7],4139469664,16),b=m(b,e,n,a,t[10],3200236656,23),a=m(a,b,e,n,t[13],681279174,4),n=m(n,a,b,e,t[0],3936430074,11),e=m(e,n,a,b,t[3],3572445317,16),b=m(b,e,n,a,t[6],76029189,23),a=m(a,b,e,n,t[9],3654602809,4),n=m(n,a,b,e,t[12],3873151461,11),e=m(e,n,a,b,t[15],530742520,16),a=y(a,b=m(b,e,n,a,t[2],3299628645,23),e,n,t[0],4096336452,6),n=y(n,a,b,e,t[7],1126891415,10),e=y(e,n,a,b,t[14],2878612391,15),b=y(b,e,n,a,t[5],4237533241,21),a=y(a,b,e,n,t[12],1700485571,6),n=y(n,a,b,e,t[3],2399980690,10),e=y(e,n,a,b,t[10],4293915773,15),b=y(b,e,n,a,t[1],2240044497,21),a=y(a,b,e,n,t[8],1873313359,6),n=y(n,a,b,e,t[15],4264355552,10),e=y(e,n,a,b,t[6],2734768916,15),b=y(b,e,n,a,t[13],1309151649,21),a=y(a,b,e,n,t[4],4149444226,6),n=y(n,a,b,e,t[11],3174756917,10),e=y(e,n,a,b,t[2],718787259,15),b=y(b,e,n,a,t[9],3951481745,21),this._a=this._a+a|0,this._b=this._b+b|0,this._c=this._c+e|0,this._d=this._d+n|0},d.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=c.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t},t.exports=d},1405:function(t,e,n){"use strict";var r=n(1086).Buffer,o=n(1406).Transform;function c(t){o.call(this),this._block=r.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}n(559)(c,o),c.prototype._transform=function(t,e,n){var r=null;try{this.update(t,e)}catch(t){r=t}n(r)},c.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(t){e=t}t(e)},c.prototype.update=function(data,t){if(function(t,e){if(!r.isBuffer(t)&&"string"!=typeof t)throw new TypeError(e+" must be a string or a buffer")}(data,"Data"),this._finalized)throw new Error("Digest already called");r.isBuffer(data)||(data=r.from(data,t));for(var e=this._block,n=0;this._blockOffset+data.length-n>=this._blockSize;){for(var i=this._blockOffset;i<this._blockSize;)e[i++]=data[n++];this._update(),this._blockOffset=0}for(;n<data.length;)e[this._blockOffset++]=data[n++];for(var o=0,c=8*data.length;c>0;++o)this._length[o]+=c,(c=this._length[o]/4294967296|0)>0&&(this._length[o]-=4294967296*c);return this},c.prototype._update=function(){throw new Error("_update is not implemented")},c.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();void 0!==t&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var i=0;i<4;++i)this._length[i]=0;return e},c.prototype._digest=function(){throw new Error("_digest is not implemented")},t.exports=c},1406:function(t,e,n){t.exports=o;var r=n(1098).EventEmitter;function o(){r.call(this)}n(559)(o,r),o.Readable=n(1192),o.Writable=n(1412),o.Duplex=n(1413),o.Transform=n(1414),o.PassThrough=n(1415),o.Stream=o,o.prototype.pipe=function(t,e){var source=this;function n(e){t.writable&&!1===t.write(e)&&source.pause&&source.pause()}function o(){source.readable&&source.resume&&source.resume()}source.on("data",n),t.on("drain",o),t._isStdio||e&&!1===e.end||(source.on("end",l),source.on("close",d));var c=!1;function l(){c||(c=!0,t.end())}function d(){c||(c=!0,"function"==typeof t.destroy&&t.destroy())}function h(t){if(f(),0===r.listenerCount(this,"error"))throw t}function f(){source.removeListener("data",n),t.removeListener("drain",o),source.removeListener("end",l),source.removeListener("close",d),source.removeListener("error",h),t.removeListener("error",h),source.removeListener("end",f),source.removeListener("close",f),t.removeListener("close",f)}return source.on("error",h),t.on("error",h),source.on("end",f),source.on("close",f),t.on("close",f),t.emit("pipe",source),t}},1407:function(t,e){},1408:function(t,e,n){"use strict";var r=n(1086).Buffer,o=n(1409);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(s){if(0===this.length)return"";for(var p=this.head,t=""+p.data;p=p.next;)t+=s+p.data;return t},t.prototype.concat=function(t){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var e,n,o,c=r.allocUnsafe(t>>>0),p=this.head,i=0;p;)e=p.data,n=c,o=i,e.copy(n,o),i+=p.data.length,p=p.next;return c},t}(),o&&o.inspect&&o.inspect.custom&&(t.exports.prototype[o.inspect.custom]=function(){var t=o.inspect({length:this.length});return this.constructor.name+" "+t})},1409:function(t,e){},1410:function(t,e,n){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(t){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(t,e){if(n("noDeprecation"))return t;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}}}).call(this,n(42))},1411:function(t,e,n){"use strict";t.exports=c;var r=n(1262),o=n(1123);function c(t){if(!(this instanceof c))return new c(t);r.call(this,t)}o.inherits=n(559),o.inherits(c,r),c.prototype._transform=function(t,e,n){n(null,t)}},1412:function(t,e,n){t.exports=n(1193)},1413:function(t,e,n){t.exports=n(1083)},1414:function(t,e,n){t.exports=n(1192).Transform},1415:function(t,e,n){t.exports=n(1192).PassThrough},1416:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgdmlld0JveD0iMCAwIDIwIDIwIj4KICAgIDxwYXRoIGZpbGw9IiM5OTkiIGZpbGwtcnVsZT0ibm9uemVybyIgZD0iTTYuNTA4IDEzLjQ1OGw1LjQ5OC02LjA4Ni0yLjgxLTMuMTMtNS42NiA2LjE3My0uMDYuMzc1IDIuODkgMi42OS4xNDItLjAyMnptNi40NjgtNy4xNjZsMS45NjEtMi4xNi4xMjEtLjg2TDEyLjk1NiAxbC0uODI5LjA0NC0yLjA2MiAyLjI1IDIuOTExIDIuOTk4em0tMTAuMzUgOC43MWwyLjQ0Ny0xLjE0N0wzLjA3IDEyLjA3bC0uODI4IDIuMTYxLS4yNDMuOTkyLjYyNy0uMjJ6bS4xNjIgMS41NDNjLS40MjQgMC0uNzg4LjM3NS0uNzg4Ljg2cy4zNDQuODYuNzg4Ljg2SDE3LjA0Yy40NDUgMCAuNzg5LS4zOTcuNzg5LS44NiAwLS40ODUtLjM0NC0uODYtLjc4OS0uODZIMi43OXptMTQuMjMxLTIuMTZjLjQ0NSAwIC43ODgtLjM5OC43ODgtLjg2IDAtLjQ4Ni0uMzYzLS44Ni0uNzg4LS44Nkg5LjExNWMtLjQ0NCAwLS43ODguMzk2LS43ODguODYgMCAuNDg0LjM2NC44Ni43ODguODZoNy45MDR6Ii8+Cjwvc3ZnPgo="},1417:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgdmlld0JveD0iMCAwIDIwIDIwIj4KICAgIDxwYXRoIGZpbGw9IiMwOEJGOTEiIGZpbGwtcnVsZT0ibm9uemVybyIgZD0iTTYuNTA4IDEzLjQ1OGw1LjQ5OC02LjA4Ni0yLjgxLTMuMTMtNS42NiA2LjE3My0uMDYuMzc1IDIuODkgMi42OS4xNDItLjAyMnptNi40NjgtNy4xNjZsMS45NjEtMi4xNi4xMjEtLjg2TDEyLjk1NiAxbC0uODI5LjA0NC0yLjA2MiAyLjI1IDIuOTExIDIuOTk4em0tMTAuMzUgOC43MWwyLjQ0Ny0xLjE0N0wzLjA3IDEyLjA3bC0uODI4IDIuMTYxLS4yNDMuOTkyLjYyNy0uMjJ6bS4xNjIgMS41NDNjLS40MjQgMC0uNzg4LjM3NS0uNzg4Ljg2cy4zNDQuODYuNzg4Ljg2SDE3LjA0Yy40NDUgMCAuNzg5LS4zOTcuNzg5LS44NiAwLS40ODUtLjM0NC0uODYtLjc4OS0uODZIMi43OXptMTQuMjMxLTIuMTZjLjQ0NSAwIC43ODgtLjM5OC43ODgtLjg2IDAtLjQ4Ni0uMzYzLS44Ni0uNzg4LS44Nkg5LjExNWMtLjQ0NCAwLS43ODguMzk2LS43ODguODYgMCAuNDg0LjM2NC44Ni43ODguODZoNy45MDR6Ii8+Cjwvc3ZnPgo="},1418:function(t,e,n){t.exports=n.p+"img/f5fd849.svg"},1419:function(t,e,n){t.exports=n.p+"img/faf9bb8.svg"},1420:function(t,e,n){"use strict";var r=n(1194);n.n(r).a},1421:function(t,e,n){"use strict";var r=n(1195);n.n(r).a},1422:function(t,e,n){var map={"./celebrate.png":1255,"./cloudlab-screenshot.png":1423,"./doc-recovery-icon.png":1424,"./home-icon.png":1254,"./labs/course-certificate-inactive.png":1256,"./labs/course-certificate.png":1185,"./labs/icon-check-active.png":1231,"./labs/icon-check.png":1257,"./labs/icon-status-locked.png":1425,"./notebook-screenshot-cloud.png":1426,"./notebook-screenshot.png":566,"./ssh-screenshot-cloud.png":1427,"./ssh-screenshot.png":565,"./vnc-screenshot-cloud.png":1428,"./vnc-screenshot.png":568,"./webide-screenshot-cloud.png":1429,"./webide-screenshot.png":567};function r(t){var e=o(t);return n(e)}function o(t){if(!n.o(map,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return map[t]}r.keys=function(){return Object.keys(map)},r.resolve=o,t.exports=r,r.id=1422},1423:function(t,e,n){t.exports=n.p+"img/d5c1533.png"},1424:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAllJREFUOBG1VUmLWkEQrvdcQAVBRIMjOYwiblfBQ/DkRdDDJDfRvzEhPyGJf0PxZjwqwYMIcxDx4hIMeBsVwQVEVIxLqnped55LwkxCCh5d9VVXdW3dT4Ir1Gg0dL1e7w5V9IXwu1G2DXFt4Ff0er3FUCj0Q8HFIglOYfL5/NvD4ZA5Ho/uc51aliSpL8vyfTKZ/HKCcwEdyLlc7iPK9xx75ppJpVIf8IAD7ddwI4/H8wn5lzoj8zetVstYKBS+ksBSpjT3+32BAZIEkUgEjEYjYNQECdJqtaDX66Fer8NgMBA4MRqN5h2lLykN+MZrZrVaIRAIQK1WOzEgwW63g9vtBpPJBN1uF4ZD6tETUU2xUX6ZusmdkQpPgu12q2w7XXa7HRgMBqhWqxAMBsHhcIgN5IN8yYjQaDyLZrMZbDYbSCQSLMpwOHxud6dFhObsKlEdqZ6YDtP3+314eHhgPGHRaPTcLkQO+dCeK2G1WkG5XBa43++HeDzOyrJYLGAymQidwtyQw98Sj3A8HrModTodlEolwIkAm80GlDLWDdbrtfBBNfzVKgE/MTzCdrsNTqeTdTYWi0H09hbCOA2dTgd8Pp/aakgO6W7+kcxmM8znc1gulyBjY15hZM3HR5hOp0A6FTXIYVEFsHRoeNVE9bJYLGBH3IRj8x0jfo1jQzNLOhUVLwabunftptD8jUYjwItwUsNKpcJqyAf74uqpTrtgqcsul0t0udlsigjF1eNW2Wz2M/J/8ziQi0w6nX5PDNWQET1ByGQU8SULe764wf97YPkJtP7LL+AnugwGU6rsYw4AAAAASUVORK5CYII="},1425:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAAAXNSR0IArs4c6QAAAi5JREFUOBGtVT1LK0EUdT9kI8Fg8UBiF7EyYmAN+cBCKxEUERtBSyvRxspS/B+2FlpYvPcQtFLEhJC4aVSECLEQIyqksNhkNx+eK0mY3Vl3ozhwmTv3nnPmzuzMrNDj0gqFglIul8drtZoqCEID0KtAIHAdDoeNr2jCV4lMJjPfaDT2ms3mIIuB8CNsLZFInLLxti+2HbZPp9Nb9Xr9H2IPkiTN+v3+QVmWg6IoziH2golOUqnUJstp+1yF2Wx2GEu8RmX/k8nkCqqptcHU53K5XsMwDhGfwQRj8Xi8yOa5Ck3T3AbAQFWbdjEiRqNRE9WuwzUxKWEtjRNEVoWdRyKRFwuSGcRisWeIXWDphLU0ThBVhYG4s6AcBsDdwsbsKU4QM/cBpNuBDmO9hbWkOEFL9geDz69cLBZ9pVJpCfwR2C6Wco7+DObWplHhFAA7sPtgMHgUCoUqQj6fH6hUKpdIjrqxvXK0pz6fb1LWdZ0+PYmt4twdIFH3IrN5FCLhIiyj3yctASf+BCJ/IDbBAr/rQ/QKom8ixBSQ378r4IB/Jy3ZIWEJaZo2VK1W/1JQUZQFVVWfLADbwPPY4N4uYikTZOTb+NzQs0IIHYP1SsyWz4mwAc8K8bEesDd0zW7JZ8lOvqegE8kt5rnkFvnGTYTNdSWIpW6wJDdfxEZXAeh3A3WZ6yct2kMNjoobs4Je6pLcgRGnxaXHVvv1x4F7vnA8uB9XpxwHBxU2Ee48Xx+MGu5G6aWhbQAAAABJRU5ErkJggg=="},1426:function(t,e,n){t.exports=n.p+"img/f787d31.png"},1427:function(t,e,n){t.exports=n.p+"img/58636cc.png"},1428:function(t,e,n){t.exports=n.p+"img/3ed876f.png"},1429:function(t,e,n){t.exports=n.p+"img/2fa3bed.png"},1430:function(t,e,n){"use strict";var r=n(1196);n.n(r).a},1431:function(t,e,n){"use strict";var r=n(1197);n.n(r).a},1432:function(t,e,n){"use strict";var r=n(1198);n.n(r).a},1433:function(t,e,n){"use strict";var r=n(1199);n.n(r).a},1434:function(t,e,n){"use strict";var r=n(1200);n.n(r).a},1435:function(t,e,n){"use strict";var r=n(1201);n.n(r).a},1436:function(t,e,n){"use strict";var r=n(1202);n.n(r).a},1437:function(t,e,n){t.exports=n.p+"img/4392789.gif"},1438:function(t,e,n){"use strict";var r=n(1203);n.n(r).a},1439:function(t,e,n){"use strict";var r=n(1204);n.n(r).a},1440:function(t,e,n){"use strict";var r=n(1205);n.n(r).a},1441:function(t,e,n){"use strict";var r=n(1206);n.n(r).a},1442:function(t,e,n){"use strict";var r=n(1207);n.n(r).a},1443:function(t,e,n){"use strict";var r=n(1208);n.n(r).a},1444:function(t,e,n){"use strict";var r=n(1209);n.n(r).a},1445:function(t,e,n){"use strict";var r=n(1210);n.n(r).a},1446:function(t,e,n){"use strict";var r=n(1211);n.n(r).a},1447:function(t,e,n){"use strict";var r=n(1212);n.n(r).a},1448:function(t,e,n){"use strict";var r=n(1213);n.n(r).a},1449:function(t,e,n){"use strict";var r=n(1214);n.n(r).a},1450:function(t,e,n){"use strict";var r=n(1215);n.n(r).a},1451:function(t,e,n){"use strict";var r=n(1216);n.n(r).a},1452:function(t,e,n){"use strict";var r=n(1217);n.n(r).a},1453:function(t,e,n){"use strict";var r=n(1218);n.n(r).a},1454:function(t,e,n){"use strict";var r=n(1219);n.n(r).a},1455:function(t,e,n){"use strict";var r=n(1220);n.n(r).a},1456:function(t,e,n){"use strict";var r=n(1221);n.n(r).a},1457:function(t,e,n){"use strict";var r=n(1222);n.n(r).a},1458:function(t,e,n){"use strict";var r=n(1223);n.n(r).a},1459:function(t,e,n){"use strict";n(28),n(39),n(24),n(124),n(13);var r,o,c,l,d,h,f,v,m,y,_,w,k,C,x,M,S,j,O,A,L,I,E,T,D,N,R,U,P,B,$,F,Q,z,W,H,V,Y,Z,K,G,J,X,tt,et,nt,st,at,it,ot,ct,lt,ut,ht,pt,ft,bt,vt,mt,gt,yt,_t,wt,kt,Ct,xt,Mt,St,jt,Ot,At,Lt,It,Et,Tt,Dt,Nt,Rt,qt,Ut,Pt,Bt,$t,Ft,Qt,zt,Wt,Ht,Vt=n(2),Yt=(n(83),n(95),n(1)),Zt=n(10),Kt=n(2958),Gt=n(14),Jt=n(15),Xt=n(1069),te=(n(105),n(25)),ee=n(1074),ne=n(1071),re=(n(1075),r=Xt.b.bound,o=Xt.b.bound,c=Xt.b.bound,l=Xt.b.bound,d=Xt.b.bound,h=Xt.b.bound,f=Xt.b.bound,v=Xt.b.bound,m=Xt.b.bound,y=Xt.b.bound,_=Xt.b.bound,w=Xt.b.bound,T=function(){function t(e,n){Object(Gt.a)(this,t),Object(ee.a)(this,"isContest",C,this),Object(ee.a)(this,"course",x,this),Object(ee.a)(this,"lab",M,this),Object(ee.a)(this,"labStages",S,this),Object(ee.a)(this,"labs",j,this),Object(ee.a)(this,"courseUserStatus",O,this),Object(ee.a)(this,"labsUserStatus",A,this),Object(ee.a)(this,"leftBoxWidth",L,this),Object(ee.a)(this,"rightBoxWidth",I,this),Object(ee.a)(this,"leftBoxWidthPercent",E,this),this.$ajax=e,this.$urls=n}return Object(Jt.a)(t,[{key:"getCourse",value:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$ajax.get(this.$urls.course(e));case 2:return(n=t.sent).ok&&(this.course=n.data),t.abrupt("return",n);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getCourseLabs",value:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$ajax.get(this.$urls.courseLabs(e));case 2:return(n=t.sent).ok&&(r=[],n.data.map(function(t){r=[].concat(Object(te.a)(r),Object(te.a)(t.labs))}),this.labs=r,this.labStages=n.data),t.abrupt("return",n);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getCourseUserStatus",value:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(e){var n,r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$ajax.get(this.$urls.coursesUserStatus,{course_ids:e,v2:!0});case 2:return(n=t.sent).ok&&Object(Xt.f)(function(){r.courseUserStatus=n.data[0]}),t.abrupt("return",n);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getLabsUserStatus",value:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(e){var n,r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$ajax.get(this.$urls.userLabsStatus(e),{v2:!0});case 2:return(n=t.sent).ok&&Object(Xt.f)(function(){r.labsUserStatus=n.data}),t.abrupt("return",n);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getContest",value:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$ajax.get(this.$urls.contestDetail(e));case 2:return(n=t.sent).ok&&(this.isContest=!0,this.course=n.data),t.abrupt("return",n);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getChallenges",value:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$ajax.get(this.$urls.contestSlugList(e));case 2:return(n=t.sent).ok&&(this.labs=n.data.results,this.labStages=[{labs:n.data.results}]),t.abrupt("return",n);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getContestUserStatus",value:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$ajax.get(this.$urls.userContestStatus(e));case 2:return(n=t.sent).ok&&(this.courseUserStatus=n.data),t.abrupt("return",n);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getChallengesUserStatus",value:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){var e,n,r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.labs.map(function(t){return t.id}).join(",")){t.next=3;break}return t.abrupt("return",{ok:!1});case 3:return t.next=5,this.$ajax.get(this.$urls.challengesUserStatus(e));case 5:return(n=t.sent).ok&&(this.labsUserStatus=n.data.map(function(u,t){return u.lab_id=r.labs[t].id,u})),t.abrupt("return",n);case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"joinTrialCourse",value:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$ajax.post(this.$urls.courseJoinTrial(e));case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"setBoxWidth",value:function(t){this.leftBoxWidth=t,this.rightBoxWidth=window.innerWidth-t,this.leftBoxWidthPercent=t/window.innerWidth}},{key:"getLab",value:function(t){var e=this,n=this.labs.find(function(e){return e.id===+t});return n&&Object(Xt.f)(function(){e.lab=n}),n}},{key:"setLab",value:function(t){this.lab=t}},{key:"nextLabUrl",get:function(){try{var t=this.lab.next_lab_url,e=/(\d+)\/$/.exec(t)[1];return"/courses/".concat(this.course.id,"/learning/?id=").concat(e)}catch(t){return""}}},{key:"nextLab",get:function(){try{var t=this.lab.next_lab_url,e=/(\d+)\/$/.exec(t)[1],n=this.labs.find(function(t){return t.id===+e});return n||null}catch(t){return null}}},{key:"isNotebook",get:function(){try{return"notebook"===this.lab.console_type}catch(t){return!1}}},{key:"isWebIDE",get:function(){try{return"webide"===this.lab.console_type}catch(t){return!1}}},{key:"isCloudLab",get:function(){try{return this.lab.is_cloudlab}catch(t){return!1}}},{key:"labUserStatus",get:function(){try{for(var i=0;i<this.labsUserStatus.length;++i)if(this.lab.id===this.labsUserStatus[i].lab_id)return this.labsUserStatus[i];return null}catch(t){return null}}},{key:"isChallenge",get:function(){try{return/challenge/.test(this.lab.type)}catch(t){return!1}}}]),t}(),k=T,C=Object(ne.a)(k.prototype,"isContest",[Xt.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),x=Object(ne.a)(k.prototype,"course",[Xt.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=Object(ne.a)(k.prototype,"lab",[Xt.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(ne.a)(k.prototype,"nextLabUrl",[Xt.c],Object.getOwnPropertyDescriptor(k.prototype,"nextLabUrl"),k.prototype),Object(ne.a)(k.prototype,"nextLab",[Xt.c],Object.getOwnPropertyDescriptor(k.prototype,"nextLab"),k.prototype),Object(ne.a)(k.prototype,"isNotebook",[Xt.c],Object.getOwnPropertyDescriptor(k.prototype,"isNotebook"),k.prototype),Object(ne.a)(k.prototype,"isWebIDE",[Xt.c],Object.getOwnPropertyDescriptor(k.prototype,"isWebIDE"),k.prototype),Object(ne.a)(k.prototype,"isCloudLab",[Xt.c],Object.getOwnPropertyDescriptor(k.prototype,"isCloudLab"),k.prototype),S=Object(ne.a)(k.prototype,"labStages",[Xt.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),j=Object(ne.a)(k.prototype,"labs",[Xt.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=Object(ne.a)(k.prototype,"courseUserStatus",[Xt.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),A=Object(ne.a)(k.prototype,"labsUserStatus",[Xt.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(ne.a)(k.prototype,"labUserStatus",[Xt.c],Object.getOwnPropertyDescriptor(k.prototype,"labUserStatus"),k.prototype),Object(ne.a)(k.prototype,"getCourse",[r],Object.getOwnPropertyDescriptor(k.prototype,"getCourse"),k.prototype),Object(ne.a)(k.prototype,"getCourseLabs",[o],Object.getOwnPropertyDescriptor(k.prototype,"getCourseLabs"),k.prototype),Object(ne.a)(k.prototype,"getCourseUserStatus",[c],Object.getOwnPropertyDescriptor(k.prototype,"getCourseUserStatus"),k.prototype),Object(ne.a)(k.prototype,"getLabsUserStatus",[l],Object.getOwnPropertyDescriptor(k.prototype,"getLabsUserStatus"),k.prototype),Object(ne.a)(k.prototype,"getContest",[d],Object.getOwnPropertyDescriptor(k.prototype,"getContest"),k.prototype),Object(ne.a)(k.prototype,"getChallenges",[h],Object.getOwnPropertyDescriptor(k.prototype,"getChallenges"),k.prototype),Object(ne.a)(k.prototype,"getContestUserStatus",[f],Object.getOwnPropertyDescriptor(k.prototype,"getContestUserStatus"),k.prototype),Object(ne.a)(k.prototype,"getChallengesUserStatus",[v],Object.getOwnPropertyDescriptor(k.prototype,"getChallengesUserStatus"),k.prototype),Object(ne.a)(k.prototype,"joinTrialCourse",[m],Object.getOwnPropertyDescriptor(k.prototype,"joinTrialCourse"),k.prototype),L=Object(ne.a)(k.prototype,"leftBoxWidth",[Xt.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),I=Object(ne.a)(k.prototype,"rightBoxWidth",[Xt.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=Object(ne.a)(k.prototype,"leftBoxWidthPercent",[Xt.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.35}}),Object(ne.a)(k.prototype,"setBoxWidth",[y],Object.getOwnPropertyDescriptor(k.prototype,"setBoxWidth"),k.prototype),Object(ne.a)(k.prototype,"isChallenge",[Xt.c],Object.getOwnPropertyDescriptor(k.prototype,"isChallenge"),k.prototype),Object(ne.a)(k.prototype,"getLab",[_],Object.getOwnPropertyDescriptor(k.prototype,"getLab"),k.prototype),Object(ne.a)(k.prototype,"setLab",[w],Object.getOwnPropertyDescriptor(k.prototype,"setLab"),k.prototype),k),se=(D=Xt.b.bound,N=Xt.b.bound,R=Xt.b.bound,U=Xt.b.bound,P=Xt.b.bound,B=Xt.b.bound,$=Xt.b.bound,Y=function(){function t(e,n,r){Object(Gt.a)(this,t),Object(ee.a)(this,"task",Q,this),Object(ee.a)(this,"vm",z,this),Object(ee.a)(this,"_envType",W,this),Object(ee.a)(this,"readonlyShareToken",H,this),Object(ee.a)(this,"cooperationShareToken",V,this),this.$ajax=e,this.$urls=n,this.labId=+r}return Object(Jt.a)(t,[{key:"clearTask",value:function(){this.task=null,this.vm=null}},{key:"getTask",value:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$ajax.get(this.$urls.labTask);case 2:return(e=t.sent).ok&&e.data&&(this.task=e.data),t.abrupt("return",e);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getVm",value:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$ajax.get(this.$urls.vm(e));case 2:return(n=t.sent).ok&&(this.vm=n.data,this.vm.useAvocado=!0),t.abrupt("return",n);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"setLabType",value:function(t){this._envType=t}},{key:"decreaseLabTime",value:function(){this.task&&(this.task.ttl_seconds-=1,this.task.ttl_seconds<0&&(this.task.ttl_seconds=0))}},{key:"increaseLabTime",value:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$ajax.post(this.task.extend_url);case 2:if(!t.sent.ok){t.next=6;break}return t.next=6,this.getTask();case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getShareToken",value:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$ajax.post(this.$urls.shareDesktop(),{readonly_console:!0});case 2:if(!(e=t.sent).ok){t.next=7;break}this.readonlyShareToken=e.data.token,t.next=8;break;case 7:return t.abrupt("return",e);case 8:return t.next=10,this.$ajax.post(this.$urls.shareDesktop(),{readonly_console:!1});case 10:return(n=t.sent).ok&&(this.cooperationShareToken=n.data.token,localStorage.vmId=this.vm.id),t.abrupt("return",n);case 13:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"isCurrentLabRunning",get:function(){try{return this.labId===this.task.lab.id}catch(t){return!1}}},{key:"isNotebook",get:function(){try{return"notebook"===this.vm.consoles[0].type}catch(t){return!1}}},{key:"isCloudHost",get:function(){try{return"instance"===this.vm.type}catch(t){return!1}}},{key:"labType",get:function(){return this._envType?this._envType:this.vm?this.vm.consoles&&this.vm.consoles[0].type:""}},{key:"isDesktop",get:function(){return["guacamole_vnc","guacamole_ssh"].indexOf(this.labType)>-1}},{key:"isCloudLab",get:function(){return this.task&&this.task.lab.is_cloudlab}},{key:"cloudLabAccount",get:function(){return this.isCloudLab&&this.task.cloudlab}}]),t}(),F=Y,Q=Object(ne.a)(F.prototype,"task",[Xt.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=Object(ne.a)(F.prototype,"vm",[Xt.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(ne.a)(F.prototype,"isCurrentLabRunning",[Xt.c],Object.getOwnPropertyDescriptor(F.prototype,"isCurrentLabRunning"),F.prototype),Object(ne.a)(F.prototype,"isNotebook",[Xt.c],Object.getOwnPropertyDescriptor(F.prototype,"isNotebook"),F.prototype),Object(ne.a)(F.prototype,"isCloudHost",[Xt.c],Object.getOwnPropertyDescriptor(F.prototype,"isCloudHost"),F.prototype),Object(ne.a)(F.prototype,"clearTask",[D],Object.getOwnPropertyDescriptor(F.prototype,"clearTask"),F.prototype),Object(ne.a)(F.prototype,"getTask",[N],Object.getOwnPropertyDescriptor(F.prototype,"getTask"),F.prototype),Object(ne.a)(F.prototype,"getVm",[R],Object.getOwnPropertyDescriptor(F.prototype,"getVm"),F.prototype),W=Object(ne.a)(F.prototype,"_envType",[Xt.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Object(ne.a)(F.prototype,"labType",[Xt.c],Object.getOwnPropertyDescriptor(F.prototype,"labType"),F.prototype),Object(ne.a)(F.prototype,"isDesktop",[Xt.c],Object.getOwnPropertyDescriptor(F.prototype,"isDesktop"),F.prototype),Object(ne.a)(F.prototype,"isCloudLab",[Xt.c],Object.getOwnPropertyDescriptor(F.prototype,"isCloudLab"),F.prototype),Object(ne.a)(F.prototype,"cloudLabAccount",[Xt.c],Object.getOwnPropertyDescriptor(F.prototype,"cloudLabAccount"),F.prototype),Object(ne.a)(F.prototype,"setLabType",[U],Object.getOwnPropertyDescriptor(F.prototype,"setLabType"),F.prototype),Object(ne.a)(F.prototype,"decreaseLabTime",[P],Object.getOwnPropertyDescriptor(F.prototype,"decreaseLabTime"),F.prototype),Object(ne.a)(F.prototype,"increaseLabTime",[B],Object.getOwnPropertyDescriptor(F.prototype,"increaseLabTime"),F.prototype),H=Object(ne.a)(F.prototype,"readonlyShareToken",[Xt.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=Object(ne.a)(F.prototype,"cooperationShareToken",[Xt.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(ne.a)(F.prototype,"getShareToken",[$],Object.getOwnPropertyDescriptor(F.prototype,"getShareToken"),F.prototype),F),ae=(Z=Xt.b.bound,K=Xt.b.bound,G=Xt.b.bound,J=Xt.b.bound,X=Xt.b.bound,tt=Xt.b.bound,st=function(){function t(e,n,r){Object(Gt.a)(this,t),Object(ee.a)(this,"inputEnabled",nt,this),this.$ajax=e,this.$urls=n,this.labId=+r}return Object(Jt.a)(t,[{key:"setInputEnabled",value:function(t){this.inputEnabled=!!t}},{key:"startLab",value:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.$urls.startLab(this.labId),r="?v2=1"+(e?"&saved_vm_identity=".concat(e):""),t.next=4,this.$ajax.post(n+r);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"stopLab",value:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$ajax.delete(this.$urls.labTask);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"nextLab",value:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$ajax.post(this.$urls.nextLab+"?v2=1");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"saveEnv",value:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.$urls.saveEnv+(e?"?identity="+e:""),t.next=3,this.$ajax.put(n);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"submitChallenge",value:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$ajax.post(this.$urls.checkChallenge);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),t}(),et=st,nt=Object(ne.a)(et.prototype,"inputEnabled",[Xt.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Object(ne.a)(et.prototype,"setInputEnabled",[Z],Object.getOwnPropertyDescriptor(et.prototype,"setInputEnabled"),et.prototype),Object(ne.a)(et.prototype,"startLab",[K],Object.getOwnPropertyDescriptor(et.prototype,"startLab"),et.prototype),Object(ne.a)(et.prototype,"stopLab",[G],Object.getOwnPropertyDescriptor(et.prototype,"stopLab"),et.prototype),Object(ne.a)(et.prototype,"nextLab",[J],Object.getOwnPropertyDescriptor(et.prototype,"nextLab"),et.prototype),Object(ne.a)(et.prototype,"saveEnv",[X],Object.getOwnPropertyDescriptor(et.prototype,"saveEnv"),et.prototype),Object(ne.a)(et.prototype,"submitChallenge",[tt],Object.getOwnPropertyDescriptor(et.prototype,"submitChallenge"),et.prototype),et),ie=(n(46),at=Xt.b.bound,it=Xt.b.bound,ot=Xt.b.bound,pt=function(){function t(e,n,r){Object(Gt.a)(this,t),Object(ee.a)(this,"inputCount",lt,this),Object(ee.a)(this,"inputKeys",ut,this),Object(ee.a)(this,"isRecording",ht,this),this.$ajax=e,this.$urls=n,this.labId=+r}return Object(Jt.a)(t,[{key:"syncLocalStorage",value:function(){+localStorage.getItem("currentLab")===this.labId&&(this.inputCount=+localStorage.getItem("inputCount"),this.inputKeys=localStorage.getItem("inputKeys").split(","))}},{key:"recordInput",value:function(data){this.inputCount+=1,this.inputKeys.push(data),this.inputKeys.length>100&&(this.inputKeys.length=100),localStorage.setItem("currentLab",this.labId),localStorage.setItem("inputKeys",this.inputKeys),localStorage.setItem("inputCount",this.inputCount)}},{key:"record",value:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){var data,e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==this.inputCount&&!this.isRecording){t.next=2;break}return t.abrupt("return",!1);case 2:return this.isRecording=!0,data={keystrokes_count:this.inputCount,data:this.inputKeys.join(",")},t.next=6,this.$ajax.post(this.$urls.studyRecord,data);case 6:return(e=t.sent).ok&&(this.inputCount=0,this.inputKeys=[],localStorage.removeItem("inputKeys"),localStorage.removeItem("inputCount")),this.isRecording=!1,t.abrupt("return",e);case 10:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),t}(),ct=pt,lt=Object(ne.a)(ct.prototype,"inputCount",[Xt.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ut=Object(ne.a)(ct.prototype,"inputKeys",[Xt.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ht=Object(ne.a)(ct.prototype,"isRecording",[Xt.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(ne.a)(ct.prototype,"syncLocalStorage",[at],Object.getOwnPropertyDescriptor(ct.prototype,"syncLocalStorage"),ct.prototype),Object(ne.a)(ct.prototype,"recordInput",[it],Object.getOwnPropertyDescriptor(ct.prototype,"recordInput"),ct.prototype),Object(ne.a)(ct.prototype,"record",[ot],Object.getOwnPropertyDescriptor(ct.prototype,"record"),ct.prototype),ct),oe=function(){function t(e){Object(Gt.a)(this,t),this.$ajax=e.$ajax,this.$urls=e.$urls,this.labModel=new re(this.$ajax,this.$urls)}return Object(Jt.a)(t,[{key:"createEnvModels",value:function(t){this.envModel=new se(this.$ajax,this.$urls,t),this.envCtrlModel=new ae(this.$ajax,this.$urls,t),this.envUserModel=new ie(this.$ajax,this.$urls,t)}}]),t}(),ce=n(0),le=(n(17),{props:{width:{type:Number,required:!0},hideLeftBar:{type:Boolean,default:!1}}}),ue=le,de=(n(1361),n(5)),component=Object(de.a)(ue,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"left-box",style:{width:t.width+"px"}},[n("div",{staticClass:"top-bar"},[t._t("top-bar")],2),t._v(" "),n("div",{staticClass:"box-container relative"},[t.hideLeftBar?t._e():n("div",{staticClass:"left-bar"},[t._t("left-bar")],2),t._v(" "),n("div",{staticClass:"box-content relative full-width",class:{"full-width":t.hideLeftBar}},[t._t("content")],2),t._v(" "),t._t("container-content")],2)])},[],!1,null,"48901454",null),he=component.exports,pe=n(128),fe=n(78),be=n(129),ve=n(130),me=n(1250),ge=(n(43),n(574)),ye=n.n(ge),_e=n(123),we=n.n(_e),ke=(ft=function(){function t(){Object(Gt.a)(this,t)}return Object(Jt.a)(t,[{key:"fmDocument",get:function(){return ye()(this.labDocument)}},{key:"documentMeta",get:function(){return this.fmDocument.attributes}},{key:"isStep",get:function(){return"step"===this.documentMeta.show}},{key:"markedDocument",get:function(){return we()(this.fmDocument.body).trim()+"<h2></h2>"}},{key:"stepsDocument",get:function(){for(var t=/(<h2|<h3)[\s\S]+?(?=<h2|<h3)/g,e=/(<h2|<h3).+(<\/h2>|<\/h3>)/,n=[],r=t.exec(this.markedDocument);r;){var o=r[0];e.test(o)&&function(){var title=e.exec(o)[0],content=o.replace(e,""),t=/\<\/checker\>/g.test(content);t&&(title=title.replace(/(<h[23][^<>]*>)/,'$1<i class="fa fa-check checker-flag"></i> '));var r=[],c=document.createElement("div");c.innerHTML=content;var l=c.querySelectorAll("checker");Object(me.a)(Array,Object(te.a)(l)).map(function(t,i){var e=JSON.parse(t.innerText);r=r.concat(e)}),n.push({title:title,content:content,hasChecker:t,checkers:r})}(),r=t.exec(this.markedDocument)}return n}},{key:"length",get:function(){return this.stepsDocument.length}},{key:"hasPrev",get:function(){return this.currentStep>0}},{key:"hasNext",get:function(){return this.currentStep<this.length}},{key:"currentStepDoc",get:function(){return this.stepsDocument[this.currentStep]}}]),t}(),Object(ne.a)(ft.prototype,"fmDocument",[Xt.c],Object.getOwnPropertyDescriptor(ft.prototype,"fmDocument"),ft.prototype),Object(ne.a)(ft.prototype,"documentMeta",[Xt.c],Object.getOwnPropertyDescriptor(ft.prototype,"documentMeta"),ft.prototype),Object(ne.a)(ft.prototype,"isStep",[Xt.c],Object.getOwnPropertyDescriptor(ft.prototype,"isStep"),ft.prototype),Object(ne.a)(ft.prototype,"markedDocument",[Xt.c],Object.getOwnPropertyDescriptor(ft.prototype,"markedDocument"),ft.prototype),Object(ne.a)(ft.prototype,"stepsDocument",[Xt.c],Object.getOwnPropertyDescriptor(ft.prototype,"stepsDocument"),ft.prototype),Object(ne.a)(ft.prototype,"length",[Xt.c],Object.getOwnPropertyDescriptor(ft.prototype,"length"),ft.prototype),Object(ne.a)(ft.prototype,"hasPrev",[Xt.c],Object.getOwnPropertyDescriptor(ft.prototype,"hasPrev"),ft.prototype),Object(ne.a)(ft.prototype,"hasNext",[Xt.c],Object.getOwnPropertyDescriptor(ft.prototype,"hasNext"),ft.prototype),Object(ne.a)(ft.prototype,"currentStepDoc",[Xt.c],Object.getOwnPropertyDescriptor(ft.prototype,"currentStepDoc"),ft.prototype),ft),Ce=(bt=Xt.b.bound,vt=Xt.b.bound,mt=Xt.b.bound,gt=Xt.b.bound,yt=Xt.b.bound,_t=Xt.b.bound,wt=Xt.b.bound,kt=Xt.b.bound,Ct=Xt.b.bound,xt=Xt.b.bound,It=function(t){function e(t,n){var r;return Object(Gt.a)(this,e),r=Object(pe.a)(this,Object(fe.a)(e).call(this)),Object(ee.a)(r,"lab",St,Object(be.a)(r)),Object(ee.a)(r,"labDocument",jt,Object(be.a)(r)),Object(ee.a)(r,"currentStep",Ot,Object(be.a)(r)),Object(ee.a)(r,"showCatalog",At,Object(be.a)(r)),Object(ee.a)(r,"sectionsData",Lt,Object(be.a)(r)),r.$ajax=t,r.$urls=n,r}return Object(ve.a)(e,t),Object(Jt.a)(e,[{key:"getLab",value:function(t){this.lab=t}},{key:"getLabDocument",value:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$ajax.get(this.$urls.labDocData(e),{v2:!0});case 2:return(n=t.sent).ok&&(this.labDocument=n.data.document),t.abrupt("return",n.ok);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getSectionData",value:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(e,n){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$ajax.get(this.$urls.labSectionsData(e,n));case 2:return(r=t.sent).ok&&(this.sectionsData=r.data),t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"hideCatalog",value:function(){this.showCatalog=!1}},{key:"toggleCatalog",value:function(){this.showCatalog=!this.showCatalog}},{key:"prevStep",value:function(t,e){t&&(e?this.offlineCheck():this.check(!0)),this.currentStep>0&&(this.currentStep-=1,localStorage.localStep=this.currentStep)}},{key:"nextStep",value:function(t,e){t&&(e?this.offlineCheck():this.check(!0)),this.hasNext&&(this.currentStep+=1,localStorage.localStep=this.currentStep)}},{key:"setStep",value:function(t){this.currentStep=t,this.showCatalog=!1,localStorage.localStep=this.currentStep}},{key:"check",value:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){var e,n,r,o=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]&&o[0],(n=this.stepsDocument[this.currentStep]).hasChecker||(e=!0),t.next=5,this.$ajax.post(this.$urls.labSectionCheck,{section_id:this.currentStep+1,is_view_only:e,scripts:n.checkers});case 5:if(!(r=t.sent).ok){t.next=9;break}return this.getSectionData(this.lab.id),t.abrupt("return",r.data);case 9:return t.abrupt("return",{result:{error:"请求失败，请稍后重试"}});case 10:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"offlineCheck",value:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$ajax.post(this.$urls.sectionRecord(this.lab.id),{section_id:this.currentStep});case 2:if(!(e=t.sent).ok){t.next=6;break}return this.getSectionData(this.lab.id),t.abrupt("return",e.data);case 6:return t.abrupt("return",{});case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),e}(ke),Mt=It,St=Object(ne.a)(Mt.prototype,"lab",[Xt.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),jt=Object(ne.a)(Mt.prototype,"labDocument",[Xt.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ot=Object(ne.a)(Mt.prototype,"currentStep",[Xt.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),At=Object(ne.a)(Mt.prototype,"showCatalog",[Xt.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Lt=Object(ne.a)(Mt.prototype,"sectionsData",[Xt.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(ne.a)(Mt.prototype,"getLab",[bt],Object.getOwnPropertyDescriptor(Mt.prototype,"getLab"),Mt.prototype),Object(ne.a)(Mt.prototype,"getLabDocument",[vt],Object.getOwnPropertyDescriptor(Mt.prototype,"getLabDocument"),Mt.prototype),Object(ne.a)(Mt.prototype,"getSectionData",[mt],Object.getOwnPropertyDescriptor(Mt.prototype,"getSectionData"),Mt.prototype),Object(ne.a)(Mt.prototype,"hideCatalog",[gt],Object.getOwnPropertyDescriptor(Mt.prototype,"hideCatalog"),Mt.prototype),Object(ne.a)(Mt.prototype,"toggleCatalog",[yt],Object.getOwnPropertyDescriptor(Mt.prototype,"toggleCatalog"),Mt.prototype),Object(ne.a)(Mt.prototype,"prevStep",[_t],Object.getOwnPropertyDescriptor(Mt.prototype,"prevStep"),Mt.prototype),Object(ne.a)(Mt.prototype,"nextStep",[wt],Object.getOwnPropertyDescriptor(Mt.prototype,"nextStep"),Mt.prototype),Object(ne.a)(Mt.prototype,"setStep",[kt],Object.getOwnPropertyDescriptor(Mt.prototype,"setStep"),Mt.prototype),Object(ne.a)(Mt.prototype,"check",[Ct],Object.getOwnPropertyDescriptor(Mt.prototype,"check"),Mt.prototype),Object(ne.a)(Mt.prototype,"offlineCheck",[xt],Object.getOwnPropertyDescriptor(Mt.prototype,"offlineCheck"),Mt.prototype),Mt),xe={props:{html:{type:String,default:""}},data:function(){return{show:!1,imageSrc:""}},watch:{html:function(){this.handleImagesClick()}},mounted:function(){this.handleImagesClick()},methods:{handleImagesClick:function(){var t=this,e=document.querySelector(".markdown-body");if(e){var n=e.querySelectorAll("img");Object(me.a)(Array,Object(te.a)(n)).map(function(e){e.onclick=function(){t.imageSrc=e.getAttribute("src"),t.showImage()}})}},showImage:function(){this.show=!0},hideImage:function(){this.show=!1}}},Me=xe,Se=(n(1362),Object(de.a)(Me,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("transition",{attrs:{name:"fade"}},[this.show?e("div",{staticClass:"image-modal",on:{click:this.hideImage}},[e("img",{attrs:{src:this.imageSrc}})]):this._e()])],1)},[],!1,null,"31af5ef6",null)),je=Se.exports,Oe={props:{passed:{type:Boolean,required:!0},message:{type:String,default:""},hide:{type:Function,required:!0}}},Ae=Oe,Le=(n(1363),Object(de.a)(Ae,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"check-result"},[n("div",{staticClass:"close",on:{click:t.hide}},[n("i",{staticClass:"fa fa-times"})]),t._v(" "),n("div",{staticClass:"title",class:{passed:t.passed}},[n("i",{staticClass:"fa",class:[t.passed?"fa-check-circle":"fa-times-circle"]}),t._v("\n    "+t._s(t.passed?"检测通过":"检测未通过")+"\n  ")]),t._v(" "),t.passed?t._e():n("div",{staticClass:"content"},[t._v("\n    "+t._s(t.message)+"\n  ")])])},[],!1,null,"583ac0da",null)),Ie=Le.exports,Ee=Object(Kt.a)({components:{CheckResult:Ie},props:{labModel:{type:Object,required:!0},isChallenge:{type:Boolean,default:!1},isCurrentLabRunning:{type:Boolean,required:!0},showModal:{type:Function,required:!0},showCommentPage:{type:Function,required:!0},hideCommentPage:{type:Function,required:!0}},data:function(){return{finished:!1,message:"",passed:!1,isChecking:!1,seconds:0,challengeResult:null}},methods:{clickHandler:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){var e,n,r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isChallenge||!this.isCurrentLabRunning){t.next=14;break}if(!this.passed){t.next=6;break}return this.finished=!0,this.hide(),this.showCommentPage(this.challengeResult),t.abrupt("return",!1);case 6:return this.isChecking=!0,t.next=9,this.$ajax.post(this.$urls.checkChallenge);case 9:e=t.sent,n=null,e.ok&&(n=setInterval(Object(Vt.a)(regeneratorRuntime.mark(function t(){var o,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.$ajax.get(e.data.submission_url);case 2:(o=t.sent).ok&&o.data.is_done&&(clearInterval(n),r.isChecking=!1,r.passed=o.data.is_passed,o.data.is_passed?(r.challengeResult=o.data,r.seconds=3,c=setInterval(function(){r.seconds-=1,-1===r.seconds&&(clearInterval(c),r.finished=!0,r.showCommentPage(o.data),r.hide())},1e3)):r.message=o.data.result.custom_err);case 4:case"end":return t.stop()}},t)})),2e3)),t.next=16;break;case 14:this.finished=!0,this.message="";case 16:this.finished&&this.showCommentPage();case 17:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),nextSection:function(){this.isCurrentLabRunning?this.showModal():window.location.href=this.labModel.nextLabUrl},hide:function(){this.message="",this.passed=!1},toFirstStep:function(){this.finished=!1,this.hideCommentPage()}}}),Te=Ee,De=(n(1364),Object(de.a)(Te,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"toolbar"},[t.message||t.passed?n("check-result",{attrs:{passed:t.passed,message:t.message,hide:t.hide}}):t._e(),t._v(" "),n("div",{staticClass:"toolbar-btns"},[t.finished?n("div",[n("b-btn",{staticClass:"to-first-step",attrs:{variant:"default"},on:{click:t.toFirstStep}},[t._v("\n        回到第一步\n      ")]),t._v(" "),t.labModel.lab.have_next?n("b-btn",{staticClass:"toolbar-btn",attrs:{variant:"primary"},on:{click:t.nextSection}},[t._v("\n        进入下一章节\n      ")]):t.labModel.course.support_embed?t._e():n("a",{staticClass:"btn btn-primary toolbar-btn next-section-btn",attrs:{href:"/courses/"}},[t._v("\n        继续学习更多课程\n      ")])],1):n("b-btn",{staticClass:"toolbar-btn",class:{"bg-orange":t.isChallenge&&!t.passed},attrs:{variant:"primary"},on:{click:t.clickHandler}},[t.isChallenge?[t.passed?[t._v("\n          完成\n          "),t.seconds>-1?n("span",{staticClass:"seconds"},[t._v("\n            ("+t._s(t.seconds)+"s自动跳转)\n          ")]):t._e()]:[t._v("\n          "+t._s(t.isChecking?"正在检测...":"提交检测")+"\n        ")]]:[t._v("\n        完成学习\n      ")]],2)],1)],1)},[],!1,null,"5a6f02b8",null)),Ne=De.exports,Re=[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"face"},[e("img",{attrs:{src:n(1255)}})])}],qe={props:{labModel:{type:Object,required:!0},labId:{type:Number,required:!0},envModel:{type:Object,required:!0},setInputEnabled:{type:Function,required:!0},isChallenge:{type:Boolean,default:!1},challengeResult:{type:Object,default:function(){}}},data:function(){return{submitted:!1,comment:"",errorMessage:""}},watch:{submitted:function(t){t&&this.setInputEnabled(!0)}},methods:{submit:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){var data,e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return data={topic_type:"course",topic_id:this.$route.params.id,content:this.comment,lab_id:this.labId},t.next=3,this.$ajax.post(this.$urls.courseComments,data);case 3:(e=t.sent).ok?(this.errorMessage="",this.submitted=!0,this.setInputEnabled(!0)):this.comment?this.errorMessage=e.message:this.errorMessage="评论不能为空";case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},Ue=qe,Pe=(n(1365),Object(de.a)(Ue,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment-page"},[t.envModel.isCurrentLabRunning?n("div",{staticClass:"title"},[t._m(0),t._v(" "),t.isChallenge?n("span",[t._v("\n      恭喜你获得PASS！\n    ")]):n("span",[t._v("\n      恭喜你完成本节学习\n    ")])]):t._e(),t._v(" "),t.isChallenge&&t.envModel.isCurrentLabRunning?n("div",{staticClass:"challenge-study-time"},[n("div",[t._v("\n      本次解题时间："+t._s(t.challengeResult.elapsed_minutes)+"分钟\n    ")]),t._v(" "),"contest_challenge"===t.labModel.lab.type?[n("div",[t._v("\n        本题获得分数："+t._s(t.challengeResult.score)+"分钟\n      ")]),t._v(" "),n("div",[t._v("\n        目前比赛总排名："+t._s(t.challengeResult.contest_rank)+"\n      ")])]:t._e()],2):t._e(),t._v(" "),t.submitted?n("div",{staticClass:"submitted"},[n("i",{staticClass:"fa fa-check-circle"}),t._v("\n    提交成功！\n  ")]):[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],staticClass:"comment-box",attrs:{placeholder:"谈谈你的学习收获吧~"},domProps:{value:t.comment},on:{mouseenter:function(){return t.setInputEnabled(!1)},mouseleave:function(){return t.setInputEnabled(!0)},input:function(e){e.target.composing||(t.comment=e.target.value)}}}),t._v(" "),t.errorMessage?n("div",{staticClass:"comment-error"},[t._v("\n      "+t._s(t.errorMessage)+"\n    ")]):t._e(),t._v(" "),n("b-btn",{staticClass:"submit-btn",attrs:{variant:"primary"},on:{click:t.submit}},[t._v("\n      提交\n    ")])],t._v(" "),t.isChallenge?t._e():n("div",{staticClass:"footer"},[n("p",[t._v("\n      今日累计学习 "+t._s(t.$auth.user.today_study_minutes)+" 分钟，\n      距离 "+t._s(t.$auth.user.level+1)+" 楼还需 "+t._s(30-t.$auth.user.study_minutes%30)+" 分钟！\n    ")]),t._v(" "),n("p",{staticClass:"no-margin font-12"},[t.$auth.user.level<100?n("a",{staticClass:"club-link",attrs:{href:"/questions/6512",target:"_blank"}},[t._v("\n        到达 "),n("span",{staticClass:"bold color-red"},[t._v("100楼")]),t._v(" 可加入百楼俱乐部，了解更多 >>\n      ")]):t._e()])])],2)},Re,!1,null,"2edd4e84",null)),Be=Pe.exports,$e={components:{ImageModal:je,ToolBar:Ne,CommentPage:Be},props:{labId:{type:Number,required:!0},labModel:{type:Object,required:!0},envModel:{type:Object,required:!0},envCtrlModel:{type:Object,required:!0},isNotebook:{type:Boolean,required:!0},isChallenge:{type:Boolean,required:!0},markedDocument:{type:String,required:!0},isCurrentLabRunning:{type:Boolean,required:!0},showNextSectionModal:{type:Function,required:!0}},data:function(){return{html:"",showCommentPage:!1,rules:["仔细阅读题目描述，在实验环境中完成任务","完成任务后点击步骤右下角的提交检测按钮","系统自动评测并给出是否通过的信息"],showDoc:!1,rendered:!1,challengeResult:{}}},computed:{isTrial:function(){return"trial"===this.labModel.courseUserStatus.status&&this.labModel.lab.is_trial}},watch:{markedDocument:function(){var t=this;this.$nextTick(function(){t.renderMarkdown()})}},methods:{renderMarkdown:function(){var t=document.querySelector(".markdown-body");t&&(this.$marked.renderStyles(t),this.getHtml(t))},getHtml:function(t){var e=this;this.$nextTick(function(){e.html=t.innerHTML})},showNotebookDoc:function(){this.rendered||this.renderMarkdown(),this.showDoc=!0,this.rendered=!0},hideNotebookDoc:function(){this.showDoc=!1},setShowCommentPage:function(data){this.challengeResult=data,this.showCommentPage=!0}}},Fe=$e,Qe=(n(1366),Object(de.a)(Fe,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"single-document",class:{"is-challenge":t.isChallenge,"is-trial":t.isTrial}},[n("div",{staticClass:"content"},[t.showCommentPage?n("comment-page",{attrs:{"lab-model":t.labModel,"lab-id":t.labId,"env-model":t.envModel,"set-input-enabled":t.envCtrlModel.setInputEnabled,"is-challenge":t.labModel.isChallenge,"challenge-result":t.challengeResult}}):[t.isChallenge&&!t.isNotebook?n("b-alert",{staticClass:"rules",attrs:{show:""}},[n("strong",[t._v("\n          挑战规则：\n        ")]),t._v(" "),t._l(t.rules,function(e,r){return n("div",{key:r},[t._v("\n          "+t._s(r+1)+". "+t._s(e)+"\n        ")])})],2):t._e(),t._v(" "),t.isNotebook?n("div",[n("b-alert",{staticClass:"rules",attrs:{show:""}},[n("p",[t._v("说明：")]),t._v(" "),n("div",[t._v("\n            1. 本章节实验步骤已融合在右侧环境，请开启环境后直接在右侧环境的 空白单元格 处输入代码做实验\n          ")]),t._v(" "),n("div",[t._v("\n            2. 若想仅查看实验步骤，请点击下方展开实验步骤\n          ")])]),t._v(" "),t.showDoc?n("div",{staticClass:"toggle-doc",on:{click:t.hideNotebookDoc}},[t._v("\n          点击收起步骤\n          "),n("i",{staticClass:"fa fa-angle-up"})]):n("div",{staticClass:"toggle-doc",on:{click:t.showNotebookDoc}},[t._v("\n          点击展开步骤\n          "),n("i",{staticClass:"fa fa-angle-down"})]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showDoc,expression:"showDoc"}],staticClass:"markdown-body",domProps:{innerHTML:t._s(t.markedDocument)}})],1):n("div",{staticClass:"markdown-body",domProps:{innerHTML:t._s(t.markedDocument)}}),t._v(" "),n("div",{staticClass:"copyright"},[t._v("\n        *本课程内容由作者授权实验楼发布，未经允许，禁止转载、下载及非法传播\n      ")])]],2),t._v(" "),n("tool-bar",{attrs:{"lab-model":t.labModel,"is-challenge":t.isChallenge,"is-current-lab-running":t.isCurrentLabRunning,"show-modal":t.showNextSectionModal,"show-comment-page":t.setShowCommentPage,"hide-comment-page":function(){return t.showCommentPage=!1}}}),t._v(" "),n("image-modal",{attrs:{html:t.html}})],1)},[],!1,null,"198dce4b",null)),ze=Qe.exports,We={props:{labName:{type:String,default:"Python 实战"},catalog:{type:Array,required:!0},sectionsData:{type:Array,required:!0},setStep:{type:Function,required:!0},currentStep:{type:Number,default:0}},methods:{passed:function(t){try{return t<this.sectionsData.length&&this.sectionsData[t].is_passed}catch(t){return!1}},learned:function(t){try{return t<this.sectionsData.length&&this.sectionsData[t].views_count>0}catch(t){return!1}return!1},click:function(t){this.learned(t)&&this.setStep(t)}}},He=We,Ve=(n(1367),Object(de.a)(He,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"lab-document-catalog"},[n("div",{staticClass:"title"},[t._v("\n    "+t._s(t.labName)+"\n  ")]),t._v(" "),t._l(t.catalog,function(e,r){return n("div",{key:e.title,staticClass:"catalog-item",class:{active:r===t.currentStep,passed:t.passed(r),learned:t.learned(r)},domProps:{innerHTML:t._s(e.title)},on:{click:function(){return t.click(r)}}})})],2)},[],!1,null,null,null)),Ye=Ve.exports,Ze={components:{ImageModal:je},props:{envModel:{type:Object,required:!0},currentStep:{type:Number,required:!0},doc:{type:Object,required:!0,validator:function(t){return t.title&&t.content}},prevStep:{type:Function,required:!0},nextStep:{type:Function,required:!0}},data:function(){return{html:""}},computed:{title:function(){var div=document.createElement("div");return div.innerHTML=this.doc.title,div.innerText}},watch:{currentStep:function(){var t=this;this.$nextTick(function(){t.renderMarked(),t.$refs.content.scrollTop=0})}},mounted:function(){this.renderMarked()},methods:{renderMarked:function(){var t=document.querySelector(".markdown-body");t&&(this.$marked.renderStyles(t),this.getHtml(t))},getHtml:function(t){var e=this;this.$nextTick(function(){e.html=t.innerHTML})}}},Ke=Ze,Ge=(n(1368),Object(de.a)(Ke,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"step-content"},[n("div",{staticClass:"title"},[n("i",{staticClass:"fa fa-angle-left",on:{click:function(){return t.prevStep(!0,!t.envModel.isCurrentLabRunning)}}}),t._v(" "),n("div",[t._v("\n      "+t._s(t.title)+"\n    ")]),t._v(" "),n("i",{staticClass:"fa fa-angle-right",on:{click:function(){return t.nextStep(!0,!t.envModel.isCurrentLabRunning)}}})]),t._v(" "),n("div",{staticClass:"markdown-body"},[n("div",{ref:"content",staticClass:"markdown-content",domProps:{innerHTML:t._s(t.doc.content)}}),t._v(" "),n("div",{staticClass:"copyright"},[t._v("\n      *本课程内容由作者授权实验楼发布，未经允许，禁止转载、下载及非法传播\n    ")])]),t._v(" "),n("image-modal",{attrs:{html:t.html}})],1)},[],!1,null,"08fbb415",null)),Je=Ge.exports,Xe=Object(Kt.a)({components:{CheckResult:Ie},props:{labModel:{type:Object,required:!0},envModel:{type:Object,required:!0},toggleCatalog:{type:Function,required:!0},setStep:{type:Function,required:!0},nextStep:{type:Function,required:!0},check:{type:Function,required:!0},offlineCheck:{type:Function,required:!0},stepsDocument:{type:Array,required:!0},currentStep:{type:Number,required:!0},showNextSectionModal:{type:Function,required:!0}},data:function(){return{isChecking:!1,passed:!1,message:"",ttl:0,timer:null,showNextSectionBtn:!1,isLastStep:!1,isChecked:!1}},watch:{currentStep:function(t){this.isChecking=!1,this.passed=!1,this.message="",this.isLastStep=!1,this.showNextSectionBtn=!1,this.isChecked=!1,t>=this.stepsDocument.length-1&&(this.isLastStep=!0),t>=this.stepsDocument.length&&(this.showNextSectionBtn=!0)}},methods:{toNextStep:function(){this.message="",this.isChecked=!1,this.nextStep()},checkSection:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){var e,n,r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.stepsDocument[this.currentStep],this.message="",this.isChecked=!1,this.envModel.isCurrentLabRunning){t.next=9;break}this.offlineCheck(),this.toNextStep(),this.pass=!1,t.next=21;break;case 9:if(!e.hasChecker||!this.envModel.isCurrentLabRunning){t.next=18;break}return this.isChecking=!0,t.next=13,this.check();case 13:n=t.sent,this.passed=n.is_passed,n.is_passed?(this.ttl=3,this.timer=setInterval(function(){r.ttl-=1,0===r.ttl&&(clearInterval(r.timer),r.passed=!1,r.toNextStep())},1e3)):(this.message=n.result.error,this.isChecked=!0),t.next=21;break;case 18:this.check(),this.toNextStep(),this.passed=!1;case 21:this.isChecking=!1;case 22:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),hide:function(){this.passed=!1,this.message=""},tryToNextSection:function(){this.envModel.isCurrentLabRunning?this.showNextSectionModal():window.location.href=this.labModel.nextLabUrl}}}),tn=Xe,en=(n(1369),Object(de.a)(tn,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tools"},[n("b-progress",{staticClass:"progress",attrs:{value:t.currentStep,max:t.stepsDocument.length}}),t._v(" "),t.message||t.passed?n("check-result",{attrs:{passed:t.passed,message:t.message,hide:t.hide}}):t._e(),t._v(" "),n("a",{staticClass:"tools-catalog-btn",attrs:{href:"javascript:;"},on:{click:t.toggleCatalog}},[n("i",{staticClass:"fa fa-list-ul"})]),t._v(" "),t.showNextSectionBtn?[n("div",[n("b-btn",{staticClass:"tools-btn to-first-step",attrs:{variant:"default"},on:{click:function(){return t.setStep(0)}}},[t._v("\n        回到第一步\n      ")]),t._v(" "),t.labModel.lab.have_next?n("b-btn",{staticClass:"tools-btn",attrs:{variant:"primary"},on:{click:t.tryToNextSection}},[t._v("\n        进入下一章节\n      ")]):t.labModel.course.support_embed?t._e():n("a",{staticClass:"btn btn-primary tools-btn next-section-btn",attrs:{href:"/courses/"}},[t._v("\n        继续学习更多课程\n      ")])],1)]:t.showNextSectionBtn?t._e():n("div",[t.isChecked?n("a",{staticClass:"tools-btn",class:{"skip-btn":t.isChecked},attrs:{variant:"primary"},on:{click:t.toNextStep}},[t._v("\n      跳过\n    ")]):t._e(),t._v(" "),t.passed?n("b-btn",{staticClass:"tools-btn passed",attrs:{variant:"primary"}},[t._v("\n      下一步\n      "),n("span",[t._v("\n        ("+t._s(t.ttl)+"s自动跳转)\n      ")])]):n("b-btn",{staticClass:"tools-btn",class:{disabled:t.isChecking,"bg-orange":t.message||t.isChecking||t.isChecked},attrs:{variant:"primary",disabled:t.isChecking},on:{click:t.checkSection}},[t.isChecked?[t._v("\n        重新检测\n      ")]:[t._v("\n        "+t._s(t.isChecking?"正在检测...":t.isLastStep?"完成学习":"下一步")+"\n      ")]],2)],1)],2)},[],!1,null,"9a844362",null)),nn=en.exports,rn=Object(Kt.a)({components:{StepCatalog:Ye,StepContent:Je,ToolBar:nn,CommentPage:Be},props:{state:{type:Object,required:!0},labModel:{type:Object,required:!0},envModel:{type:Object,required:!0},envCtrlModel:{type:Object,required:!0},showNextSectionModal:{type:Function,required:!0}},computed:{isTrial:function(){return"trial"===this.labModel.courseUserStatus.status&&this.labModel.lab.is_trial}},mounted:function(){var t=this;this.state.showCatalog&&setTimeout(function(){t.state.hideCatalog()},5e3)}}),sn=rn,an=(n(1370),Object(de.a)(sn,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"steps-document",style:{height:t.isTrial?"calc(100% - 48px)":"100%"}},[n("transition",{attrs:{name:"catalog-layer"}},[t.state.showCatalog?n("div",{staticClass:"catalog-layer",on:{click:t.state.toggleCatalog}}):t._e()]),t._v(" "),n("transition",{attrs:{name:"doc-catalog"}},[t.state.showCatalog?n("step-catalog",{staticClass:"doc-catalog",attrs:{"lab-name":t.state.lab.name,catalog:t.state.stepsDocument,"sections-data":t.state.sectionsData,"set-step":t.state.setStep,"current-step":t.state.currentStep}}):t._e()],1),t._v(" "),t.state.hasNext&&t.state.currentStep<t.state.length?[n("step-content",{attrs:{"env-model":t.envModel,"current-step":t.state.currentStep,doc:t.state.currentStepDoc,"prev-step":t.state.prevStep,"next-step":t.state.nextStep}})]:n("comment-page",{attrs:{"lab-model":t.labModel,"lab-id":t.state.lab.id,"set-input-enabled":t.envCtrlModel.setInputEnabled,"env-model":t.envModel,"is-challenge":t.labModel.isChallenge}}),t._v(" "),n("tool-bar",{attrs:{"lab-model":t.labModel,"env-model":t.envModel,"toggle-catalog":t.state.toggleCatalog,"set-step":t.state.setStep,"next-step":t.state.nextStep,"steps-document":t.state.stepsDocument,"current-step":t.state.currentStep,"is-last-step":!t.state.hasNext,check:t.state.check,"offline-check":t.state.offlineCheck,"show-next-section-modal":t.showNextSectionModal}})],2)},[],!1,null,"1a1e477c",null)),on=an.exports,cn={props:{htmlUrl:{type:String,required:!0}}},ln=cn,un=(n(1371),Object(de.a)(ln,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"trial"},[e("div",{staticClass:"text"},[this._v("\n    购买后即可完整学习该课程\n  ")]),this._v(" "),e("a",{staticClass:"trial-btn",attrs:{href:this.htmlUrl,target:"_blank"}},[this._v("\n    去购买\n  ")])])},[],!1,null,"03d3d818",null)),dn=un.exports,hn={props:{htmlUrl:{type:String,required:!0},isEnv:{type:Boolean,default:!1}}},pn=hn,fn=(n(1372),Object(de.a)(pn,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"trial"},[e("div",{staticClass:"text",style:{"margin-top":this.isEnv?"260px":"200px"}},[this._v("\n    试学结束，购买后即可完整学习该课程～\n  ")]),this._v(" "),e("a",{staticClass:"buy-btn",attrs:{target:"_blank",href:this.htmlUrl}},[this._v("\n    去购买\n  ")])])},[],!1,null,"4005d115",null)),bn=fn.exports,vn={components:{CommentPage:Be},props:{labModel:{type:Object,required:!0}},data:function(){return{finished:!1}},methods:{nextSection:function(){window.location.href=this.labModel.nextLabUrl}}},mn=vn,gn=(n(1373),Object(de.a)(mn,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page"},[t.finished?n("comment-page",{attrs:{"lab-id":t.labModel.lab.id,"set-input-enabled":function(){}}}):n("div",{staticClass:"live"},[n("div",{staticClass:"title"},[t._v("\n      说明：\n    ")]),t._v(" "),n("div",[t._v("\n      请点击右侧的“点击进入直播间”观看直播。\n    ")])]),t._v(" "),n("div",{staticClass:"toolbar"},[t.finished?n("b-btn",{staticClass:"toolbar-btn",attrs:{variant:"primary"},on:{click:t.nextSection}},[t._v("\n      进入下一章节\n    ")]):n("b-btn",{staticClass:"toolbar-btn",attrs:{variant:"primary"},on:{click:function(e){t.finished=!0}}},[t._v("\n      完成学习\n    ")])],1)],1)},[],!1,null,"3366f7aa",null)),yn=gn.exports,_n={props:{top:{type:String,required:!0},left:{type:String,required:!0},placement:{type:String,default:"right"},arrowTop:{type:Boolean,default:!1}},data:function(){return{show:!0}},methods:{hide:function(){this.show=!1,this.$emit("close")}}},wn=(n(1374),Object(de.a)(_n,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show?n("div",{staticClass:"tip",style:{top:t.top,left:t.left}},[t._m(0),t._v(" "),n("div",{staticClass:"info",class:{"arrow-top":t.arrowTop,"placement-bottom":"bottom"===t.placement}},[n("div",{staticClass:"content"},[t._m(1),t._v(" "),n("div",{staticClass:"text"},[t._t("default")],2)]),t._v(" "),n("div",{staticClass:"footer"},[n("span",{on:{click:t.hide}},[t._v("\n        我知道了\n      ")])])])]):t._e()},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"circle"},[e("div",{staticClass:"circle-inner"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"icon"},[e("img",{attrs:{src:"https://dn-simplecloud.shiyanlou.com/gravatar8504.png"}})])}],!1,null,"07718f3a",null).exports),kn={props:{hideModal:{type:Function,required:!0}}},Cn=(n(1375),Object(de.a)(kn,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"base-left-modal"},[e("div",{staticClass:"box"},[e("div",{staticClass:"close",on:{click:this.hideModal}},[e("i",{staticClass:"fa fa-times"})]),this._v(" "),e("div",{staticClass:"content"},[this._t("content")],2),this._v(" "),this._t("default")],2)])},[],!1,null,"5751383a",null).exports),xn=Object(Kt.a)({components:{BaseLeftModal:Cn},props:{labModel:{type:Object,required:!0},envModel:{type:Object,required:!0},envCtrlModel:{type:Object,required:!0},hideModal:{type:Function,required:!0},showSaveVmModal:{type:Function,required:!0}},computed:Object(Yt.a)({},Object(Zt.d)("labTask",{savedEnv:function(t){return t.savedEnv}}),{isSavedEnv:function(){var t=this,e=!1;return this.savedEnv&&this.savedEnv.length&&this.savedEnv.map(function(n){n.vm.id===t.envModel.vm.id&&(e=!0)}),e}}),methods:Object(Yt.a)({},Object(Zt.b)("labTask",["getSavedEnv"]),{nextSection:function(){window.location.href=this.labModel.nextLabUrl},toNextWithEnv:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.envCtrlModel.nextLab();case 2:this.nextSection();case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),toNextAndStopEnv:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.envCtrlModel.stopLab();case 2:this.nextSection();case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),toNextAndSaveEnv:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){var e,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.savedEnv||2!==this.savedEnv.length){t.next=5;break}this.hideModal(),this.showSaveVmModal(),t.next=17;break;case 5:return t.next=7,this.envCtrlModel.saveEnv();case 7:if(!(e=t.sent).ok){t.next=16;break}return this.getSavedEnv(),this.hideModal(),t.next=13,this.envCtrlModel.stopLab();case 13:this.$showMessage("success","环境保存成功，有效期30天！",function(){n.nextSection()}),t.next=17;break;case 16:this.$showMessage("danger",e.message);case 17:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()})}),Mn=(n(1376),Object(de.a)(xn,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("base-left-modal",{attrs:{"hide-modal":t.hideModal}},[n("template",{slot:"content"},[t.labModel.lab.compatible_with_next?n("div",[t._v("\n      下个章节与当前一致，当前环境数据可继续使用\n    ")]):n("div",[t._v("\n      进入新章节将关闭当前临时环境\n    ")])]),t._v(" "),n("div",{staticClass:"box-btns"},[t.labModel.lab.compatible_with_next?n("b-btn",{staticClass:"box-btn",attrs:{variant:"primary"},on:{click:t.toNextWithEnv}},[t._v("\n      进入新章节\n    ")]):[t.$auth.isMember?[t.isSavedEnv?n("b-btn",{staticClass:"box-btn",attrs:{variant:"primary"},on:{click:t.toNextAndStopEnv}},[t._v("\n          关闭环境并进入\n          "),n("span",[t._v("(环境和代码将被关机保存)")])]):[n("b-btn",{staticClass:"box-btn",attrs:{variant:"danger"},on:{click:t.toNextAndStopEnv}},[t._v("\n            关闭环境并进入\n            "),n("span",[t._v("(环境和代码将被删除)")])]),t._v(" "),t.envModel.vm.can_save?n("b-btn",{staticClass:"box-btn",attrs:{variant:"primary"},on:{click:t.toNextAndSaveEnv}},[t._v("\n            保存该临时环境\n          ")]):t._e()]]:n("b-btn",{staticClass:"box-btn",attrs:{variant:"danger"},on:{click:t.toNextAndStopEnv}},[t._v("\n        关闭环境并进入\n        "),n("span",[t._v("(环境和代码将被删除)")])])],t._v(" "),n("b-btn",{staticClass:"box-btn close-btn",attrs:{variant:"outline-secondary"},on:{click:t.hideModal}},[t._v("\n      取消\n    ")])],2),t._v(" "),t.$auth.isMember?t._e():n("div",{staticClass:"warning"},[t._v("\n    关闭环境后，数据和代码将被删除，如需保存环境，建议\n    "),n("a",{attrs:{href:"/vip/",target:"_blank"}},[t._v("\n      加入会员\n    ")])])],2)},[],!1,null,"4f9b7428",null).exports),Sn=n(4),jn=n.n(Sn),On={components:{BaseModal:Cn},props:{labModel:{type:Object,required:!0},envCtrlModel:{type:Object,required:!0},hideModal:{type:Function,required:!0},backCallback:{type:Function,default:function(){}},savedCallback:{type:Function,default:function(){}},backText:{type:String,default:"取消"}},data:function(){return{active:null}},computed:Object(Yt.a)({},Object(Zt.d)("labTask",{savedEnv:function(t){return t.savedEnv}})),mounted:function(){var t=this;this.$nextTick(function(){t.savedEnv&&t.savedEnv.length&&(t.active=t.savedEnv[0].identity)})},methods:Object(Yt.a)({},Object(Zt.b)("labTask",["getSavedEnv"]),{leftDays:function(t){try{var e=new Date,s=jn()(e),n=jn()(t),r=jn.a.duration(n-s).days()+1;return r>30?30:r}catch(t){return 0}},back:function(){this.hideModal(),this.backCallback()},confirm:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){var e,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.envCtrlModel.saveEnv(this.active);case 2:(e=t.sent).ok?(this.getSavedEnv(),this.labModel.isContest?this.labModel.getChallengesUserStatus():this.labModel.getLabsUserStatus(this.labModel.course.id),this.hideModal(),this.$showMessage("success","环境保存成功，有效期30天！",function(){n.savedCallback()})):this.$showMessage("danger",e.message);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()})},An=(n(1378),Object(de.a)(On,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("base-modal",{attrs:{"hide-modal":t.hideModal}},[r("div",{attrs:{slot:"content"},slot:"content"},[t._v("\n    选择想要替换的环境\n    "),r("div",{staticClass:"modal-sub-title"},[t._v("\n      （被替换的环境将被删除）\n    ")])]),t._v(" "),r("div",[r("div",{staticClass:"items"},t._l(t.savedEnv,function(e,o){return r("div",{key:e.identity,staticClass:"item"},[r("div",{staticClass:"env",class:{active:t.active===e.identity},on:{click:function(n){t.active=e.identity}}},[t.active===e.identity?r("img",{staticClass:"selected-icon",attrs:{src:n(1377)}}):t._e(),t._v(" "),r("div",{staticClass:"env-title"},[t._v("\n            保存的环境"+t._s(o+1)+"\n          ")]),t._v(" "),"ssh"===e.vm.lab.console_type?r("img",{attrs:{src:n(565)}}):"notebook"===e.vm.lab.console_type?r("img",{attrs:{src:n(566)}}):"webide"===e.vm.lab.console_type?r("img",{attrs:{src:n(567)}}):r("img",{attrs:{src:n(568)}})]),t._v(" "),r("div",{staticClass:"info"},[r("div",{domProps:{textContent:t._s("保存于<"+e.vm.lab.parent.name+"-"+e.vm.lab.name+">")}}),t._v(" "),r("div",{staticClass:"left-days"},[t._v("\n            (有效期剩余"+t._s(t.leftDays(e.expired_at))+"天)\n          ")])])])}),0),t._v(" "),r("div",{staticClass:"footer"},[r("b-btn",{staticClass:"confirm-btn",attrs:{variant:"primary"},on:{click:t.confirm}},[t._v("\n        确认\n      ")]),t._v(" "),r("div",{on:{click:t.back}},[t._v("\n        "+t._s(t.backText)+"\n      ")])],1)])])},[],!1,null,"78fab3f2",null).exports),Ln={props:{text:{type:String,required:!0},url:{type:String,required:!0}}},In=(n(1379),Object(de.a)(Ln,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"not-allowed"},[e("div",[e("div",{staticClass:"text"},[this._v("\n      "+this._s(this.text)+"\n    ")]),this._v(" "),e("a",{attrs:{href:this.url}},[this._v("确定")])])])},[],!1,null,"65b35e50",null).exports),En=Object(Kt.a)({components:{SinglePageDocument:ze,StepDocument:on,TrialBanner:dn,TrialEndPage:bn,LivePage:yn,TipBox:wn,NextSectionModal:Mn,SaveVmModal:An,NotAllowed:In},props:{labModel:{type:Object,required:!0},envModel:{type:Object,required:!0},envCtrlModel:{type:Object,required:!0},leftBoxWidth:{type:Number,required:!0}},data:function(){return{state:new Ce(this.$ajax,this.$urls),showNextModal:!1,showSaveVmModal:!1,notAllowed:!1,notAllowedText:"",notAllowedUrl:""}},computed:{labId:function(){return this.labModel.lab.id}},watch:{labId:function(t){this.init()}},mounted:function(){this.init()},methods:{init:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){var e,n,r,o,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.preInit();case 2:if(this.state.getLab(this.labModel.lab),"live"!==this.labModel.lab.type){t.next=10;break}return t.next=6,this.labModel.getCourseUserStatus(this.labModel.course.id);case 6:return t.next=8,this.labModel.getLabsUserStatus(this.labModel.course.id);case 8:return this.labModel.labUserStatus.specific_status.can_read||this.labModel.labUserStatus.specific_status.can_watch||(this.notAllowedText="请按顺序学习",this.notAllowedUrl="/courses/".concat(this.labModel.course.id),this.notAllowed=!0),t.abrupt("return",!1);case 10:return t.next=12,this.state.getLabDocument(this.labModel.lab.id);case 12:if(!t.sent){t.next=33;break}if(!this.labModel.isContest){t.next=21;break}return t.next=17,this.labModel.getContestUserStatus(this.labModel.course.slug);case 17:return t.next=19,this.labModel.getChallengesUserStatus();case 19:t.next=25;break;case 21:return t.next=23,this.labModel.getCourseUserStatus(this.labModel.course.id);case 23:return t.next=25,this.labModel.getLabsUserStatus(this.labModel.course.id);case 25:if(this.labModel.isContest||this.labModel.labUserStatus.specific_status.can_read||this.labModel.labUserStatus.specific_status.can_watch||(this.notAllowedText="请按顺序学习",this.notAllowedUrl="/courses/".concat(this.labModel.course.id),this.notAllowed=!0),!this.state.isStep){t.next=31;break}return t.next=29,this.state.getSectionData(this.labModel.lab.id);case 29:(e=t.sent).ok?(n=0,e.data.map(function(section,t){section.views_count>0&&(n=t)}),r=+localStorage.currentLeaningLab,o=+localStorage.localStep,s=r===this.labModel.lab.id&&o<n?o:n,this.state.setStep(s)):this.$showMessage("danger","获取学习进度失败，请刷新页面");case 31:t.next=36;break;case 33:this.notAllowedText="请按顺序学习",this.notAllowedUrl="/courses/".concat(this.labModel.course.id),this.notAllowed=!0;case 36:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),preInit:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.labModel.lab.is_trial||"not_joined"!==this.labModel.courseUserStatus.status){t.next=4;break}return t.next=3,this.labModel.joinTrialCourse(this.labModel.course.id);case 3:this.labModel.getCourseUserStatus(this.$route.params.id);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),nextSection:function(){window.location.href=this.labModel.nextLabUrl}}}),Tn=(n(1380),Object(de.a)(En,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"lab-document"},["trial"===t.labModel.courseUserStatus.status&&t.labModel.lab.is_trial?n("trial-banner",{attrs:{"html-url":t.labModel.course.html_url}}):t._e(),t._v(" "),"live"===t.labModel.lab.type?n("live-page",{attrs:{"lab-model":t.labModel}}):"trial"!==t.labModel.courseUserStatus.status||t.labModel.lab.is_trial?t.state.isStep?n("step-document",{attrs:{state:t.state,"lab-model":t.labModel,"env-model":t.envModel,"env-ctrl-model":t.envCtrlModel,width:t.leftBoxWidth,"show-next-section-modal":function(){return t.showNextModal=!0}}}):n("single-page-document",{attrs:{"lab-model":t.labModel,"env-model":t.envModel,"env-ctrl-model":t.envCtrlModel,"lab-id":t.labModel.lab.id,"is-challenge":t.labModel.isChallenge,"is-notebook":t.labModel.isNotebook,"marked-document":t.state.markedDocument,"is-current-lab-running":t.envModel.isCurrentLabRunning,width:t.leftBoxWidth,"show-next-section-modal":function(){return t.showNextModal=!0}}}):n("trial-end-page",{attrs:{"html-url":t.labModel.course.html_url}}),t._v(" "),t.showNextModal?n("next-section-modal",{attrs:{"lab-model":t.labModel,"env-model":t.envModel,"env-ctrl-model":t.envCtrlModel,"hide-modal":function(){return t.showNextModal=!1},"show-save-vm-modal":function(){return t.showSaveVmModal=!0}}}):t._e(),t._v(" "),t.showSaveVmModal?n("save-vm-modal",{attrs:{"env-ctrl-model":t.envCtrlModel,"hide-modal":function(){return t.showSaveVmModal=!1},"back-callback":function(){return t.showNextModal=!0},"saved-callback":t.nextSection,"back-text":"返回上一步"}}):t._e(),t._v(" "),t.notAllowed?n("not-allowed",{attrs:{text:t.notAllowedText,url:t.notAllowedUrl}}):t._e()],1)},[],!1,null,"659422e8",null).exports),Dn=(Et=function(){function t(e,n){Object(Gt.a)(this,t),Object(ee.a)(this,"report",Tt,this),Object(ee.a)(this,"draft",Dt,this),this.$ajax=e,this.$urls=n}return Object(Jt.a)(t,[{key:"createReport",value:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(e){var content,n,r=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return content=r.length>1&&void 0!==r[1]?r[1]:"",t.next=3,this.$ajax.post(this.$urls.reports,{lab_id:e,draft_content:content});case 3:return(n=t.sent).ok&&(this.report=n.data),t.abrupt("return",n);case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getReport",value:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(e,n){var r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r="?lab_id=".concat(e,"&user_id=").concat(n),t.next=3,this.$ajax.get(this.$urls.reports+r);case 3:return(o=t.sent).ok&&o.data.results&&o.data.results.length&&(this.report=o.data.results[0]),t.abrupt("return",o);case 6:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"updateReport",value:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(content){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.report){t.next=4;break}return t.next=3,this.$ajax.put(this.$urls.report(this.report.id),{draft_content:content});case 3:this.report.content=content;case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"publish",value:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$ajax.put(this.$urls.reportPublish(this.report.id));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"private",value:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$ajax.put(this.$urls.reportPrivate(this.report.id));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"saveDraft",value:function(t){this.draft=t}},{key:"markedReport",get:function(){return this.report&&this.report.content?we()(this.report.content):we()(this.draft)}}]),t}(),Tt=Object(ne.a)(Et.prototype,"report",[Xt.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Dt=Object(ne.a)(Et.prototype,"draft",[Xt.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Object(ne.a)(Et.prototype,"markedReport",[Xt.c],Object.getOwnPropertyDescriptor(Et.prototype,"markedReport"),Et.prototype),Object(ne.a)(Et.prototype,"createReport",[Xt.b],Object.getOwnPropertyDescriptor(Et.prototype,"createReport"),Et.prototype),Object(ne.a)(Et.prototype,"getReport",[Xt.b],Object.getOwnPropertyDescriptor(Et.prototype,"getReport"),Et.prototype),Object(ne.a)(Et.prototype,"updateReport",[Xt.b],Object.getOwnPropertyDescriptor(Et.prototype,"updateReport"),Et.prototype),Object(ne.a)(Et.prototype,"publish",[Xt.b],Object.getOwnPropertyDescriptor(Et.prototype,"publish"),Et.prototype),Object(ne.a)(Et.prototype,"private",[Xt.b],Object.getOwnPropertyDescriptor(Et.prototype,"private"),Et.prototype),Et),Nn=(n(84),n(209)),Rn={props:{labType:{type:String,default:"guacamole_vnc"},insertToEditor:{type:Function,default:null},selector:{type:String,required:!0}},data:function(){return{showModal:!1,top:0,left:0,image:""}},methods:{show:function(){var t=document.querySelector(this.selector),e=t.clientWidth,n=t.clientHeight,r=t.offsetLeft,o=t.offsetTop;this.selector.includes("course-learning-ask-question-modal")&&(r-=28,o+=43),this.left=e+r+8,this.top=n+o+60,this.showModal=!0},getScreenshot:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){var e,n,r,o,c,l,canvas,d,h,f,v,m,y,_,w,k=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Nn.a)(this,"simplecloud");case 2:if(e=t.sent,n=e.token,r=e.key,o=e.domain,!(c=e.message)){t.next=10;break}return this.$showMessage("danger",c),t.abrupt("return",!1);case 10:l=document.querySelectorAll("#display canvas"),canvas="guacamole_vnc"===this.labType?l[0]:l[1],d=canvas.toDataURL(),h=d.substring(d.indexOf(",")+1),v=h.indexOf("="),f=v>0?h.substring(0,v):h,m=parseInt(f.length-f.length/8*2),y=btoa(r).replace(/\+/g,"-").replace(/\//g,"_"),_="https://upload.qiniup.com/putb64/".concat(m,"/key/").concat(y),(w=new XMLHttpRequest).onreadystatechange=function(){4==w.readyState&&k.insertToEditor(o+JSON.parse(w.responseText).key)},w.open("POST",_,!0),w.setRequestHeader("Content-Type","application/octet-stream"),w.setRequestHeader("Authorization","UpToken "+n),w.send(h);case 25:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),uploadImage:function(){this.$refs.image.$el.firstChild.click()},onInput:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){var e,n,r,o,c,l=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Nn.a)(this,"simplecloud");case 2:e=t.sent,n=e.token,r=e.key,o=e.domain,(c=e.message)?this.$showMessage("danger",c):Object(Nn.b)(this.image,n,r,o,function(t){l.insertToEditor(t.link)});case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},qn=(n(1381),Object(de.a)(Rn,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.showModal?n("div",{staticClass:"image-modal",style:{top:t.top+"px",left:t.left+"px"},on:{mouseleave:function(e){t.showModal=!1}}},[n("div",{staticClass:"item",on:{click:t.uploadImage}},[n("i",{staticClass:"fa fa-upload"}),t._v("\n      上传本地图片\n    ")]),t._v(" "),n("div",{staticClass:"item",on:{click:t.getScreenshot}},[n("i",{staticClass:"fa fa-cut"}),t._v("\n      环境截图\n    ")])]):t._e(),t._v(" "),n("b-form-file",{ref:"image",staticClass:"upload-image",nativeOn:{input:function(e){return t.onInput(e)}},model:{value:t.image,callback:function(e){t.image=e},expression:"image"}})],1)},[],!1,null,"78b3a632",null).exports),Un={components:{ImageModal:qn},props:{labType:{type:String,required:!0},getValue:{type:Function,required:!0},content:{type:String,required:!0},placeholder:{type:String,default:"推荐使用 markdown 语法"},onFocus:{type:Function,required:!0},onBlur:{type:Function,required:!0}},data:function(){return{insertToEditor:null}},methods:{insertImage:function(t){this.insertToEditor=t,this.$refs.modal.show()}}},Pn=(n(1382),Object(de.a)(Un,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor"},[n("markdown-editor",{attrs:{"get-value":t.getValue,content:t.content,"on-focus":t.onFocus,"on-blur":t.onBlur,"insert-image":!!/guacamole/.test(t.labType)&&t.insertImage,placeholder:t.placeholder,"format-desc":"格式说明"},nativeOn:{mouseenter:function(e){return t.onFocus(e)},mouseleave:function(e){return t.onBlur(e)}}}),t._v(" "),n("image-modal",{ref:"modal",attrs:{selector:".lab-console-report .add-image-btn","insert-to-editor":t.insertToEditor,"lab-type":t.labType}})],1)},[],!1,null,"ea88a3ba",null).exports),Bn=Object(Kt.a)({components:{Editor:Pn},props:{labType:{type:String,required:!0},lab:{type:Object,required:!0},focus:{type:Function,required:!0},blur:{type:Function,required:!0}},data:function(){return{state:new Dn(this.$ajax,this.$urls),tabs:["编辑","预览"],active:"编辑",content:"",placeholder:"报告将自动保存，推荐使用 markdown 语法：\n\n报告是您在本实验保存的笔记、截图及实验代码的完整记录，多记录学习更高效哦~",insertToEditor:null,timer:null,savedTime:null,loading:!1}},computed:{canPublish:function(){return!!this.content.length}},watch:{content:function(t){var e=this;this.state.saveDraft(t),clearTimeout(this.timer),this.timer=setTimeout(function(){e.state.report?(e.state.updateReport(t),e.savedTime=new Date):(e.state.createReport(e.lab.id,t),e.savedTime=new Date)},500)}},mounted:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.state.getReport(this.lab.id,this.$auth.user.id);case 2:this.state.report&&this.state.report.content&&(this.content=this.state.report.content);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),methods:{getContent:function(t){this.content=t},setPublic:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,this.state.publish();case 3:e=t.sent,this.loading=!1,e.ok?e.data.is_public?this.$showMessage("success","发布实验报告成功"):this.$showMessage("success","发布实验报告成功，本报告仅限老师查看"):this.$showMessage("danger",e.message||"发布实验报告失败，请重试");case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}}),$n=(n(1383),Object(de.a)(Bn,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"lab-console-report"},[t.savedTime?n("div",{staticClass:"saved-time"},[t._v("\n    保存于 "+t._s(t._f("dateTimeFormat")(t.savedTime,"HH:mm",!0))+"\n  ")]):t._e(),t._v(" "),n("ul",{staticClass:"nav nav-tabs"},t._l(t.tabs,function(e){return n("li",{key:e,staticClass:"nav-item"},[n("a",{staticClass:"nav-link",class:{active:t.active===e},on:{click:function(){return t.active=e}}},[t._v("\n        "+t._s(e)+"\n      ")])])}),0),t._v(" "),n("div",{staticClass:"tab-content"},["编辑"===t.active?n("div",{staticClass:"tab-pane active lab-report-tab"},[n("editor",{attrs:{"lab-type":t.labType,"get-value":t.getContent,content:t.content,"on-focus":t.focus,"on-blur":t.blur,placeholder:t.placeholder},nativeOn:{mouseenter:function(e){return t.focus(e)},mouseleave:function(e){return t.blur(e)}}})],1):t._e(),t._v(" "),"预览"===t.active?n("div",{staticClass:"tab-pane active viewer-tab"},[n("markdown-viewer",{attrs:{content:t.state.markedReport}})],1):t._e()]),t._v(" "),n("b-btn",{staticClass:"publish-btn",attrs:{variant:"primary",disabled:t.loading||!t.canPublish},on:{click:t.setPublic}},[n("i",{staticClass:"fa fa-share"}),t._v(" "),n("span",[t._v(t._s(t.loading?"发布中":"发布"))])])],1)},[],!1,null,"ea7cbec0",null).exports),Fn=new(Nt=Xt.b.bound,Rt=Xt.b.bound,qt=Xt.b.bound,Ut=function(){function t(){Object(Gt.a)(this,t),Object(ee.a)(this,"requestStatus",Pt,this),Object(ee.a)(this,"isMyQuestions",Bt,this),Object(ee.a)(this,"questionUrl",$t,this),Object(ee.a)(this,"cursor",Ft,this),Object(ee.a)(this,"bestQuestions",Qt,this),Object(ee.a)(this,"normalQuestions",zt,this),this.$ajax=null,this.$urls=null}return Object(Jt.a)(t,[{key:"init",value:function(t,e){this.$ajax=t,this.$urls=e}},{key:"createQuestion",value:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(data){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$ajax.post(this.$urls.questions,data);case 2:return(e=t.sent).ok&&(this.questionUrl=e.data.html_url),t.abrupt("return",e);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getQuestions",value:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(data){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.requestStatus=!0,data=Object(Yt.a)({},data,{page_size:50}),this.isMyQuestions||delete data.user_id,t.next=5,this.$ajax.get(this.$urls.questions,data);case 5:e=t.sent,this.requestStatus=!1,e.ok&&(n=e.data.results||[],data.is_selected?this.bestQuestions=n:(this.normalQuestions+""&&(n=[].concat(Object(te.a)(this.normalQuestions),Object(te.a)(n))),this.normalQuestions=n)),this.getCursor(e.data&&e.data.next);case 9:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getCursor",value:function(t){t?(this.cursor=/cursor=[^&]*/.exec(t)[0].split("=")[1],this.cursor=decodeURIComponent(this.cursor)):this.cursor=""}}]),t}(),Pt=Object(ne.a)(Ut.prototype,"requestStatus",[Xt.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Bt=Object(ne.a)(Ut.prototype,"isMyQuestions",[Xt.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),$t=Object(ne.a)(Ut.prototype,"questionUrl",[Xt.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ft=Object(ne.a)(Ut.prototype,"cursor",[Xt.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Qt=Object(ne.a)(Ut.prototype,"bestQuestions",[Xt.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),zt=Object(ne.a)(Ut.prototype,"normalQuestions",[Xt.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(ne.a)(Ut.prototype,"createQuestion",[Nt],Object.getOwnPropertyDescriptor(Ut.prototype,"createQuestion"),Ut.prototype),Object(ne.a)(Ut.prototype,"getQuestions",[Rt],Object.getOwnPropertyDescriptor(Ut.prototype,"getQuestions"),Ut.prototype),Object(ne.a)(Ut.prototype,"getCursor",[qt],Object.getOwnPropertyDescriptor(Ut.prototype,"getCursor"),Ut.prototype),Ut),Qn=Object(Kt.a)({components:{ImageModal:qn},props:{labType:{type:String,required:!0},lab:{type:Object,required:!0},setShow:{type:Function,required:!0},show:{type:Boolean,required:!0},focus:{type:Function,required:!0},blur:{type:Function,required:!0}},data:function(){return Fn.init(this.$ajax,this.$urls),{state:Fn,preview:!1,canPublish:!0,placeholder:"若想要请教同学，满足以下条件更容易获得帮助哦：\n\n 1.语气诚恳 \n 2.清晰描述你遇到的问题 \n 3.贴上相关的代码，报错信息，相关截图 \n 4.说明已经尝试过的无效方案",questionTitle:"",content:"",type:"course",insertToEditor:null,title:""}},computed:{previewBtn:function(){return this.preview?"退出预览":"预览"},question:function(){var t=null;try{t=parseInt(/\d+/.exec(this.lab.parent.html_url)[0])}catch(t){}var q={title:this.questionTitle,content:this.content,lab_id:this.lab.id,type:this.type,beans:0,course_id:t};return null===t&&delete q.course_id,q},showWarnning:function(){return this.content.length>0&&this.content.length<5}},methods:{getContent:function(t){this.content=t},publishQuestion:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.canPublish){t.next=2;break}return t.abrupt("return");case 2:this.canPublish=!1,this.state.createQuestion(this.question).then(function(t){t.ok?(e.$root.$emit("bv::show::modal","publish-success-modal"),e.setShow(!1)):e.$showMessage("danger",t.response.data.message||"发布失败"),e.canPublish=!0});case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),insertImage:function(t){this.insertToEditor=t,this.$refs.modal.show()}}}),zn=(n(1384),Object(de.a)(Qn,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{attrs:{id:"ask-question-modal","modal-class":"course-learning-ask-question-modal",visible:t.show,size:"lg","ok-title":"提交"},on:{show:function(){return t.setShow(!0)},hide:function(){return t.setShow(!1)}}},[n("div",{staticClass:"question-title"},[n("b-input",{attrs:{placeholder:"请输入帖子标题"},nativeOn:{mouseenter:function(e){return t.focus(e)},mouseleave:function(e){return t.blur(e)}},model:{value:t.questionTitle,callback:function(e){t.questionTitle=e},expression:"questionTitle"}})],1),t._v(" "),t.questionTitle.length>0&&t.questionTitle.length<5?n("div",{staticClass:"title-error"},[n("i",{staticClass:"fa fa-times-circle"}),t._v("\n    标题至少5字符\n  ")]):t._e(),t._v(" "),n("div",{staticClass:"markdown-container"},[t.preview?n("markdown-viewer",{attrs:{content:t.$marked(t.content)}}):n("markdown-editor",{attrs:{"get-value":t.getContent,content:t.content,"show-warnning":t.showWarnning,"insert-image":!!/guacamole/.test(t.labType)&&t.insertImage,"min-length":5,placeholder:t.placeholder,"format-desc":"格式说明"},nativeOn:{mouseenter:function(e){return t.focus(e)},mouseleave:function(e){return t.blur(e)}}}),t._v(" "),n("image-modal",{ref:"modal",attrs:{"insert-to-editor":t.insertToEditor,selector:".course-learning-ask-question-modal .add-image-btn","lab-type":t.labType}})],1),t._v(" "),n("template",{slot:"modal-footer"},["我要纠错"===t.title?n("div",{staticClass:"footer-link"},[t._v("\n      😀 若纠错被确认，您将得到 3 个实验豆作为奖励\n      "),n("a",{attrs:{href:"/questions/16351/",target:"_blank"}},[t._v("\n        了解详情\n      ")])]):t._e(),t._v(" "),n("div",{staticClass:"btn-container"},[n("button",{staticClass:"btn",on:{click:function(e){t.preview=!t.preview}}},[t._v("\n        "+t._s(t.previewBtn)+"\n      ")]),t._v(" "),n("button",{staticClass:"btn btn-primary",attrs:{disabled:!t.canPublish},on:{click:t.publishQuestion}},[t._v("\n        发布\n      ")])])])],2)},[],!1,null,null,null).exports),Wn=n(1136),Hn=n.n(Wn),Vn=Object(Kt.a)({data:function(){return Fn.init(this.$ajax,this.$urls),{state:Fn,qrUrl:""}},methods:{urlToQRCode:function(){var t=this;Hn.a.toDataURL("".concat(location.origin).concat(this.state.questionUrl),{width:200}).then(function(e){t.qrUrl=e}).catch(function(t){console.log(t)})}}}),Yn=(n(1385),Object(de.a)(Vn,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-modal",{attrs:{id:"publish-success-modal","modal-class":"publish-success-modal",size:"lg","hide-footer":"","cancel-title":"取消"},on:{show:t.urlToQRCode}},[n("hgroup",{staticClass:"title"},[n("h4",[t._v("\n        发布成功！你的问题被回复时你会收到站内信消息\n      ")]),t._v(" "),n("h5",[t._v("\n        你也可以扫描下面二维码分享朋友求助\n      ")])]),t._v(" "),n("img",{attrs:{src:t.qrUrl,alt:""}}),t._v(" "),n("a",{attrs:{href:t.state.questionUrl,target:"_blank"}},[t._v("\n      查看已发布帖子\n    ")])])],1)},[],!1,null,null,null).exports),Zn=Object(Kt.a)({components:{askQuestion:zn,successModal:Yn},props:{labType:{type:String,required:!0},lab:{type:Object,required:!0},focus:{type:Function,required:!0},blur:{type:Function,required:!0}},data:function(){return Fn.init(this.$ajax,this.$urls),{state:Fn,show:!1,isMyQuestions:!1}},watch:{isMyQuestions:function(){this.state.isMyQuestions=this.isMyQuestions,this.state.normalQuestions=[];var body={user_id:this.$auth.user.id,lab_id:this.lab.id};this.state.getQuestions(body)}},methods:{setShow:function(t){this.show=t}}}),Kn=(n(1386),Object(de.a)(Zn,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"operate"},[n("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.setShow(!0)}}},[t._v("\n    发布帖子\n  ")]),t._v(" "),n("b-form-group",{staticClass:"form-group"},[n("b-form-checkbox",{attrs:{name:"checkbox",value:!0},model:{value:t.isMyQuestions,callback:function(e){t.isMyQuestions=e},expression:"isMyQuestions"}},[t._v("\n      只看我的\n    ")])],1),t._v(" "),n("ask-question",{ref:"askQuestion",attrs:{"lab-type":t.labType,lab:t.lab,show:t.show,"set-show":t.setShow,focus:t.focus,blur:t.blur}}),t._v(" "),n("success-modal")],1)},[],!1,null,"38f43bd3",null).exports),Gn={props:{title:{type:String,required:!0},questionsCount:{type:Number,required:!0},questions:{type:Array,default:function(){return[]}},requestStatus:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},setLoading:{type:Function,default:null},cursor:{type:String,default:""}},data:function(){return{timer:""}},mounted:function(){var t=this;this.timer=setInterval(function(){t.listenListHeight()},800)},beforeDestroy:function(){clearInterval(this.timer)},methods:{listenListHeight:function(){var t=document.querySelector(".best-question"),e=document.querySelector(".normal-question ul");if(t&&e){var n=t.offsetHeight,r=n?220:this.title?205:157,o=window.innerHeight-r-n;e.style.height="".concat(o,"px")}},handleScroll:function(){if(this.setLoading){var t=this.$refs.list;this.loading||t.scrollTop+t.clientHeight>=t.scrollHeight&&this.cursor&&this.setLoading(!0)}}}},Jn=(n(1387),Object(de.a)(Gn,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"question-list"},[t.title?n("div",{staticClass:"list-title"},[t._v("\n    "+t._s(t.title)+"("+t._s(t.questionsCount)+")\n  ")]):t._e(),t._v(" "),t.questions.length?n("ul",{ref:"list",on:{scroll:t.handleScroll}},[t._l(t.questions,function(e,r){return n("li",{key:r,staticClass:"list-item"},[n("a",{attrs:{href:e.html_url,target:"_blank"}},[e.is_selected?n("img",{staticClass:"feature-icon",attrs:{src:"https://static.shiyanlou.com/img/icon_question/best-question.png",alt:""}}):t._e(),t._v(" "),n("p",{staticClass:"question-title is-best"},[t._v("\n          "+t._s(e.title)+"\n        ")]),t._v(" "),n("span",{staticClass:"answer-num"},[t._v(t._s(e.answers_count)+"回复")])])])}),t._v(" "),"本课精华"!==t.title?n("li",{staticClass:"load-msg"},[t.loading?n("span",[t._v("加载中...")]):n("span",[t._v("到底了~")])]):t._e()],2):n("div",{staticClass:"load-msg load-msg-vertical"},[t.requestStatus?n("span",[t._v("加载中...")]):n("span",[t._v("暂无相关帖子~")])])])},[],!1,null,"5fd8fa79",null).exports),Xn=Object(Kt.a)({components:{questionList:Jn},props:{questionsCount:{type:Number,required:!0}},data:function(){return Fn.init(this.$ajax,this.$urls),{state:Fn,title:"本课精华",courseId:this.$route.params.id}},mounted:function(){this.state.getQuestions({is_selected:1,course_id:this.courseId})}}),er=(n(1388),Object(de.a)(Xn,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"best-question"},[!this.state.isMyQuestions&&this.state.bestQuestions.length?e("question-list",{attrs:{"question-type":"best",title:this.title,questions:this.state.bestQuestions,"questions-count":this.questionsCount}}):this._e()],1)},[],!1,null,"51d37e30",null).exports),nr=Object(Kt.a)({components:{questionList:Jn},props:{labId:{type:Number,required:!0},questionsCount:{type:Number,required:!0}},data:function(){return Fn.init(this.$ajax,this.$urls),{state:Fn,loading:!1}},mounted:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.state.getQuestions({lab_id:this.labId});case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),watch:{loading:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e||!this.state.cursor){t.next=4;break}return t.next=3,this.state.getQuestions({lab_id:this.labId,cursor:this.state.cursor,user_id:this.$auth.user.id});case 3:t.sent;case 4:this.loading=!1;case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},methods:{setLoading:function(t){this.state.cursor&&(this.loading=t)}}}),rr=(n(1389),Object(de.a)(nr,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"normal-question"},[e("question-list",{attrs:{"question-type":"normal",title:this.state.isMyQuestions?"":"本节帖子",loading:this.loading,cursor:this.state.cursor,questions:this.state.normalQuestions,"request-status":this.state.requestStatus,"set-loading":this.setLoading,"questions-count":this.questionsCount}})],1)},[],!1,null,"91301d3e",null).exports),sr=Object(Kt.a)({components:{operate:Kn,bestQuestion:er,normalQuestion:rr},props:{labType:{type:String,required:!0},focus:{type:Function,required:!0},blur:{type:Function,required:!0},lab:{type:Object,required:!0},selectedQuestionsCount:{type:Number,required:!0}},data:function(){return Fn.init(this.$ajax,this.$urls),{state:Fn,timer:""}},mounted:function(){var t=this;this.timer=setInterval(function(){t.setModalWith()},100)},beforeDestroy:function(){clearInterval(this.timer)},methods:{setModalWith:function(){var t=document.querySelector(".lab-operation .left-box"),e=document.querySelector(".lab-question .modal-backdrop"),n=document.querySelector(".lab-question .modal");t&&e&&n&&(e.style.width=t.style.width,n.style.width="".concat(parseFloat(t.style.width)-30,"px"))}}}),ar=(n(1390),n(1391),Object(de.a)(sr,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"lab-question"},[n("operate",{attrs:{"lab-type":t.labType,lab:t.lab,focus:t.focus,blur:t.blur}}),t._v(" "),n("best-question",{attrs:{"questions-count":t.selectedQuestionsCount}}),t._v(" "),n("normal-question",{attrs:{"lab-id":t.lab.id,"questions-count":t.lab.questions_count}})],1)},[],!1,null,"24a59a0a",null).exports),ir=(Wt=Xt.b.bound,Ht=function(){function t(e,n,r){Object(Gt.a)(this,t),this.courseId=e,this.$ajax=n,this.$urls=r}return Object(Jt.a)(t,[{key:"getRank",value:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n="louplus"===e?this.$urls.louplusStudentsRank:this.$urls.courseTopStudents,t.next=3,this.$ajax.get(n(this.courseId));case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),t}(),Object(ne.a)(Ht.prototype,"getRank",[Wt],Object.getOwnPropertyDescriptor(Ht.prototype,"getRank"),Ht.prototype),Ht),or=(n(52),n(53),{props:{courseType:{type:String,required:!0},items:{type:Array,required:!0},updatedAt:{type:String,default:(new Date).toString()}},data:function(){return{rankType:"total_study_minutes",radioOptions:[{text:"有效学习时间排名",value:"total_study_minutes"},{text:"挑战PASS排名",value:"challenge_progress"}]}},computed:{fields:function(){return"louplus"===this.courseType?[{key:"index",label:"排名"},{key:"student",label:"用户"},{key:"student_group",label:"组号"},{key:"progress",label:"学习进度"},{key:"challenge_progress",label:"PASS进度"},{key:"current_stage_study_minutes",label:"本周有效学习时间"},{key:"total_study_minutes",label:"总有效学习时间"}]:[{key:"index",label:"排名"},{key:"student",label:"用户"},{key:"study_minutes",label:"有效学习时间"}]},sortedItems:function(){var t=this,e=this.items;return"louplus"===this.courseType?e.sort(function(a,b){return"challenge_progress"===t.rankType?parseInt(b.challenge_progress.statistics)-parseInt(a.challenge_progress.statistics):b.total_study_minutes-a.total_study_minutes}):e}}}),cr=(n(1392),Object(de.a)(or,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"rank-table"},[n("div",{staticClass:"rank-header vertical-center"},[n("span",{staticClass:"latest-update"},[t._v("\n      更新时间："+t._s(t._f("dateTimeFormat")(t.updatedAt,"YYYY-MM-DD HH:mm:ss",!0))+"\n    ")]),t._v(" "),"louplus"===t.courseType?n("b-form-radio-group",{staticClass:"tabs",attrs:{options:t.radioOptions,buttons:"","button-variant":"outline-primary",size:"sm"},model:{value:t.rankType,callback:function(e){t.rankType=e},expression:"rankType"}}):t._e()],1),t._v(" "),t.items.length?n("b-table",{staticClass:"rank-list",attrs:{striped:"",fields:t.fields,items:t.sortedItems},scopedSlots:t._u([{key:"index",fn:function(data){return[n("span",[t._v(" "+t._s(data.index+1))])]}},{key:"student",fn:function(data){return[n("p",{staticClass:"no-margin vertical-center"},[n("user-avatar",{attrs:{user:data.value,width:32,height:32}}),t._v("  \n        "),n("user-name",{attrs:{user:data.value}})],1)]}},{key:"progress",fn:function(data){return["louplus"===t.courseType&&data.value.farthest_lab.name?n("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"最远学习："+data.value.farthest_lab.lab_stage.name+" - "+data.value.farthest_lab.name}},[t._v("\n        "+t._s(data.value.statistics)+"\n      ")]):n("span",[t._v("\n        "+t._s(data.value.statistics)+"\n      ")])]}},{key:"challenge_progress",fn:function(data){return[n("span",[t._v(t._s(data.value.statistics))])]}},{key:"current_stage_study_minutes",fn:function(data){return[n("span",[t._v(t._s(data.value)+" 分钟")])]}},{key:"total_study_minutes",fn:function(data){return[n("span",[t._v(t._s(data.value)+" 分钟")])]}}],null,!1,1328486695)}):n("p",{staticClass:"text-center color-texts"},[t._v("\n    暂无排名\n  ")])],1)},[],!1,null,"e06b80fa",null).exports),lr=Object(Kt.a)({components:{RankTable:cr},props:{courseType:{type:String,required:!0}},data:function(){return{state:new ir(this.$route.params.id,this.$ajax,this.$urls),rankItems:[],updatedAt:""}},mounted:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){var e,content,dialog;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.state.getRank(this.courseType);case 2:(e=t.sent).ok&&(this.updatedAt=e.data.updated_at||new Date,"louplus"===this.courseType?(this.rankItems=e.data.items,(content=document.querySelector("#course-learning-users-rank .modal-content"))&&(content.style.width="880px"),(dialog=document.querySelector("#course-learning-users-rank .modal-dialog"))&&(dialog.style.maxWidth="880px")):this.rankItems=e.data);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),methods:{show:function(){this.$refs.modal.show()}}}),ur=(n(1393),Object(de.a)(lr,function(){var t=this.$createElement,e=this._self._c||t;return e("b-modal",{ref:"modal",attrs:{id:"course-learning-users-rank",size:"lg","hide-footer":""}},[e("h4",[this._v("\n    课程学习排名\n  ")]),this._v(" "),e("rank-table",{attrs:{items:this.rankItems,"course-type":this.courseType,"updated-at":this.updatedAt}})],1)},[],!1,null,"37f60bd2",null).exports),dr=(n(561),{props:{lab:{type:Object,default:function(){return{}}},labUserStatus:{type:Object,default:function(){return{}}},isStageOpen:{type:Boolean,default:!0},isCurrentLab:{type:Boolean,default:!1},isCourseJoined:{type:Boolean,default:!1},specificOrderIndex:{type:Number,default:0}},data:function(){return{labCanAccess:!0}},computed:{isLive:function(){return"live"===this.lab.type},isTrial:function(){return this.lab.is_trial},isChallenge:function(){return"course_challenge"===this.lab.type},isClassic:function(){return"classic"===this.lab.type},specificLab:function(){return this.lab.specific_lab},specificStatus:function(){return this.labUserStatus.specific_status||{}},labAccessed:function(){return this.specificStatus.is_learned||this.specificStatus.is_watched},orderIndexText:function(){return this.isClassic?"实验 ".concat(this.specificOrderIndex+1):this.isChallenge?"挑战 ".concat(this.specificOrderIndex+1):"直播 ".concat(this.specificOrderIndex+1)}},watch:{specificStatus:function(t){this.labCanAccess=t.can_read||t.can_start||t.can_watch}},methods:{switchToLab:function(){if(this.isStageOpen&&!this.isCurrentLab){var t=this.lab.parent.html_url;this.isCourseJoined?this.labCanAccess&&(window.location.href="".concat(t,"/learning/?id=").concat(this.lab.id)):window.location.href="".concat(t,"/learning/?id=").concat(this.lab.id)}}}}),pr=(n(1397),{components:{LabItem:Object(de.a)(dr,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"lab-item pointer",class:{"lab-locked":!t.isStageOpen},on:{click:t.switchToLab}},[r("div",{staticClass:"item-top flex space-between",class:[t.isCurrentLab?"color-primary bold":"color-text"]},[r("div",{staticClass:"top-left vertical-center"},[r("span",{staticClass:"inline-block lab-icon"},[t.isCurrentLab?[t.isChallenge?r("img",{attrs:{src:n(1394),alt:"lab-challenge"}}):t._e(),t._v(" "),t.isLive?r("img",{attrs:{src:n(1395),alt:"lab-live"}}):t._e(),t._v(" "),t.isClassic?r("img",{attrs:{src:n(1396),alt:"lab-classic"}}):t._e()]:[t.isChallenge?r("img",{attrs:{src:n(1307),alt:"lab-challenge"}}):t._e(),t._v(" "),t.isLive?r("img",{attrs:{src:n(1308),alt:"lab-live"}}):t._e(),t._v(" "),t.isClassic?r("img",{attrs:{src:n(1309),alt:"lab-classic"}}):t._e()]],2),t._v(" "),r("span",{staticClass:"inline-block lab-index",class:[t.isCurrentLab?"color-primary bold":"color-999"]},[t._v("\n        "+t._s(t.orderIndexText)+"\n      ")]),t._v(" "),r("span",{staticClass:"inline-block lab-name",attrs:{title:t.lab.name}},[t._v("\n        "+t._s(t.lab.name)+"\n      ")])]),t._v(" "),r("div",{staticClass:"top-right"},[t.isStageOpen?[t.isCourseJoined?[t.labCanAccess?[t.labAccessed?r("img",{attrs:{src:n(1231),alt:"已学习"}}):r("img",{attrs:{src:n(1257),alt:"未学习"}})]:[r("span",{staticClass:"ordered-lab",attrs:{title:"按序学习"}},[t._v(" ")])]]:t.isTrial?[r("span",{staticClass:"trial-lab font-12"},[t._v("免费试学")])]:t._e()]:[r("span",{staticClass:"locked-lab",attrs:{title:"实验未开放"}},[t._v(" ")])]],2)]),t._v(" "),t.isLive?r("div",{staticClass:"item-bottom"},[r("p",{staticClass:"live-notice no-margin font-12"},[t._v("\n      直播时间: "+t._s(t._f("dateTimeFormat")(t.lab.live?t.lab.live.open_at:t.specificLab.open_at))+"\n    ")])]):t._e()])},[],!1,null,"5c68598e",null).exports},props:{course:{type:Object,default:function(){return{}}},stage:{type:Object,default:function(){return{}}},labsUserStatus:{type:Array,default:function(){return[]}},orderIndex:{type:Number,default:0},isSingleStage:{type:Boolean,default:!1},isActiveStage:{type:Boolean,default:!1},currentLabId:{type:Number,default:-1},isCourseJoined:{type:Boolean,default:!1},getSpecificOrderIndex:{type:Function,default:null}},data:function(){return{showStage:!1}},computed:{isStageOpen:function(){return this.stage.is_open},isCourseAuthor:function(){return this.course.teacher.id===this.$auth.user.id},permissionTeacher:function(){return!!this.$auth.loggedIn&&(this.$auth.user.labels.includes("course_teacher")||this.isCourseAuthor)}},mounted:function(){this.isActiveStage&&(this.showStage=!0)},methods:{showStageBody:function(){this.showStage=!this.showStage},isCurrentLab:function(t){return this.currentLabId===t.id},getOrderIndex:function(t){return this.getSpecificOrderIndex&&this.getSpecificOrderIndex(t)}}}),fr=(n(1398),Object(de.a)(pr,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"chapter-stage collapse-item",class:{"with-header":!t.isSingleStage}},[t.isSingleStage?t._e():r("div",{staticClass:"stage-header flex space-between vertical-center"},[r("div",{staticClass:"stage-index"},[t._v("\n      阶段 "+t._s(t.orderIndex)+"\n    ")]),t._v(" "),r("div",{staticClass:"stage-name-outter font-18 flex space-between",on:{click:t.showStageBody}},[r("div",[r("span",{staticClass:"stage-name inline-block"},[t._v(t._s(t.stage.description))]),t._v(" "),t.isStageOpen?t._e():r("span",{staticClass:"locked"},[t._v("(未开放)")])]),t._v(" "),r("i",{staticClass:"icon-arrow inline-block",class:{active:t.showStage}},[r("img",{attrs:{src:n(577),alt:"展开"}})])])]),t._v(" "),r("b-collapse",{staticClass:"stage-body",attrs:{id:"collapse-stage-"+t.orderIndex},model:{value:t.showStage,callback:function(e){t.showStage=e},expression:"showStage"}},[t._l(t.stage.labs,function(e,n){return r("lab-item",{key:n,attrs:{lab:e,"is-stage-open":t.isStageOpen||t.permissionTeacher,"is-current-lab":t.isCurrentLab(e),"lab-user-status":t.labsUserStatus[n],"is-course-joined":t.isCourseJoined,"specific-order-index":t.getOrderIndex(e)||0}})}),t._v(" "),r("br")],2)],1)},[],!1,null,"58426d58",null).exports),vr=Object(Kt.a)({props:{state:{type:Object,default:function(){return{}}}},components:{LabStage:fr},computed:{isSingleStage:function(){return 1===this.state.labStages.length},currentLabId:function(){return this.state.lab.id},stagesLabsIds:function(){return this.state.labStages.map(function(t){return t.labs.map(function(t){return t.id})})},activeStageIndex:function(){var t=this;return this.stagesLabsIds.findIndex(function(e){return e.includes(t.currentLabId)})},remainDays:function(){return this.state.courseUserStatus.remain_days||0},courseOpened:function(){return Date.now()>new Date(this.state.course.open_time)},courseEnded:function(){return Date.now()>new Date(this.state.course.end_time)},isBootcamp:function(){return this.courseFeeTypeIs("bootcamp")},isLouplus:function(){return this.courseFeeTypeIs("louplus")},isExpired:function(){return"expired"===this.state.courseUserStatus.status},expiredAt:function(){return this.state.courseUserStatus.expired_at},isCourseJoined:function(){return!["not_joined","trial","disable"].includes(this.state.courseUserStatus.status)},courseWithCertificate:function(){return this.state.course.has_certificate},isPremiumMember:function(){return"premium"===this.$auth.user.member_type},courseLabs:function(){var t=[];return this.state.labStages.map(function(e){t=[].concat(Object(te.a)(t),Object(te.a)(e.labs))}),t},liveLabs:function(){return this.courseLabs.filter(function(t){return"live"===t.type})},classicLabs:function(){return this.courseLabs.filter(function(t){return"classic"===t.type})},challengeLabs:function(){return this.courseLabs.filter(function(t){return"course_challenge"===t.type})}},methods:{getStageLabsUserStatus:function(t){var e=t.labs.map(function(t){return t.id});return this.state.labsUserStatus.filter(function(t){return e.includes(t.lab_id)})},isActiveStage:function(t){return this.activeStageIndex===t},daysToDate:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=t?new Date(t):new Date;return parseInt((e-Date.now())/1e3/60/60/24)},courseFeeTypeIs:function(t){return this.state.course.fee_type===t},realProgressPercentage:function(progress){return progress.studied_labs_count/progress.total_labs_count},realProgressRate:function(progress){return progress.rate},learnCompletion:function(progress){return 1===this.realProgressPercentage(progress)},getSpecificOrderIndex:function(t){var e=t.type,n=t.id;return"classic"===e?this.classicLabs.findIndex(function(t){return t.id===n}):"course_challenge"===e?this.challengeLabs.findIndex(function(t){return t.id===n}):"live"===e?this.liveLabs.findIndex(function(t){return t.id===n}):0}}}),mr=(n(1399),Object(de.a)(vr,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"course-labs-panel customize-modal text-right"},[r("div",{staticClass:"modal-content-wrapper modal-labs-box inline-block text-left"},[r("div",{staticClass:"modal-content content-box"},[r("div",{staticClass:"box-header progress-info",class:{"no-margin":t.isSingleStage}},[r("p",{staticClass:"progress-desc font-18"},[t._v("\n          目前已完成 "+t._s(""+t.realProgressRate(t.state.courseUserStatus.progress))+" 个章节的学习\n        ")]),t._v(" "),r("div",{staticClass:"progress-graph flex space-between vertical-center"},[r("div",{staticClass:"progress-bar-outter relative"},[t.learnCompletion(t.state.courseUserStatus.progress)?t._e():r("span",{staticClass:"progress-percentage-label font-12",style:{left:100*t.realProgressPercentage(t.state.courseUserStatus.progress)+"%"}},[t._v("\n              "+t._s(parseInt(100*t.realProgressPercentage(t.state.courseUserStatus.progress)))+"%\n            ")]),t._v(" "),r("b-progress",{attrs:{variant:"primary learn-progress-bar",height:"5px"}},[r("b-progress-bar",{attrs:{value:100*t.realProgressPercentage(t.state.courseUserStatus.progress)}})],1)],1),t._v(" "),t.courseWithCertificate?[t.learnCompletion(t.state.courseUserStatus.progress)?[t.state.courseUserStatus.cert_html_url?r("nuxt-link",{attrs:{to:t.state.courseUserStatus.cert_html_url,target:"_blank"}},[r("img",{staticClass:"certificate-img",attrs:{id:"certificate-img",src:n(1185),alt:"学习证书"}})]):r("img",{staticClass:"certificate-img",attrs:{id:"certificate-img",src:n(1185),alt:"学习证书"}})]:r("img",{staticClass:"certificate-img",attrs:{id:"certificate-img",src:n(1256),alt:"学习证书"}})]:t._e(),t._v(" "),r("b-tooltip",{attrs:{target:"certificate-img",placement:"bottom",offset:"-75"}},[t.learnCompletion(t.state.courseUserStatus.progress)?r("span",{staticClass:"font-12"},[t.state.courseUserStatus.cert_html_url?[t._v("\n                恭喜你获得完整证书，点击可查看分享\n              ")]:[t._v("\n                您已学完本课程，证书稍后将发放到您的账户\n              ")]],2):r("span",{staticClass:"font-12"},[t._v("完成全部章节即可获得完课证书")])])],2),t._v(" "),(t.isBootcamp||t.isLouplus)&&t.isCourseJoined?r("p",{staticClass:"progress-hint font-12 no-margin"},[t.isExpired?[t._v("\n            (课程已于 "+t._s(t._f("dateTimeFormat")(t.expiredAt,"YYYY-MM-DD",!0))+" 到期)\n          ")]:[t.isBootcamp?[t.isPremiumMember?t._e():[t._v("\n                (距离课程到期还有 "+t._s(t.remainDays)+" 天，请抓紧时间学习)\n              ")]]:[t.courseOpened?t.courseEnded?[t._v("\n                (距离课程到期还有 "+t._s(t.remainDays)+" 天，请抓紧时间学习)\n              ")]:[t._v("\n                (距离结课还有 "+t._s(t.daysToDate(t.state.course.end_time))+" 天，请尽最大努力跟上进度)\n              ")]:[t._v("\n                (距离开课 "+t._s(t.daysToDate(t.state.course.open_time))+" 天，请尽快完成课程准备)\n              ")]]]],2):t._e()]),t._v(" "),r("div",{staticClass:"box-body chapter-stages"},t._l(t.state.labStages,function(e,n){return r("lab-stage",{key:n,attrs:{stage:e,"order-index":n,course:t.state.course,"is-single-stage":t.isSingleStage,"is-active-stage":t.isActiveStage(n),"current-lab-id":t.currentLabId,"is-course-joined":t.isCourseJoined,"labs-user-status":t.getStageLabsUserStatus(e),"get-specific-order-index":t.getSpecificOrderIndex}})}),1)])])])},[],!1,null,"23e30aba",null).exports),gr={props:{getContent:{type:Function,required:!0},content:{type:String,required:!0},showWarnning:{type:Boolean,default:!1},minLength:{type:Number,default:5},placeholder:{type:String,default:"请输入正文，推荐使用markdown语法"}}},yr=(n(1400),{components:{AskEditor:Object(de.a)(gr,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-tabs",{staticClass:"lab-console-editor",attrs:{lazy:""}},[n("b-tab",{staticClass:"editor-tab",attrs:{title:"编辑",active:""}},[n("markdown-editor",{attrs:{"get-value":t.getContent,content:t.content,"show-warnning":t.showWarnning,"min-length":t.minLength,placeholder:t.placeholder}})],1),t._v(" "),n("b-tab",{staticClass:"editor-tab",attrs:{title:"预览"}},[n("markdown-viewer",{staticClass:"viewer",attrs:{content:t.$marked(t.content)}})],1)],1)},[],!1,null,null,null).exports},props:{lab:{type:Object,required:!0},setCanInput:{type:Function,required:!0}},data:function(){return{questionTitle:"",content:""}},computed:{question:function(){var t=null;try{t=parseInt(/\d+/.exec(this.lab.parent.html_url)[0])}catch(t){}var q={title:this.questionTitle,content:this.content,lab_id:this.lab.id,type:"course_error",beans:0,course_id:t};return null===t&&delete q.course_id,q}},methods:{getContent:function(t){this.content=t},publishQuestion:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$ajax.post(this.$urls.questions,this.question);case 2:e=t.sent,this.$emit("bv::hide::modal","ask-question-modal"),e.ok?(this.questionTitle="",this.content="",this.$actionMessage(e.ok,"发布")):this.$showMessage("danger",e.response.data&&e.response.data.message||"发布失败，请稍后重试");case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),show:function(){this.$refs.modal.show()},hide:function(){this.$refs.modal.hide()}}}),_r=(n(1401),Object(de.a)(yr,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"modal",attrs:{id:"doc-recovery-modal",title:"文档纠错",size:"lg","ok-title":"提交","cancel-title":"取消"},on:{show:function(){return t.setCanInput(!1)},hide:function(){return t.setCanInput(!0)},ok:t.publishQuestion}},[n("div",{staticClass:"question-title"},[n("b-input",{model:{value:t.questionTitle,callback:function(e){t.questionTitle=e},expression:"questionTitle"}})],1),t._v(" "),t.questionTitle.length>0&&t.questionTitle.length<5?n("div",{staticClass:"title-error"},[n("i",{staticClass:"fa fa-times-circle"}),t._v("\n    标题最少输入 5 字符\n  ")]):t._e(),t._v(" "),n("ask-editor",{attrs:{"get-content":t.getContent,content:t.content}}),t._v(" "),t.content.length>0&&t.content.length<5?n("div",{staticClass:"content-error"},[n("i",{staticClass:"fa fa-times-circle"}),t._v("\n    正文最少输入 5 字符\n  ")]):t._e(),t._v(" "),n("div",{staticClass:"footer-link"},[t._v("\n    😀 若纠错被确认，您将得到 3 个实验豆作为奖励\n    "),n("a",{attrs:{href:"/questions/16351/",target:"_blank"}},[t._v("\n      了解详情\n    ")])])],1)},[],!1,null,"1e522505",null).exports),wr={props:{value:{type:Boolean,required:!0}},watch:{value:function(t){t?this.$refs.wxServiceModal.show():this.$refs.wxServiceModal.hide()}},methods:{changeState:function(t){this.$emit("input",t)}}},kr=(n(1403),Object(de.a)(wr,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"wx-service-modal-root"},[r("b-modal",{ref:"wxServiceModal",attrs:{"hide-footer":"",centered:"",size:"lg","header-border-variant":"none"},on:{show:function(e){return t.changeState(!0)},hidden:function(e){return t.changeState(!1)}}},[r("div",{staticClass:"wx-service-container"},[r("div",{staticClass:"header"},[t._v("\n        关注实验楼服务号，手机上看教程，更可获得最新免费课程上线提醒！\n      ")]),t._v(" "),r("div",{staticClass:"qr-container"},[r("img",{staticClass:"qr-code",attrs:{src:n(1402),alt:""}})])])])],1)},[],!1,null,"4c89ebd0",null).exports),Cr=function(){function t(e){Object(Gt.a)(this,t),this.storage=e}return Object(Jt.a)(t,[{key:"setItem",value:function(t,data){data&&this.storage.setItem(t,"string"==typeof data?data:JSON.stringify(data))}},{key:"getItem",value:function(t){var e=this.storage.getItem(t);if(""!==e&&null!==e){var n;try{n=JSON.parse(e)}catch(t){n=e}return n}}},{key:"removeItem",value:function(t){this.storage.removeItem(t)}},{key:"key",value:function(t){return this.storage.key(t)}},{key:"clear",value:function(){return this.storage.clear()}},{key:"length",get:function(){return this.storage.length}}]),t}(),xr=function(){function t(e){Object(Gt.a)(this,t),this._time=jn()(e)}return Object(Jt.a)(t,null,[{key:"now",value:function(){return+jn.a.utc().add(t.getTimeZoneOffset(),"hours")}},{key:"timeInterval",value:function(t,e){var n=Date.now(),r=function(t){return"string"==typeof t?+jn()(t):t};return n>r(t)&&n<r(e)}},{key:"getTimeZoneOffset",value:function(){return(new Date).getTimezoneOffset()/60}},{key:"getZeroTime",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=jn()(jn()().add(t,"day").format("YYYY-MM-DD"));return e?+n:n}}]),Object(Jt.a)(t,[{key:"compare",value:function(time,t){return"less"===t?this.timeStamp<time:this.timeStamp>time}},{key:"format",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"YYYY-MM-DD hh:mm:ss";return this._time.format(t)}},{key:"timeStamp",get:function(){return+this._time}},{key:"time",set:function(time){this._time=time},get:function(){return this._time}}],[{key:"sleep",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return new Promise(function(n){return setTimeout(function(){return n(e())},t)})}}]),t}();xr.MILLISECOND=1,xr.SECOND=1e3*xr.MILLISECOND,xr.MINUTE=60*xr.SECOND,xr.HOUR=60*xr.MINUTE,xr.DAY=24*xr.HOUR,xr.MONTH=30*xr.DAY,xr.Year=12*xr.MONTH;var Mr,Sr,jr,Or,Ar,Lr,Ir,Er,Tr,Dr=n(1404),Nr=n.n(Dr),Rr=(new Nr.a).update("exec-every-day").digest("hex"),qr=function(){function t(){Object(Gt.a)(this,t),this.localStorage=new Cr(localStorage),this._init()}return Object(Jt.a)(t,[{key:"_init",value:function(){this.localStorage.getItem(Rr)||this._plant(0)}},{key:"_plant",value:function(t){this.localStorage&&this.localStorage.setItem(Rr,{expire:xr.getZeroTime(t,!0),keyList:[]})}},{key:"_flushKeyList",value:function(){var t=this.localStorage.getItem(Rr);t.keyList=[],this.localStorage.setItem(Rr,t)}},{key:"_isExpire",value:function(){if(this.localStorage){var t=this.localStorage.getItem(Rr);if(t){var e=t.expire;return new xr(Date.now()).compare(e,"great")}}}},{key:"_isExecuted",value:function(t){var e=this.localStorage.getItem(Rr);if(e)return e.keyList.includes(t)}},{key:"_recordTaskKey",value:function(t){var e=this.localStorage.getItem(Rr),n=[].concat(Object(te.a)(e.keyList),[t]);this.localStorage.setItem(Rr,Object(Yt.a)({},e,{keyList:n}))}},{key:"limitFunc",value:function(t,e){this._isExpire()?(e(),this._plant(1),this._recordTaskKey(t)):this._isExecuted(t)||(e(),this._recordTaskKey(t))}}]),t}(),Ur=new qr,Pr=Object(Kt.a)(Object(ce.a)({components:{WxService:kr,LeftBox:he,LabReport:$n,CourseLabs:mr,LabDocument:Tn,LabQuestion:ar,UsersTopModal:ur,DocRecoveryModal:_r},props:{state:{type:Object,required:!0},setShowTip:{type:Function,required:!0}},data:function(){return{labModel:this.state.labModel,name:this.state.labModel.lab.name,showLabsPanel:!1,tabs:[{name:"document",text:"步骤",icon:n(1263),iconActive:n(1264)},{name:"report",text:"报告",icon:n(1416),iconActive:n(1417)},{name:"question",text:"讨论",icon:n(1418),iconActive:n(1419)}],active:"document",showGuidePopover:!1,showDocPopover:!1,showLevelPopover:!1,isWxServiceModalShow:!1}},destroyed:function(){window.removeEventListener("click",this.handleDocClick)},mounted:function(){this.labModel.isContest&&(this.tabs=[{name:"document",text:"步骤",icon:n(1263),iconActive:n(1264)}]),window.addEventListener("click",this.handleDocClick)},methods:{handleWxServiceClick:function(){this.isWxServiceModalShow=!0},handleDocClick:function(t){var e=t.target;e.closest(".modal-labs-box")||e.closest(".sections-list-btn")||(this.showLabsPanel=!1)},setActive:function(t){this.active=t},showUsersTopModal:function(){this.$refs.usersTopModal.show()},handleReportFocus:function(){this.state.envCtrlModel.setInputEnabled(!1)},handleReportBlur:function(){this.state.envCtrlModel.setInputEnabled(!0)},titleEnter:function(){this.name=this.labModel.course.name},titleLeave:function(){this.name=this.labModel.lab.name},showGuide:function(){delete window.localStorage.showTip,this.setShowTip(!0)},popWxServiceModal:function(){var t=this,e="free"===this.labModel.course.fee_type,n=this.$auth,r=n.user;n.loggedIn&&!this.$auth.isMember&&e&&!r.is_subscribe_mp&&Ur.limitFunc("wx-service-pop-key",function(){return t.isWxServiceModalShow=!0})}}},"mounted",function(){this.popWxServiceModal()})),Br=Pr,$r=(n(1420),Object(de.a)(Br,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"section-box-root"},[r("wx-service",{model:{value:t.isWxServiceModalShow,callback:function(e){t.isWxServiceModalShow=e},expression:"isWxServiceModalShow"}}),t._v(" "),r("left-box",{attrs:{width:t.state.labModel.leftBoxWidth,"hide-left-bar":!!t.labModel.course.support_embed}},[r("div",{staticClass:"top-bar",attrs:{slot:"top-bar"},slot:"top-bar"},[t.labModel.course.support_embed?t._e():r("a",{staticClass:"home-btn",attrs:{href:t.labModel.course.html_url}},[r("img",{attrs:{src:n(1254)}})]),t._v(" "),r("span",{staticClass:"course-name",on:{mouseenter:t.titleEnter,mouseleave:t.titleLeave}},[t._v("\n        "+t._s(t.name)+"\n      ")]),t._v(" "),t.labModel.isContest?t._e():r("div",{staticClass:"sections-list-btn",on:{click:function(e){t.showLabsPanel=!t.showLabsPanel}}},[r("img",{attrs:{src:n(1356)}}),t._v("\n        章节列表\n      ")])]),t._v(" "),r("div",{staticClass:"left-bar",attrs:{slot:"left-bar"},slot:"left-bar"},[r("div",{staticClass:"menu-tabs"},t._l(t.tabs,function(e){return r("div",{key:e.name,staticClass:"item font-16",class:{active:e.name===t.active},on:{click:function(n){return t.setActive(e.name)}}},[t._v("\n          "+t._s(e.text)+"\n        ")])}),0),t._v(" "),r("div",{staticClass:"menu-btns"},[["louplus","private"].includes(t.state.labModel.course.fee_type)?r("div",{staticClass:"item",on:{click:t.showUsersTopModal}},[r("img",{attrs:{src:n(1357)}})]):t._e(),t._v(" "),r("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.right",modifiers:{right:!0}}],staticClass:"item",attrs:{title:"新手指南"},on:{click:t.showGuide}},[r("img",{attrs:{src:n(1358)}})]),t._v(" "),r("div",{staticClass:"item",attrs:{title:"服务号"},on:{click:t.handleWxServiceClick}},[r("img",{attrs:{src:n(579)}})]),t._v(" "),t.labModel.isContest?t._e():r("div",{directives:[{name:"b-modal",rawName:"v-b-modal.doc-recovery-modal",modifiers:{"doc-recovery-modal":!0}}],staticClass:"item"},[r("img",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.right",modifiers:{right:!0}}],attrs:{src:n(1359),title:"纠错"}})]),t._v(" "),r("div",{staticClass:"item",on:{mouseenter:function(e){t.showLevelPopover=!0},mouseleave:function(e){t.showLevelPopover=!1}}},[r("img",{attrs:{src:n(1360)}}),t._v(" "),t.showLevelPopover?r("div",{staticClass:"level-popover"},[t._v("\n            "+t._s(t.$auth.user.level)+"楼 | 距\n            "),r("span",[t._v("\n              "+t._s(t.$auth.user.level+1)+"楼\n            ")]),t._v("\n            还需\n            "),r("span",[t._v("\n              "+t._s(30-t.$auth.user.study_minutes%30)+"分钟\n            ")]),t._v("\n            有效学习时间\n          ")]):t._e()])])]),t._v(" "),r("template",{slot:"content"},[r("lab-document",{directives:[{name:"show",rawName:"v-show",value:"document"===t.active,expression:"active === 'document'"}],attrs:{"lab-model":t.state.labModel,"env-model":t.state.envModel,"env-ctrl-model":t.state.envCtrlModel,"left-box-width":t.state.labModel.leftBoxWidth}}),t._v(" "),r("lab-report",{directives:[{name:"show",rawName:"v-show",value:"report"===t.active,expression:"active === 'report'"}],attrs:{"lab-type":t.state.envModel.labType,lab:t.state.labModel.lab,focus:t.handleReportFocus,blur:t.handleReportBlur}}),t._v(" "),r("lab-question",{directives:[{name:"show",rawName:"v-show",value:"question"===t.active,expression:"active === 'question'"}],attrs:{"lab-type":t.state.envModel.labType,focus:t.handleReportFocus,blur:t.handleReportBlur,lab:t.state.labModel.lab,"selected-questions-count":t.state.labModel.course.selected_questions_count||0}}),t._v(" "),["louplus","private"].includes(t.state.labModel.course.fee_type)?r("users-top-modal",{ref:"usersTopModal",attrs:{task:t.state.envModel.task,"course-type":t.state.labModel.course.fee_type||""}}):t._e(),t._v(" "),t.labModel.lab?r("doc-recovery-modal",{attrs:{lab:t.labModel.lab,"set-can-input":t.state.envCtrlModel.setInputEnabled}}):t._e()],1),t._v(" "),t.labModel.isContest?t._e():r("template",{slot:"container-content"},[r("course-labs",{directives:[{name:"show",rawName:"v-show",value:t.showLabsPanel,expression:"showLabsPanel"}],attrs:{state:t.labModel}})],1)],2)],1)},[],!1,null,"00d8b544",null)),Fr=$r.exports,Qr={props:{width:{type:Number,default:function(){return.65*window.innerWidth}}},computed:{widthStr:function(){return this.width+"px"}}},zr=Qr,Wr=(n(1421),Object(de.a)(zr,function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"right-box",style:{width:this.widthStr}},[this._t("default")],2)},[],!1,null,"531a5542",null)),Hr=Wr.exports,Vr=n(1232),Yr=Object(Kt.a)({components:{PurchaseModal:Vr.a},props:{innerState:{type:Object,required:!0},labModel:{type:Object,required:!0},envModel:{type:Object,required:!0},stopLab:{type:Function,required:!0},startLab:{type:Function,required:!0},initTask:{type:Function,required:!0}},data:function(){return{utils:(t=this.$ajax,e=this.$urls,{getLabTask:function(){return t.get(e.labTask)},startLab:function(n,r){var o="?v2=1"+(r?"&saved_vm_identity=".concat(r):""),c=e.startLab(n)+o;return t.post(c)},stopLab:function(){return t.delete(e.labTask)}}),savedVmIdentity:null,document:"",labPrice:1};var t,e},computed:Object(Yt.a)({},Object(Zt.d)("labTask",{savedEnv:function(t){return t.savedEnv}}),{savedVmModes:function(){var t=this.labModel.labUserStatus.specific_status.start_with_saved_vms_modes||[],e={first:"",second:""};return t.map(function(t){e=Object(Yt.a)({},e,t)}),e}}),mounted:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.labModel.isNotebook){t.next=5;break}return t.next=3,this.$ajax.get(this.$urls.labDocData(this.labModel.lab.id),{v2:!0});case 3:(e=t.sent).ok&&(this.document=e.data.document);case 5:this.getLabPrice();case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),methods:{beforeStart:function(t){if(t&&"compatible"!==this.savedVmModes[t])return!1;this.savedVmIdentity=t,this.envModel.task?this.showModal():this.start()},start:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){var e,n,r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.innerState.hideMessage(),this.innerState.showLoadingLab(),t.next=4,this.utils.getLabTask();case 4:if(e=t.sent,n=e.ok,r=e.data,!n||!r){t.next=10;break}return t.next=10,this.stopLab();case 10:if(!this.labModel.isContest){t.next=15;break}return t.next=13,this.labModel.getChallengesUserStatus();case 13:t.next=17;break;case 15:return t.next=17,this.labModel.getLabsUserStatus(this.labModel.course.id);case 17:return this.envModel.clearTask(),this.hideModal(),t.next=21,this.startLab(this.savedVmIdentity);case 21:(o=t.sent).ok?this.initTask():(this.innerState.hideLoadingLab(),this.$showMessage("danger",o.message));case 23:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),showModal:function(){this.$refs.modal.show()},hideModal:function(){this.$refs.modal&&this.$refs.modal.hide()},leftDays:function(t){try{var e=new Date,s=jn()(e),n=jn()(t),r=jn.a.duration(n-s).days()+1;return r>30?30:r}catch(t){return 0}},getScreenshot:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"vnc",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r="instance"===this.labModel.lab.vm_type;return e&&(r=!1),n(1422)("./".concat(t,"-screenshot").concat(r?"-cloud":"",".png"))},getLabPrice:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$ajax.get(this.$urls.purchaseLabVmPrice,{lab_id:this.labModel.lab.id,start_times:1});case 2:(e=t.sent).ok&&(this.labPrice=e.data.price/100);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}}),Zr=Yr,Kr=(n(1430),Object(de.a)(Zr,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.labModel.courseUserStatus&&t.labModel.labUserStatus?n("div",{staticClass:"env"},[(t.labModel.labUserStatus.specific_status.remaining_start_times>0||-1===t.labModel.labUserStatus.specific_status.remaining_start_times)&&t.labModel.courseUserStatus&&"expired"!=t.labModel.courseUserStatus.status?n("div",{staticClass:"title"},[t._v("\n    请点击选择想要使用的环境\n  ")]):t._e(),t._v(" "),t.labModel.isNotebook&&t.labModel.courseUserStatus&&"expired"===t.labModel.courseUserStatus.status?n("div",{staticClass:"notebook-layer"},[n("div",{staticClass:"notebook-document"},[t._m(0),t._v(" "),n("div",{staticClass:"markdown-body",domProps:{innerHTML:t._s(t.$marked(t.document))}})])]):t.labModel.courseUserStatus&&"expired"===t.labModel.courseUserStatus.status?n("div",{staticClass:"content"},[n("div",{staticClass:"no-remain-times"},[t._v("\n      课程已到期，无法开启环境\n    ")])]):t.labModel.labUserStatus&&0===t.labModel.labUserStatus.specific_status.remaining_start_times?n("div",{staticClass:"content"},[n("div",{staticClass:"no-remain-times"},[t._v("\n      实验剩余次数已用完，无法开启环境\n    ")]),t._v(" "),n("a",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-purchase",modifiers:{"modal-purchase":!0}}],staticClass:"buy-lab-btn",attrs:{href:"#"}},[t._v("\n      购买次数\n    ")])]):n("div",{staticClass:"content"},[t.labModel.labUserStatus&&t.labModel.labUserStatus.specific_status.remaining_start_times>0?n("div",{staticClass:"left-time"},[t._v("\n      剩余实验次数：\n      "),n("span",[t._v("\n        "+t._s(t.labModel.labUserStatus.specific_status.remaining_start_times)+"\n      ")])]):t._e(),t._v(" "),n("div",{staticClass:"env-items"},[n("div",{staticClass:"env-item",on:{click:function(){return t.beforeStart(null)}}},[n("div",{staticClass:"env-title"},[t._v("\n          默认环境\n        ")]),t._v(" "),n("img",{attrs:{src:t.getScreenshot(t.labModel.lab.console_type)}})]),t._v(" "),t.savedEnv&&t.savedEnv.length?t._l(t.savedEnv,function(e){return n("div",{key:e.identity,staticClass:"env-item saved-env",class:{off:"compatible"!==t.savedVmModes[e.identity]},on:{click:function(){return t.beforeStart(e.identity)}}},[n("div",{staticClass:"env-title"},[t._v("\n            保存的环境"+t._s("first"===e.identity?1:2)+"\n          ")]),t._v(" "),n("div",{staticClass:"img"},[n("img",{attrs:{src:t.getScreenshot(e.vm.lab.console_type,!0)}})]),t._v(" "),n("div",{staticClass:"env-info"},[n("div",[t._v("\n              保存于《"+t._s(e.vm.lab.parent.name)+" - "+t._s(e.vm.lab.name)+"》\n            ")]),t._v(" "),n("div",[t._v("\n              (有效期剩余"+t._s(t.leftDays(e.expired_at))+"天)\n            ")])])])}):t._e()],2),t._v(" "),t.savedEnv&&t.savedEnv.length?n("div",{staticClass:"footer"},[t._v("\n      注意：不同课程要求的实验环境不同，您保存的环境不一定适配当前课程\n    ")]):t._e()]),t._v(" "),n("b-modal",{ref:"modal",attrs:{id:"course-learning-start-lab-modal",size:"sm","hide-header":!0,"hide-footer":!0}},[n("div",[t._v("\n      1个实验环境正在运行中\n    ")]),t._v(" "),n("div",[t._v("\n      是否停止它启动新的实验？\n    ")]),t._v(" "),n("div",{staticClass:"btns"},[n("b-btn",{staticClass:"btn",attrs:{variant:"outline-primary"},on:{click:t.hideModal}},[t._v("\n        取消\n      ")]),t._v(" "),n("b-btn",{staticClass:"btn",attrs:{variant:"primary"},on:{click:t.start}},[t._v("\n        确定\n      ")])],1)]),t._v(" "),n("purchase-modal",{ref:"purchaseModal",attrs:{price:t.labPrice,"modal-title":"《"+t.labModel.lab.name+"》云主机环境（1次）","show-coupon":!1,"purchase-type":"lab","lab-id":t.labModel.lab.id,"pay-hint":"*购买完成后，需要在课程有效期内使用"}})],1):t._e()},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notebook-expired"},[e("i",{staticClass:"fa fa-exclamation-triangle"}),this._v("\n        课程已到期，无法开启环境\n      ")])}],!1,null,"6a4f70d0",null)),Gr=Kr.exports,Jr=n(1339),Xr=n.n(Jr),ts={props:{keyboard:{type:Object,required:!0},getFromEnv:{type:Function,required:!0},sendToEnv:{type:Function,required:!0}},data:function(){return{text:""}},mounted:function(){this.init()},updated:function(){this.init()},methods:{init:function(){var t=this;this.getFromEnv(function(data){t.text=data})},send:function(){this.sendToEnv(this.text),this.$refs.modal.hide(),this.$showMessage("success","保存成功！请在环境中自行粘贴使用该内容")},showHandler:function(){this.keyboard.off()},hideHandler:function(){this.keyboard.on()}}},es=ts,ns=(n(1431),Object(de.a)(es,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"modal",attrs:{id:"console-clipboard-modal","ok-only":!0,title:"在线环境剪切板",size:"lg","ok-title":"关闭","ok-variant":"secondary"},on:{show:t.showHandler,hide:t.hideHandler,ok:t.getFromEnv}},[n("div",[n("div",{staticClass:"textarea-wrapper text-center"},[n("b-form-textarea",{staticClass:"textarea",attrs:{rows:5},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),t._v(" "),n("b-btn",{staticClass:"btn-save",attrs:{variant:"primary"},on:{click:t.send}},[t._v("\n        保存\n      ")])],1),t._v(" "),n("div",{staticClass:"text"},[n("p",[n("strong",[t._v("复制外部内容到实验环境内：")]),t._v(" 粘贴内容到上面文本框，点击保存，后在实验环境中自行粘贴\n      ")]),t._v(" "),n("p",[n("strong",[t._v("获取实验环境中的内容：")]),t._v("请先在环境中自行复制内容，后在上面文本框中再次复制。\n      ")]),t._v(" "),n("br"),t._v(" "),n("p",[n("strong",[t._v("注意：")]),t._v("剪切版暂时不支持中文；实验步骤中的复制不支持 Ctrl-C，需要选中内容-右键-复制。\n      ")])])])])},[],!1,null,"6c03c77e",null)),rs=ns.exports,ss={props:{vmId:{type:Number,required:!0}},data:function(){return{downloadIframe:null}},methods:{downloadCode:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$ajax.get(this.$urls.downloadCode(this.vmId));case 2:(e=t.sent).ok?(n=e.data.url,this.downloadIframe?this.downloadIframe.src=n:this.createIframe(n),this.$refs.modal.hide()):this.$showMessage("danger","请求失败，请稍后重试");case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),createIframe:function(t){var e=document.createElement("iframe");e.src=t,e.id="downloadIframe",e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.left="-100px",document.body.appendChild(e),this.downloadIframe=e}}},as=ss,is=(n(1432),Object(de.a)(as,function(){var t=this.$createElement,e=this._self._c||t;return e("b-modal",{ref:"modal",attrs:{id:"console-download-code-modal",title:"从实验楼环境中导出代码","ok-title":"下载","cancel-title":"取消",size:"lg"},on:{ok:this.downloadCode}},[e("div",{staticClass:"text"},[this._v("\n    将需要的代码文件放入到“/home/shiyanlou/Code”目录，点击下载会把该目录打包下载（限5M以内）。\n  ")])])},[],!1,null,"33d25fbd",null)),os=is.exports,cs={components:{ClipboardModal:rs,DownloadCodeModal:os},props:{readonly:{type:Boolean,default:!1},envModel:{type:Object,required:!0},labType:{type:String,required:!0},recordInput:{type:Function,default:function(){}},canInput:{type:Boolean,default:!0},hideLoadingLab:{type:Function,default:function(){}},envWidth:{type:Number,required:!0},catchConnectError:{type:Function,required:!0},clearCatchConnectError:{type:Function,required:!0}},data:function(){return{elm:null,guac:null,isConnecting:!0,isConnected:!0,isReconnecting:!1}},computed:{mode:function(){var t=this;try{return this.envModel.vm.consoles.filter(function(e){return e.type===t.labType})[0]}catch(t){return null}}},watch:{mode:function(t){if(!t)return!1;this.init(t)},canInput:function(t){this.guac&&(t?(this.guac.mouse.on(),this.guac.keyboard.on(this.recordInput)):(this.guac.mouse.off(),this.guac.keyboard.off()))},isConnected:function(t){var e=this;t?(this.isReconnecting=!0,this.clearCatchConnectError()):(console.log("环境断开连接了"),this.isReconnecting=!0,this.reconnect(),this.catchConnectError(this.envModel,function(){e.isReconnecting=!1}))},envWidth:function(){this.handleResize()}},mounted:function(){this.init(this.mode)},beforeDestroy:function(){this.isReconnecting=!1},methods:{reconnect:function(){var t=this;this.init(this.mode),setTimeout(function(){t.isConnected||t.isConnecting||!t.isReconnecting||t.reconnect()},2e3)},init:function(t){this.renderEnv(t)},renderEnv:function(t){var e=t.access_url,n=t.token;this.elm=document.getElementById("display"),this.connect(e,n)},connect:function(t,e){var n=this;this.guac&&(this.guac.keyboard.off(),this.guac.mouse.off(),this.guac.disconnect()),this.isConnecting=!0,this.guac=new Xr.a(t),this.guac.connect(this.elm,e),this.guac.client.onstatechange=function(t){3===t&&(console.log("环境连接成功"),n.clearCatchConnectError(),n.isConnected=!0,n.isConnecting=!1,n.isReconnecting=!1,n.readonly?(n.guac.keyboard.off(),n.guac.mouse.off()):(n.guac.mouse.on(),n.guac.keyboard.on(n.recordInput)),setTimeout(n.handleResize,500),n.hideLoadingLab(),n.$ajax.post(n.$urls.vmConnected)),5===t&&(console.log("环境连接失败"),n.guac.keyboard.off(),n.guac.mouse.off(),n.isConnected=!1,n.isConnecting=!1)},this.guac.tunnel.onstatechange=function(t){1===t&&console.log("WebSocket 连接成功"),2===t&&(console.log("WebSocket 断开连接了"),n.guac.keyboard.off(),n.guac.mouse.off(),n.isConnected=!1,n.isConnecting=!1)},this.guac.tunnel.onerror=function(t){console.log("WebSocket Error: ",t),n.isConnected=!1,n.isConnecting=!1;var e={title:"连接环境失败",env:["instance"===n.envModel.vm.type?"云环境":"容器",function(){try{return n.envModel.vm.consoles[0].type}catch(t){return null}}()],code:t.code,message:"WebSocket Error: "+t.message,lab_id:n.envModel.task.lab.id,vm_id:n.envModel.vm.id,user_id:n.$auth.user.id};n.$sentry.captureException(new Error(JSON.stringify(e)))}},handleResize:function(){this.guac.scale(this.elm.firstChild.firstChild,this.envWidth,window.innerHeight)},getFromVm:function(t){return function(e){return t.clipboard.getFromVm(e)}},sendToVm:function(t){return function(text){return t.clipboard.sendToVm(text)}}}},ls=cs,us=(n(1433),Object(de.a)(ls,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"display"},[n("div",{attrs:{id:"display"}}),t._v(" "),t.guac?n("clipboard-modal",{attrs:{keyboard:t.guac.keyboard,"get-from-env":t.getFromVm(t.guac),"send-to-env":t.sendToVm(t.guac)}}):t._e(),t._v(" "),n("download-code-modal",{attrs:{"vm-id":t.envModel.vm.id}})],1)},[],!1,null,"49bd5772",null)),ds=us.exports,hs={props:{envModel:{type:Object,required:!0},recordInput:{type:Function,default:function(){}},record:{type:Function,default:function(){}},hideLoadingLab:{type:Function,required:!0},catchConnectError:{type:Function,required:!0},clearCatchConnectError:{type:Function,required:!0}},data:function(){return{show:!1,timer:null}},computed:{url:function(){try{return this.envModel.vm.consoles[0].access_url}catch(t){return""}},notebookStatusUrl:function(){try{return this.envModel.vm.consoles[0].notebook_status_url}catch(t){return""}}},mounted:function(){var t=this;this.getStatus(),this.catchConnectError(this.envModel,function(){clearInterval(t.timer)}),window.addEventListener("message",function(e){"KeyboardInput"===e.data&&t.recordInput("1"),e.data.shouldRecord&&(t.recordInput("1"),t.record(),t.$auth.fetchUser())})},beforeDestroy:function(){clearInterval(this.timer)},methods:{getStatus:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.timer&&clearInterval(this.timer),this.timer=setInterval(Object(Vt.a)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.notebookStatusUrl||e.url,t.next=3,e.$ajax.get(n);case 3:t.sent.ok&&(clearInterval(e.timer),e.clearCatchConnectError(),e.show=!0,e.hideLoadingLab(),e.$ajax.post(e.$urls.vmConnected));case 5:case"end":return t.stop()}},t)})),2e3);case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},ps=hs,fs=(n(1434),Object(de.a)(ps,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"iframe-env"},[this.show?e("iframe",{staticClass:"iframe",attrs:{src:this.url}}):this._e(),this._v(" "),e("div",{staticClass:"copyright"},[this._v("\n    *本课程内容由作者授权实验楼发布，未经允许，禁止转载、下载及非法传播\n  ")])])},[],!1,null,"d685947a",null)),bs=fs.exports,vs=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"loading-img"},[e("img",{staticClass:"logo",attrs:{src:n(1227)}}),this._v(" "),e("div",{staticClass:"hover"})])}],ms={props:{vmType:{type:String,default:""}},data:function(){return{text:["正在分配服务器...","实验环境启动中...","环境正在连接中..."],loadingText:[],timer:null}},mounted:function(){this.runText()},methods:{runText:function(){var t=this;this.timer&&clearInterval(this.timer),this.timer=setInterval(function(){t.loadingText.push(t.text[t.loadingText.length])},3e3)}}},gs=ms,ys=(n(1435),Object(de.a)(gs,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"loading"},[n("div",{staticClass:"loading-body"},[t._m(0),t._v(" "),n("div",{staticClass:"loading-text"},t._l(t.loadingText,function(e){return n("div",{key:e},[t._v("\n        "+t._s(e)+"\n      ")])}),0)]),t._v(" "),"instance"===t.vmType?n("div",{staticClass:"loading-footer"},[n("div",[t._v("\n      该实验为云主机环境\n    ")]),t._v(" "),n("div",[t._v("\n      启动大约需要 2-3 分钟，请耐心等待~\n    ")])]):t._e()])},vs,!1,null,"517bd391",null)),_s=ys.exports,ws=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"logo"},[e("img",{attrs:{src:n(1227)}}),this._v(" "),e("div",[this._v("\n      Loading...\n    ")])])}],ks=Object(Kt.a)({props:{envModel:{type:Object,required:!0}},data:function(){return{value:0}},mounted:function(){this.getVm(),this.run()},methods:{run:function(){var t=this,e=setInterval(function(){t.value+=100,t.value>=9900&&clearInterval(e)},500)},getVm:function(){var t=this,e=setInterval(Object(Vt.a)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.envModel.task){n.next=5;break}return n.next=3,t.envModel.getVm(t.envModel.task.vm.id);case 3:(r=n.sent).ok&&100===r.data.percent_creating&&clearInterval(e);case 5:case"end":return n.stop()}},n)})),2e3)}}}),Cs=ks,xs=(n(1436),Object(de.a)(Cs,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"loading-env"},[t._m(0),t._v(" "),n("b-progress",{staticClass:"progress",attrs:{value:t.value,max:1e4}}),t._v(" "),t.envModel.isCloudHost?n("div",{staticClass:"is-cloud-env"},[n("div",[t._v("\n      云主机环境启动较慢，需要3-5分钟，先看看实验步骤吧～\n    ")]),t._v(" "),n("div",[t._v("\n      （若启动失败，本次启动将不计入次数）\n    ")])]):t.envModel.isCloudLab?n("div",{staticClass:"is-cloud-env"},[n("div",[t._v("\n      云实验启动较慢，需要3-5分钟，先看看实验步骤吧～\n    ")])]):t._e()],1)},ws,!1,null,"04528f14",null)),Ms=xs.exports,Ss=(n(564),{props:{labModel:{type:Object,required:!0},task:{type:Object,required:!0},envModel:{type:Object,required:!0},envCtrlModel:{type:Object,required:!0},innerState:{type:Object,required:!0},messageType:{type:String,required:!0},hide:{type:Function,required:!0}},data:function(){return{ttl:this.task.ttl_seconds,timer:null}},computed:Object(Yt.a)({},Object(Zt.d)("labTask",{savedEnv:function(t){return t.savedEnv}}),{bgColor:function(){return"warning"===this.messageType?"#ff9c4a":"#f66"},isSavedEnv:function(){var t=this,e=!1;return this.savedEnv&&this.savedEnv.length&&this.savedEnv.map(function(n){n.vm.id===t.task.vm.id&&(e=!0)}),e},message:function(){return"warning"===this.messageType?"《".concat(this.task.lab.name,"》环境运行中"):this.isSavedEnv?"《".concat(this.task.lab.name,"》环境因超时已被保存关机"):"《".concat(this.task.lab.name,"》环境因超时已被自动停止")},leftTime:function(){var t=""+parseInt(this.ttl/60),s=""+this.ttl%60;return t=t.padStart(2,"0"),s=s.padStart(2,"0"),"".concat(t,"分").concat(s,"秒")}}),mounted:function(){this.decreaseTime()},methods:{decreaseTime:function(){var t=this;this.timer&&clearInterval(this.timer),this.timer=setInterval(function(){t.ttl<=0?(t.ttl=0,clearInterval(t.timer)):t.ttl-=1},1e3)},toLearn:function(){"contest"===this.envModel.task.lab.parent.type?window.location.href=/\/contests\/\w+/.exec(this.task.lab.parent.html_url)[0]+"/challenging/?id="+this.task.lab.id:window.location.href="".concat(this.task.lab.parent.html_url,"/learning/?id=").concat(this.task.lab.id)}}}),js=Ss,Os=(n(1438),Object(de.a)(js,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"env-message",style:{background:t.bgColor},on:{click:function(){return"warning"===t.messageType?t.toLearn():t.hide()}}},[r("div",["warning"===t.messageType?r("img",{staticClass:"message-icon",attrs:{src:n(1437)}}):r("i",{staticClass:"fa fa-close"}),t._v(" "),r("span",[t._v("\n      "+t._s(t.message)+"\n      "),"warning"===t.messageType?[t._v("\n        （"+t._s(t.leftTime)+"后 将被自动停止）\n      ")]:t._e()],2)]),t._v(" "),r("div",["warning"===t.messageType?r("a",{staticClass:"link"},[t._v("\n      返回学习\n      "),r("i",{staticClass:"fa fa-angle-right"})]):r("span",{staticClass:"close-message",on:{click:t.hide}},[t._v("\n      我知道了\n    ")])])])},[],!1,null,"421e81f4",null)),As=Os.exports,Ls=(Mr=Xt.b.bound,Sr=Xt.b.bound,jr=Xt.b.bound,Or=Xt.b.bound,Ar=Xt.b.bound,Lr=function(){function t(){Object(Gt.a)(this,t),Object(ee.a)(this,"isShowMessage",Ir,this),Object(ee.a)(this,"messageType",Er,this),Object(ee.a)(this,"isShowLoadingLab",Tr,this)}return Object(Jt.a)(t,[{key:"getMessageType",value:function(t){this.messageType=t?"warning":"danger"}},{key:"showMessage",value:function(){this.isShowMessage=!0}},{key:"hideMessage",value:function(){this.isShowMessage=!1}},{key:"showLoadingLab",value:function(){this.isShowLoadingLab=!0}},{key:"hideLoadingLab",value:function(){this.isShowLoadingLab=!1}}]),t}(),Ir=Object(ne.a)(Lr.prototype,"isShowMessage",[Xt.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Er=Object(ne.a)(Lr.prototype,"messageType",[Xt.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Object(ne.a)(Lr.prototype,"getMessageType",[Mr],Object.getOwnPropertyDescriptor(Lr.prototype,"getMessageType"),Lr.prototype),Object(ne.a)(Lr.prototype,"showMessage",[Sr],Object.getOwnPropertyDescriptor(Lr.prototype,"showMessage"),Lr.prototype),Object(ne.a)(Lr.prototype,"hideMessage",[jr],Object.getOwnPropertyDescriptor(Lr.prototype,"hideMessage"),Lr.prototype),Tr=Object(ne.a)(Lr.prototype,"isShowLoadingLab",[Xt.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(ne.a)(Lr.prototype,"showLoadingLab",[Or],Object.getOwnPropertyDescriptor(Lr.prototype,"showLoadingLab"),Lr.prototype),Object(ne.a)(Lr.prototype,"hideLoadingLab",[Ar],Object.getOwnPropertyDescriptor(Lr.prototype,"hideLoadingLab"),Lr.prototype),Lr),Is={props:{liveHtmlUrl:{type:String,required:!0}}},Es=(n(1439),Object(de.a)(Is,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"live"},[e("a",{attrs:{href:this.liveHtmlUrl}},[this._v("\n    点击进入直播间\n  ")])])},[],!1,null,"61a9ff9c",null).exports),Ts=Object(Kt.a)({components:{RightBox:Hr,EnvEmpty:Gr,LabDesktop:ds,IframeEnv:bs,LoadingLab:_s,LoadingEnv:Ms,EnvMessage:As,TrialEndPage:bn,LivePage:Es},props:{state:{type:Object,required:!0}},data:function(){return{innerState:new Ls,connectErrorTimer:null}},computed:Object(Yt.a)({},Object(Zt.d)("labTask",{savedEnv:function(t){return t.savedEnv}})),mounted:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.initTask();case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),methods:{initTask:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){var e,n,r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.state.envModel.getTask();case 2:if(e=this.state.envModel.task,this.innerState.getMessageType(e),!e){t.next=11;break}if(!this.state.envModel.isCurrentLabRunning||this.innerState.isShowLoadingLab){t.next=10;break}return t.next=8,this.state.envModel.getVm(e.vm.id);case 8:(n=t.sent).ok||(this.$showMessage("danger",n.message,function(){r.$refs.errorModal.show()}),this.throwSentryError(e,"获取 vm 信息失败, "+n.message));case 10:this.state.envModel.isCurrentLabRunning||this.innerState.showMessage();case 11:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),catchConnectError:function(t,e){var n=this,r=t.isCloudHost?90:30;this.connectErrorTimer=setTimeout(function(){n.throwSentryError(t.task),"function"==typeof e&&e(),n.$refs.errorModal.show()},1e3*r)},clearCatchConnectError:function(){clearTimeout(this.connectErrorTimer)},reloadPage:function(){window.location.reload()},stopVm:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.state.envCtrlModel.stopLab();case 2:if(!(e=t.sent).ok){t.next=16;break}if(this.innerState.hideLoadingLab(),this.$refs.errorModal.hide(),!this.state.labModel.isContest){t.next=11;break}return t.next=9,this.state.labModel.getChallengesUserStatus();case 9:t.next=13;break;case 11:return t.next=13,this.state.labModel.getLabsUserStatus(this.state.labModel.course.id);case 13:this.state.envModel.clearTask(),t.next=17;break;case 16:this.$showMessage("danger",e.message);case 17:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),throwSentryError:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=(t.vm.type,function(){try{t.vm.consoles[0].type}catch(t){return null}}(),["连接环境失败, "+e,"lab_id: ".concat(t.lab.id),"vm_id: ".concat(t.vm.id),"user_id: ".concat(this.$auth.user.id)].join(", "));this.$sentry.captureException(new Error(n))}}}),Ds=(n(1440),Object(de.a)(Ts,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("right-box",{attrs:{width:t.state.labModel.rightBoxWidth}},["live"===t.state.labModel.lab.type?n("live-page",{attrs:{"live-html-url":t.state.labModel.lab.specific_lab.live_html_url}}):"trial"!==t.state.labModel.courseUserStatus.status||t.state.labModel.lab.is_trial?t.innerState.isShowLoadingLab||t.state.envModel.isCurrentLabRunning?[t.innerState.isShowLoadingLab?n("loading-env",{attrs:{"env-model":t.state.envModel}}):t._e(),t._v(" "),t.state.envModel.isCurrentLabRunning?[t.innerState.isShowLoadingLab?t._e():[t.state.envModel.vm&&t.state.envModel.vm.percent_creating<100?n("loading-env",{attrs:{"env-model":t.state.envModel}}):t._e()],t._v(" "),t.state.envModel.isDesktop&&t.state.envModel.vm&&t.state.envModel.vm.consoles?n("lab-desktop",{attrs:{"env-model":t.state.envModel,"lab-type":t.state.envModel.labType,"can-input":t.state.envCtrlModel.inputEnabled,"record-input":t.state.envUserModel.recordInput,"hide-loading-lab":t.innerState.hideLoadingLab,"env-width":t.state.labModel.rightBoxWidth,"catch-connect-error":t.catchConnectError,"clear-catch-connect-error":t.clearCatchConnectError}}):t._e(),t._v(" "),"notebook"===t.state.envModel.labType||"webide"===t.state.envModel.labType?n("iframe-env",{attrs:{"env-model":t.state.envModel,"record-input":t.state.envUserModel.recordInput,record:t.state.envUserModel.record,"hide-loading-lab":t.innerState.hideLoadingLab,"catch-connect-error":t.catchConnectError,"clear-catch-connect-error":t.clearCatchConnectError}}):t._e()]:t._e()]:n("env-empty",{attrs:{"inner-state":t.innerState,"lab-model":t.state.labModel,"env-model":t.state.envModel,"start-lab":t.state.envCtrlModel.startLab,"stop-lab":t.state.envCtrlModel.stopLab,"save-env":t.state.envCtrlModel.saveEnv,"init-task":t.initTask}}):n("trial-end-page",{attrs:{"html-url":t.state.labModel.course.html_url,"is-env":!0}}),t._v(" "),t.state.envModel.task&&t.innerState.isShowMessage?n("env-message",{attrs:{"lab-model":t.state.labModel,task:t.state.envModel.task,"env-model":t.state.envModel,"env-ctrl-model":t.state.envCtrlModel,"inner-state":t.innerState,"message-type":t.innerState.messageType,hide:t.innerState.hideMessage}}):t._e(),t._v(" "),n("b-modal",{ref:"errorModal",staticClass:"error-modal",attrs:{size:"sm","no-close-on-backdrop":"","no-close-on-esc":"","hide-header":"","hide-footer":""}},[n("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.$refs.errorModal.hide()}}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("\n        ×\n      ")])]),t._v(" "),n("div",{staticClass:"error-modal-body"},[t._v("\n      连接实验环境失败了\n    ")]),t._v(" "),n("div",{staticClass:"error-modal-footer"},[n("b-btn",{staticClass:"error-modal-btn",attrs:{variant:"primary"},on:{click:t.reloadPage}},[t._v("\n        重连\n      ")]),t._v(" "),n("b-btn",{attrs:{variant:"danger"},on:{click:t.stopVm}},[t._v("\n        关闭环境\n      ")])],1)])],2)},[],!1,null,"bebca12e",null).exports),Ns={props:{title:{type:String,required:!0},ok:{type:Function,default:function(){}},cancel:{type:Function,default:function(){return!1}},showEvent:{type:Function,default:function(){}},shown:{type:Function,default:function(){}},size:{type:String,default:"md"},cancelTitle:{type:String,default:"取消"},okTitle:{type:String,default:"确定"},cancelOnly:{type:Boolean,default:!1},hideHeader:{type:Boolean,default:!1},hideFooter:{type:Boolean,default:!1},noCloseOnBackdrop:{type:Boolean,default:!1}},data:function(){return{showModal:!1}},methods:{show:function(){this.showModal=!0},hide:function(){!1===this.cancel()&&(this.showModal=!1)}}},Rs=(n(1441),Object(de.a)(Ns,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{attrs:{"modal-class":"course-learning-base-modal",title:t.title,size:t.size,"cancel-title":t.cancelTitle,"ok-title":t.okTitle,"hide-header":t.hideHeader,"hide-footer":t.hideFooter,"no-close-on-backdrop":t.noCloseOnBackdrop},on:{show:t.showEvent,shown:t.shown,ok:t.ok},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[n("div",{staticClass:"modal-slot"},[t._t("default")],2),t._v(" "),t.hideFooter?n("div",{staticClass:"modal-btns"},[t._t("btns",[n("b-btn",{staticClass:"modal-btn",attrs:{variant:"outline-primary"},on:{click:t.hide}},[t._v("\n        "+t._s(t.cancelTitle)+"\n      ")]),t._v(" "),n("b-btn",{staticClass:"modal-btn",attrs:{variant:"primary"},on:{click:t.ok}},[t._v("\n        "+t._s(t.okTitle)+"\n      ")])])],2):t._e(),t._v(" "),t.cancelOnly?n("div",{attrs:{slot:"modal-footer"},slot:"modal-footer"},[n("b-btn",{attrs:{variant:"secondary"},on:{click:t.hide}},[t._v("\n      "+t._s(t.cancelTitle)+"\n    ")])],1):t._e()])},[],!1,null,null,null).exports),qs={components:{BaseModal:Rs},props:{ttl:{type:Number,required:!0},increase:{type:Function,required:!0},remainTimes:{type:Number,required:!0}},computed:{minutes:function(){return Math.round(this.ttl/60)}}},Us=Object(de.a)(qs,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("base-modal",{ref:"modal",attrs:{"cancel-only":t.minutes>10||0===t.remainTimes,ok:t.increase,title:"实验延时","ok-title":"延时1小时"}},[t.minutes>10?n("div",[t._v("\n    实验剩余时间 "+t._s(t.minutes)+" 分钟， 剩余时间小于10分钟才可以延时\n  ")]):n("div",[t.$auth.isMember?n("div",[t._v("\n      注意：实验剩余时间 "+t._s(t.minutes)+" 分钟，如果您使用的不是已保存的环境， 时间结束后实验环境将会被删除！ 如需延长时间请点击“延时1小时”。\n    ")]):n("div",[t._v("\n      实验剩余时间 "+t._s(t.minutes)+" 分钟，确定延时延时1小时？\n    ")])]),t._v(" "),t.remainTimes>-1?n("strong",[t._v("\n    剩余可延时次数："+t._s(t.remainTimes)+"次\n  ")]):t._e()])},[],!1,null,null,null).exports,Ps=Object(Kt.a)({components:{LeftTimeModal:Us},props:{ttl:{type:Number,required:!0},remainTimes:{type:Number,required:!0},increase:{type:Function,required:!0},decrease:{type:Function,required:!0},syncTtl:{type:Function,required:!0},record:{type:Function,required:!0}},data:function(){return{timer:null,recordTimer:null}},computed:{leftTime:function(){return"".concat(Math.floor(this.ttl/60)).padStart(2,"0")+":"+"".concat(this.ttl%60).padStart(2,"0")}},beforeDestroy:function(){clearInterval(this.timer)},created:function(){this.interval()},methods:{showModal:function(){this.$refs.modal.$refs.modal.show()},interval:function(){var t=this;this.timer&&clearInterval(this.timer),this.timer=setInterval(Object(Vt.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.decrease(),600===t.ttl&&t.showModal(),0===t.ttl&&clearInterval(t.timer),t.ttl%60==0&&t.syncTtl(),t.recordStudyTime();case 5:case"end":return e.stop()}},e)})),1e3)},recordStudyTime:function(){var t=new Date,e=t.getMinutes(),s=t.getSeconds();e%3==0&&0===s&&(this.record(),this.$auth.fetchUser())}}}),Bs=(n(1442),Object(de.a)(Ps,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"left-time"},[n("div",{staticClass:"text"},[t._v("\n    "+t._s(t.leftTime)+"\n  ")]),t._v(" "),n("b-btn",{staticClass:"add-time-btn",attrs:{variant:"secondary"},on:{click:t.showModal}},[t._v("\n    延时\n  ")]),t._v(" "),n("left-time-modal",{ref:"modal",attrs:{ttl:t.ttl,increase:t.increase,"remain-times":t.remainTimes}})],1)},[],!1,null,"18205388",null).exports),$s={props:{consoles:{type:Array,required:!0},setLabType:{type:Function,required:!0}},data:function(){return{modes:[{type:"guacamole_vnc",name:"桌面",icon:"fa fa-desktop"},{type:"guacamole_ssh",name:"字符",icon:"fa fa-terminal"},{type:"webide",name:"WebIDE",icon:"fa fa-file-code-o"},{type:"notebook",name:"NoteBook",icon:"fa fa-file-text-o"}],show:!1}},methods:{getMode:function(t){var e=this.modes.filter(function(e){return e.type===t});if(e.length)return e[0]}}},Fs=(n(1443),Object(de.a)($s,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vm-modes"},[n("div",{staticClass:"modes"},t._l(t.consoles,function(e){return n("div",{key:e.type,staticClass:"mode",on:{click:function(n){return t.setLabType(e.type)}}},[n("i",{class:t.getMode(e.type).icon}),t._v(" "),n("div",{staticClass:"mode-name"},[t._v("\n        "+t._s(t.getMode(e.type).name)+"\n      ")])])}),0),t._v(" "),t._m(0)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modes-btn"},[e("i",{staticClass:"fa fa-exchange"}),this._v(" "),e("span",[this._v("切换界面")])])}],!1,null,"4cf3d10a",null).exports),Qs=(n(126),{components:{BaseModal:Rs},props:{labModel:{type:Object,required:!0},envModel:{type:Object,required:!0},lab:{type:Object,required:!0},vm:{type:Object,required:!0},stopLab:{type:Function,required:!0},saveEnv:{type:Function,required:!0},labType:{type:String,required:!0},canSave:{type:Boolean,required:!0},showSaveVmModal:{type:Function,required:!0}},computed:Object(Yt.a)({},Object(Zt.d)("labTask",{savedEnv:function(t){return t.savedEnv}}),{notMemberHasSavedEnv:function(){return this.canSave&&this.$auth.isMember&&!this.savedEnv},isSavedEnv:function(){var t=this,e=!1;return this.savedEnv&&this.savedEnv.length&&this.savedEnv.map(function(n){n.vm.id===t.vm.id&&(e=!0)}),e}}),mounted:function(){/stop\=true/.test(window.location.search)&&this.$refs.modal.show()},methods:Object(Yt.a)({},Object(Zt.b)("labTask",["getSavedEnv"]),{stop:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.stopLab();case 3:if(!this.labModel.isContest){t.next=8;break}return t.next=6,this.labModel.getChallengesUserStatus();case 6:t.next=10;break;case 8:return t.next=10,this.labModel.getLabsUserStatus(this.labModel.course.id);case 10:this.envModel.clearTask(),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),this.$showMessage("danger","关闭环境失败，请稍后重试");case 16:case"end":return t.stop()}},t,this,[[0,13]])}));return function(){return t.apply(this,arguments)}}(),saveAndStop:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.savedEnv||2!==this.savedEnv.length){t.next=4;break}return this.$refs.modal.hide(),this.showSaveVmModal(),t.abrupt("return",!1);case 4:return t.next=6,this.saveEnv();case 6:if(!(e=t.sent).ok){t.next=13;break}this.getSavedEnv(),this.labModel.isContest?this.labModel.getChallengesUserStatus():this.labModel.getLabsUserStatus(this.labModel.course.id),this.$showMessage("success","环境保存成功，有效期30天！"),t.next=15;break;case 13:return this.$showMessage("danger",e.message),t.abrupt("return",!1);case 15:return t.next=17,this.stopLab();case 17:if(n=t.sent,!this.labModel.isContest){t.next=23;break}return t.next=21,this.labModel.getChallengesUserStatus();case 21:t.next=25;break;case 23:return t.next=25,this.labModel.getLabsUserStatus(this.labModel.course.id);case 25:this.envModel.clearTask(),n.ok||this.$showMessage("danger","关闭环境失败，请稍后重试");case 27:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()})}),zs=(n(1444),{components:{StopLabModal:Object(de.a)(Qs,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("base-modal",{ref:"modal",attrs:{id:"stop-lab-modal","hide-footer":!0,ok:t.notMemberHasSavedEnv?t.saveAndStop:t.stop,cancel:t.notMemberHasSavedEnv?t.stop:function(){return!1},"ok-title":t.notMemberHasSavedEnv?"保存并关闭环境":"确定","cancel-title":t.notMemberHasSavedEnv?"直接关闭环境":"取消",size:"sm",title:"关闭环境"}},[t.canSave?[t.$auth.isMember?n("div",[t.isSavedEnv?n("div",[t._v("\n        您的环境已被保存，可随时使用\n      ")]):n("div",[t._v("\n        是否保存当前临时环境？\n      ")])]):n("div",[n("div",[t._v("\n        停止后，该环境和代码将被删除\n      ")]),t._v(" "),n("div",[t._v("\n        如需保存环境，建议\n        "),n("a",{attrs:{href:"/vip/",target:"_blank"}},[t._v("\n          加入会员\n        ")])])])]:n("div",[n("div",[t._v("\n      该环境不支持保存\n    ")]),t._v(" "),n("div",[t._v("\n      关闭后环境将会被删除\n    ")])]),t._v(" "),t.$auth.isMember&&t.canSave&&!t.isSavedEnv?n("template",{slot:"btns"},[n("b-btn",{staticClass:"modal-btn",attrs:{variant:"primary"},on:{click:t.saveAndStop}},[t._v("\n      保存并关闭环境\n    ")]),t._v(" "),n("b-btn",{staticClass:"modal-btn",attrs:{variant:"outline-primary"},on:{click:t.stop}},[t._v("\n      关闭环境\n    ")])],1):t._e()],2)},[],!1,null,"c41654ce",null).exports,SaveVmModal:An},props:{labModel:{type:Object,required:!0},envModel:{type:Object,required:!0},envCtrlModel:{type:Object,required:!0},lab:{type:Object,required:!0},vm:{type:Object,required:!0},stopLab:{type:Function,required:!0},saveEnv:{type:Function,required:!0},labType:{type:String,required:!0},canSave:{type:Boolean,required:!0}},data:function(){return{showSaveVmModal:!1}},methods:{showModal:function(){this.$refs.modal.$refs.modal.show()},savedCallback:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.stopLab();case 2:if(!this.labModel.isContest){t.next=7;break}return t.next=5,this.labModel.getChallengesUserStatus();case 5:t.next=9;break;case 7:return t.next=9,this.labModel.getLabsUserStatus(this.labModel.course.id);case 9:this.envModel.clearTask();case 10:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}}),Ws=(n(1445),Object(de.a)(zs,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-btn",{staticClass:"stop-lab-btn",attrs:{variant:"danger"},on:{click:t.showModal}},[n("i",{staticClass:"fa fa-stop"}),t._v("\n    关闭环境\n  ")]),t._v(" "),n("stop-lab-modal",{ref:"modal",attrs:{"lab-model":t.labModel,"env-model":t.envModel,lab:t.lab,vm:t.vm,"stop-lab":t.stopLab,"save-env":t.saveEnv,"lab-type":t.labType,"can-save":t.canSave,"show-save-vm-modal":function(){return t.showSaveVmModal=!0}}}),t._v(" "),n("save-vm-modal",{directives:[{name:"show",rawName:"v-show",value:t.showSaveVmModal,expression:"showSaveVmModal"}],attrs:{"lab-model":t.labModel,"env-ctrl-model":t.envCtrlModel,"hide-modal":function(){return t.showSaveVmModal=!1},"back-callback":t.showModal,"saved-callback":t.savedCallback,"back-text":"返回上一步"}})],1)},[],!1,null,"c19f4d44",null).exports),Hs={components:{BaseModal:Rs},props:{nextLab:{type:Function,required:!0}}},Vs={components:{NextLabModal:Object(de.a)(Hs,function(){var t=this.$createElement,e=this._self._c||t;return e("base-modal",{ref:"modal",attrs:{ok:this.nextLab,title:"下一个实验"}},[e("div",[this._v("\n    当前实验环境继续使用，确定进入下一个实验？\n  ")])])},[],!1,null,null,null).exports},props:{nextLab:{type:Function,required:!0}},methods:{showModal:function(){this.$refs.modal.$refs.modal.show()},next:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.nextLab();case 3:this.$router.go(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),this.$showMessage("danger","进入下一个实验失败，请稍后重试");case 9:case"end":return t.stop()}},t,this,[[0,6]])}));return function(){return t.apply(this,arguments)}}()}},Ys=(n(1446),Object(de.a)(Vs,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("b-btn",{staticClass:"next-lab-btn",attrs:{variant:"primary"},on:{click:this.showModal}},[e("i",{staticClass:"fa fa-step-forward"}),this._v("\n    下个实验\n  ")]),this._v(" "),e("next-lab-modal",{ref:"modal",attrs:{"next-lab":this.next}})],1)},[],!1,null,"26d3823d",null).exports),Zs=(n(1447),Object(de.a)({},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"common-btn"},[this._t("default")],2),this._v(" "),this._t("modal")],2)},[],!1,null,"e7838ea4",null).exports),Ks={components:{CommonBtn:Zs}},Gs=Object(de.a)(Ks,function(){var t=this.$createElement,e=this._self._c||t;return e("common-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.console-clipboard-modal",modifiers:{"console-clipboard-modal":!0}}]},[e("div",{staticClass:"clipboard-btn"},[e("i",{staticClass:"fa fa-cut"}),this._v("\n    剪切板\n  ")])])},[],!1,null,"57018e97",null).exports,Js={components:{CommonBtn:Zs},props:{url:{type:String,required:!0}},methods:{click:function(){window.open(this.url,"_blank")}}},Xs=Object(de.a)(Js,function(){var t=this.$createElement,e=this._self._c||t;return e("common-btn",[e("div",{staticClass:"web-service",on:{click:this.click}},[e("i",{staticClass:"fa fa-globe"}),this._v("\n    Web服务\n  ")])])},[],!1,null,null,null).exports,ta=n(326),ea=n.n(ta),na={components:{BaseModal:Rs},props:{readonlyUrl:{type:String,required:!0},cooperationUrl:{type:String,required:!0}},methods:{init:function(){new ea.a(this.$refs.copya),new ea.a(this.$refs.copyb)}}},ra=(n(1448),{components:{CommonBtn:Zs,ShareModal:Object(de.a)(na,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("base-modal",{ref:"modal",staticClass:"share-lab-modal",attrs:{title:"共享桌面","cancel-title":"关闭",size:"lg","cancel-only":"",shown:t.init}},[n("b-form-group",{attrs:{label:"只读共享链接："}},[n("b-input-group",[n("b-form-input",{attrs:{id:"copy-input-a",readonly:""},model:{value:t.readonlyUrl,callback:function(e){t.readonlyUrl=e},expression:"readonlyUrl"}}),t._v(" "),n("b-input-group-append",[n("b-btn",{ref:"copya",attrs:{variant:"primary","data-clipboard-action":"copy","data-clipboard-target":"#copy-input-a"}},[t._v("\n          点击复制\n        ")])],1)],1)],1),t._v(" "),n("br"),t._v(" "),n("b-form-group",{attrs:{label:"协作共享链接："}},[n("b-input-group",[n("b-form-input",{attrs:{id:"copy-input-b",readonly:""},model:{value:t.cooperationUrl,callback:function(e){t.cooperationUrl=e},expression:"cooperationUrl"}}),t._v(" "),n("b-input-group-append",[n("b-btn",{ref:"copyb",attrs:{variant:"primary","data-clipboard-action":"copy","data-clipboard-target":"#copy-input-b"}},[t._v("\n          点击复制\n        ")])],1)],1)],1)],1)},[],!1,null,null,null).exports},props:{vmId:{type:Number,required:!0},getShareToken:{type:Function,required:!0},readonlyToken:{type:String,default:null},cooperationToken:{type:String,default:null}},data:function(){return{shareUrl:window.location.origin+"/courses/running/share/verify/?token="}},computed:{readonlyUrl:function(){return this.shareUrl+this.readonlyToken},cooperationUrl:function(){return this.shareUrl+this.cooperationToken}},methods:{showModal:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(+localStorage.vmId===this.vmId&&this.readonlyToken&&this.cooperationToken){t.next=6;break}return t.next=4,this.getShareToken();case 4:t.sent.ok||this.$showMessage("danger","获取共享桌面链接失败，请重试");case 6:this.$refs.modal.$refs.modal.show();case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}}),sa=Object(de.a)(ra,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("common-btn",{nativeOn:{click:function(e){return t.showModal(e)}}},[n("div",{staticClass:"share-btn"},[n("i",{staticClass:"fa fa-share-alt"}),t._v("\n      共享桌面\n    ")])]),t._v(" "),n("share-modal",{ref:"modal",attrs:{"readonly-url":t.readonlyUrl,"cooperation-url":t.cooperationUrl}})],1)},[],!1,null,null,null).exports,aa={components:{CommonBtn:Zs}},ia=Object(de.a)(aa,function(){var t=this.$createElement,e=this._self._c||t;return e("common-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.console-download-code-modal",modifiers:{"console-download-code-modal":!0}}]},[e("div",[e("i",{staticClass:"fa fa-download"}),this._v("\n    下载代码\n  ")])])},[],!1,null,null,null).exports,oa=n(1464),ca=n.n(oa),la={components:{CommonBtn:Zs},methods:{toggle:function(){ca.a.toggle()}}},ua=Object(de.a)(la,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("common-btn",{nativeOn:{click:function(e){return t.toggle(e)}}},[n("div",[n("i",{staticClass:"fa fa-arrows-alt"}),t._v("\n    桌面全屏\n  ")])])},[],!1,null,null,null).exports,da={components:{BaseModal:Rs},props:{labModel:{type:Object,required:!0},save:{type:Function,required:!0}},methods:Object(Yt.a)({},Object(Zt.b)("labTask",["getSavedEnv"]),{saveEnv:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.save();case 2:(e=t.sent).ok?(this.getSavedEnv(),this.labModel.isContest?this.labModel.getChallengesUserStatus():this.labModel.getLabsUserStatus(this.labModel.course.id),this.$showMessage("success","环境保存成功，有效期30天！")):this.$showMessage("danger",e.message);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),show:function(){this.$refs.modal.show()}})},ha=(n(1449),{components:{CommonBtn:Zs,SaveVmModal:An,VipModal:Object(de.a)(da,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("base-modal",{ref:"modal",attrs:{ok:t.saveEnv,"cancel-only":!t.$auth.isMember,title:"保存实验环境","cancel-title":"关闭"}},[t.$auth.isMember?[t._v("\n    保存的实验环境可在个人主页访问\n  ")]:n("div",{staticClass:"vip"},[n("div",[t._v("\n      标准会员可以保存实验环境，随时随地继续实验\n    ")]),t._v(" "),n("a",{staticClass:"btn btn-primary vip-btn",attrs:{href:"/vip/",target:"_blank"}},[t._v("\n      加入会员保存环境\n    ")]),t._v(" "),n("a",{staticClass:"faq",attrs:{href:"/questions/1440/",target:"_blank"}},[n("img",{attrs:{src:"https://static.shiyanlou.com/img/vip-faq.png"}}),t._v("\n      加入实验楼会员，学习更多精品课程\n    ")])])],2)},[],!1,null,"5d93eb08",null).exports},props:{labModel:{type:Object,required:!0},envModel:{type:Object,required:!0},envCtrlModel:{type:Object,required:!0}},data:function(){return{showSaveVmModal:!1}},computed:Object(Yt.a)({},Object(Zt.d)("labTask",{savedEnv:function(t){return t.savedEnv}}),{shouldShowSaveVmModal:function(){return this.savedEnv&&2===this.savedEnv.length}}),methods:{showModal:function(){var t=this,e=!1;if(this.savedEnv&&this.savedEnv.length&&this.savedEnv.map(function(n){n.vm.id===t.envModel.vm.id&&(e=!0)}),e)return this.$showMessage("success","当前环境可随时保存并更新"),!1;this.shouldShowSaveVmModal?this.showSaveVmModal=!0:this.$refs.modal.show()}}}),pa=(n(1450),Object(de.a)(ha,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("common-btn",{nativeOn:{click:function(e){return t.showModal(e)}}},[r("div",[r("img",{staticClass:"icon",attrs:{src:n(325)}}),t._v("\n      保存环境\n    ")])]),t._v(" "),r("div",{attrs:{slot:"modal"},slot:"modal"},[t.shouldShowSaveVmModal&&t.showSaveVmModal?r("save-vm-modal",{attrs:{"lab-model":t.labModel,"env-ctrl-model":t.envCtrlModel,"hide-modal":function(){return t.showSaveVmModal=!1}}}):t._e(),t._v(" "),t.shouldShowSaveVmModal?t._e():r("vip-modal",{ref:"modal",attrs:{"lab-model":t.labModel,save:t.envCtrlModel.saveEnv}})],1)],1)},[],!1,null,"0eb97991",null).exports),fa={components:{BaseModal:Rs},props:{ssh:{type:Object,required:!0}}},ba=(n(1451),{components:{CommonBtn:Zs,SshModal:Object(de.a)(fa,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("base-modal",{ref:"modal",staticClass:"ssh-modal",attrs:{title:"SSH直连",size:"lg","cancel-title":"关闭","cancel-only":!0}},[t.$auth.isMember?n("div",{staticClass:"ssh-content"},[n("div",[t._v("\n      实验楼会员可以使用 SSH 客户端直接连接实验环境，获得更流畅的实验体验，连接信息如下：\n    ")]),t._v(" "),n("div",{staticClass:"alert alert-info"},[n("div",[t._v("\n        地址："+t._s(t.ssh.host)+"\n      ")]),t._v(" "),n("div",[t._v("\n        端口："+t._s(t.ssh.port)+"（注意不是默认的 22 端口）\n      ")]),t._v(" "),n("div",[t._v("\n        用户："+t._s(t.ssh.username)+"\n      ")]),t._v(" "),n("div",[t._v("\n        密码："+t._s(t.ssh.password)+"\n      ")])]),t._v(" "),n("p",{staticClass:"ssh-guide font-14"},[n("a",{staticClass:"color-red",attrs:{href:"/library/shiyanlou-docs/feature/ssh",target:"_blank"}},[t._v("\n        💡不会用？点击查看实验楼SSH直连功能使用指南\n      ")])]),t._v(" "),n("p",{staticClass:"notices no-margin font-14"},[t._v("\n      注意：SSH 连接将会在环境倒计时结束后断开，且无法获得实验倒计时提醒，请务必注意时间，避免数据损失。\n    ")])]):n("div",{staticClass:"ssh-content"},[t.ssh.username?n("div",{staticClass:"alert alert-info"},[n("div",[t._v("\n        用户名："+t._s(t.ssh.username)+"\n      ")]),t._v(" "),n("div",[t._v("\n        密码："+t._s(t.ssh.password)+"\n      ")])]):t._e(),t._v(" "),n("div",[t._v("\n      标准会员可以通过SSH直接连接实验环境，方法见\n      "),n("a",{attrs:{href:"/questions/2391/",target:"_blank"}},[t._v("\n        SSH连接方法\n      ")]),t._v(" "),n("a",{staticClass:"btn btn-primary",attrs:{href:"/vip/",target:"_blank"}},[t._v("\n        查看更多会员特权\n      ")])])])])},[],!1,null,"4d21f029",null).exports},props:{ssh:{type:Object,required:!0}},methods:{showModal:function(){this.$refs.modal.$refs.modal.show()}}}),va=(n(1452),Object(de.a)(ba,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("common-btn",{nativeOn:{click:function(e){return t.showModal(e)}}},[r("div",[r("img",{staticClass:"icon",attrs:{src:n(325)}}),t._v("\n      SSH直连\n    ")])]),t._v(" "),r("ssh-modal",{ref:"modal",attrs:{ssh:t.ssh}})],1)},[],!1,null,"3101e012",null).exports),ma={components:{CommonBtn:Zs},methods:{click:function(){window.open(window.location.origin+"/library/shiyanlou-docs/","_blank")}}},ga=Object(de.a)(ma,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("common-btn",{nativeOn:{click:function(e){return t.click(e)}}},[n("div",[n("i",{staticClass:"fa fa-bookmark-o"}),t._v("\n    环境使用指南\n  ")])])},[],!1,null,null,null).exports,ya={components:{CommonBtn:Zs},props:{setTitle:{type:Function,required:!0}}},_a=Object(de.a)(ya,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("common-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.ask-question-modal",modifiers:{"ask-question-modal":!0}}],nativeOn:{click:function(e){return t.setTitle("我要纠错")}}},[n("div",[n("i",{staticClass:"fa fa-question-circle"}),t._v("\n    文档纠错\n  ")])])},[],!1,null,null,null).exports,wa=Object(Kt.a)({components:{LeftTime:Bs,VmModes:Fs,StopLab:Ws,NextLab:Ys,EnvClipboard:Gs,WebService:Xs,ShareLab:sa,DownloadCode:ia,FullScreen:ua,SaveEnv:pa,SshBtn:va,GuideBtn:ga,DocRecovery:_a},props:{state:{type:Object,required:!0}},data:function(){return{show:!0,hide:!1}},computed:{isInstance:function(){return this.state.envModel.vm&&"instance"===this.state.envModel.vm.type},isNoteBook:function(){return this.state.labModel.isNotebook},isWebIDE:function(){return this.state.labModel.isWebIDE},isCloudLab:function(){return this.state.labModel.isCloudLab}},methods:{toggleTool:function(){this.show=!this.show,this.hide=!this.hide}}}),ka=(n(1453),Object(de.a)(wa,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.state.labModel.lab?n("div",{staticClass:"lab-tools",class:{show:t.show,hide:t.hide}},[n("div",{staticClass:"toggle-btn",on:{click:t.toggleTool}},[n("i",{staticClass:"fa",class:{"fa-angle-double-right":t.show,"fa-angle-double-left":!t.show}})]),t._v(" "),n("left-time",{attrs:{ttl:t.state.envModel.task.ttl_seconds,"remain-times":t.state.envModel.task.remaining_start_times,increase:t.state.envModel.increaseLabTime,decrease:t.state.envModel.decreaseLabTime,"sync-ttl":t.state.envModel.getTask,record:t.state.envUserModel.record}}),t._v(" "),t.state.envModel.isDesktop&&t.state.envModel.task&&t.state.envModel.task.vm.consoles?n("vm-modes",{attrs:{consoles:t.state.envModel.task.vm.consoles,"set-lab-type":t.state.envModel.setLabType}}):t._e(),t._v(" "),n("div",{staticClass:"divide"}),t._v(" "),t.state.envModel.vm?n("stop-lab",{attrs:{"lab-model":t.state.labModel,"env-model":t.state.envModel,"env-ctrl-model":t.state.envCtrlModel,lab:t.state.labModel.lab,vm:t.state.envModel.vm,"stop-lab":t.state.envCtrlModel.stopLab,"save-env":t.state.envCtrlModel.saveEnv,"lab-type":t.state.envModel.labType,"can-save":t.state.envModel.vm.can_save}}):t._e(),t._v(" "),n("div",{staticClass:"divide"}),t._v(" "),t.state.envModel.isDesktop?n("env-clipboard"):t._e(),t._v(" "),t.state.envModel.isDesktop?n("share-lab",{attrs:{"vm-id":t.state.envModel.vm.id,"get-share-token":t.state.envModel.getShareToken,"readonly-token":t.state.envModel.readonlyShareToken,"cooperation-token":t.state.envModel.cooperationShareToken}}):t._e(),t._v(" "),t.state.envModel.isDesktop&&!t.isInstance?n("download-code"):t._e(),t._v(" "),t.state.envModel.vm&&"webide"===t.state.envModel.labType?n("web-service",{attrs:{url:t.state.envModel.vm.http_access_url}}):t._e(),t._v(" "),n("full-screen"),t._v(" "),n("div",{staticClass:"divide"}),t._v(" "),!t.state.envModel.vm||t.isInstance||t.isNoteBook||t.state.labModel.course.support_embed?t._e():n("ssh-btn",{attrs:{ssh:t.state.envModel.vm.ssh_login_config||{}}}),t._v(" "),t.state.envModel.vm&&t.state.envModel.vm.can_save&&!t.state.labModel.course.support_embed?n("save-env",{attrs:{"lab-model":t.state.labModel,"env-model":t.state.envModel,"env-ctrl-model":t.state.envCtrlModel}}):t._e(),t._v(" "),t.state.envModel.isDesktop?n("div",{staticClass:"divide"}):t._e(),t._v(" "),n("guide-btn")],1):t._e()},[],!1,null,"37b730a4",null).exports),Ca={props:{remove:{type:Function,required:!0}}},xa=(n(1454),{components:{BaseMessage:Object(de.a)(Ca,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"message"},[e("span",{staticClass:"message-close",on:{click:this.remove}},[e("i",{staticClass:"fa fa-times"})]),this._v(" "),e("div",{staticClass:"message-content"},[this._t("default")],2)])},[],!1,null,"cc872170",null).exports},props:{level:{type:Number,required:!0}},data:function(){return{show:!1}},watch:{level:function(t){var e=this;t>0&&(this.show=!0,setTimeout(function(){e.show=!1},1e4))}},methods:{remove:function(){this.show=!1}}}),Ma=(n(1455),{components:{LevelMessage:Object(de.a)(xa,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show?n("base-message",{attrs:{remove:t.remove}},[n("div",{staticClass:"level-message",class:{strong:t.level%10==0}},[n("i",{staticClass:"fa fa-thumbs-o-up"}),t._v(" "),t.level%10==0?n("span",[t._v("\n      到达 "+t._s(t.level)+" 楼，获得1颗实验豆奖励！\n      "),n("img",{attrs:{src:"https://static.shiyanlou.com/img/shiyandou.png"}})]):n("span",[t._v("\n      恭喜你更上一层楼，已经达到 "+t._s(t.level)+" 楼！\n    ")])])]):t._e()},[],!1,null,"5f62b7aa",null).exports},props:{level:{type:Number,default:0}}}),Sa=(n(1456),Object(de.a)(Ma,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"messages"},[e("level-message",{attrs:{level:this.level}})],1)},[],!1,null,"817ed8d0",null).exports),ja={components:{TipBox:wn},props:{setShowTip:{type:Function,required:!0}},data:function(){return{section:{left:"0px",top:"0px"},doc:{left:"0px",top:"0px"},env:{left:"0px",top:"0px"},show:!1,current:1}},mounted:function(){1!==+localStorage.showTip&&(this.show=!0,this.showTipGuide(),localStorage.showTip=1)},methods:{showTipGuide:function(){var t=this,e=document.querySelector(".sections-list-btn");if(e){e.getClientRects()[0];this.section={left:e.left+.9*e.width+"px",top:"20px"}}else this.section=null;var n=window.innerWidth,r=window.innerHeight;this.doc={left:.35*n*.9+"px",top:.3*r+"px"},setTimeout(function(){var e=document.querySelector(".env-item");if(e){var n=e.getClientRects()[0];t.env={left:n.left+110+"px",top:n.top+80+"px"}}else{var r=document.querySelector(".display")||document.querySelector(".iframe-env")||document.querySelector(".right-box");if(r){var o=r.getClientRects()[0];t.env={left:o.left+200+"px",top:o.top+200+"px"}}}},100)}}},Oa=Object(de.a)(ja,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show?n("div",[2===t.current?n("tip-box",{attrs:{left:t.section.left,top:t.section.top,"arrow-top":!0},on:{close:function(){return t.current=3}}},[t._v("\n    点击这里，可切换到其他章节\n  ")]):t._e(),t._v(" "),n("tip-box",{directives:[{name:"show",rawName:"v-show",value:1===t.current,expression:"current === 1"}],attrs:{left:t.doc.left,top:t.doc.top},on:{close:function(e){t.section?t.current=2:t.current=3}}},[t._v("\n    这里是实验或挑战的步骤，请按照操作逐步学习\n  ")]),t._v(" "),n("tip-box",{directives:[{name:"show",rawName:"v-show",value:3===t.current,expression:"current === 3"}],attrs:{left:t.env.left,top:t.env.top},on:{close:function(e){return t.setShowTip(!1)}}},[t._v("\n    点击选择想要使用的实验环境，开始学习吧～\n  ")])],1):t._e()},[],!1,null,null,null).exports,Aa=n(210),La=n(1265),Ia=Object(Kt.a)({components:{SectionBox:Fr,EnvBox:Ds,LabTools:ka,ConsoleMessage:Sa,TipBoxes:Oa,NotAllowed:In,HundredLevelModal:La.a},props:{getTitle:{type:Function,required:!0},isContest:{type:Boolean,default:!1}},data:function(){return{state:new oe(this),courseId:this.$route.params.id,contestSlug:this.$route.params.slug,initedModels:!1,canDrag:!1,showTip:!1,notAllowed:!1,notAllowedText:"",notAllowedUrl:""}},computed:Object(Yt.a)({},Object(Zt.d)({cometServiceUrl:function(t){return t.env.cometServiceUrl}}),{cometAuthServerUrl:function(){return"".concat(this.cometServiceUrl,"?token=").concat(localStorage.getItem("comet_token"))},labId:function(){return this.$route.query.id||this.$route.params.labId},course:function(){return this.state.labModel.course},isCourseAuthor:function(){try{return this.course.teacher.id===this.$auth.user.id}catch(t){return!1}},permissionTeacher:function(){return this.$auth.user.labels.includes("course_teacher")||this.isCourseAuthor},userLevel:function(){return this.$auth.user.level}}),watch:{$route:function(t){this.init()},canDrag:function(t){var e=document.querySelector(".can-drag"),n=document.querySelector(".can-not-drag");e&&(e.style.display=t?"block":"none"),n&&(n.style.display=t?"none":"block")},userLevel:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(100!==e){t.next=8;break}if(localStorage.modalHundredLevelShown){t.next=6;break}return t.next=4,this.getHundredLevelUserInfo({userId:this.$auth.user.id});case 4:this.$root.$emit("bv::show::modal","modalHundredLevel"),localStorage.modalHundredLevelShown=!0;case 6:t.next=9;break;case 8:localStorage.removeItem("modalHundredLevelShown");case 9:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},mounted:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){var e,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.hideLabTask(),this.state.labModel.setBoxWidth(.35*window.innerWidth),e=null,window.addEventListener("resize",function(){clearTimeout(e),e=setTimeout(function(){n.state.labModel.setBoxWidth(window.innerWidth*n.state.labModel.leftBoxWidthPercent)},300)},!1),this.init(),"1"!==window.localStorage.showTip&&(this.showTip=!0);case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),beforeDestroy:function(){this.showLabTask()},methods:Object(Yt.a)({},Object(Zt.b)("labTask",["hideLabTask","showLabTask"]),Object(Zt.b)("user",["getHundredLevelUserInfo"]),{init:function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){var e,n,r,o,c=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.state.labModel.getCourse(c.courseId);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),n=function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.state.labModel.getCourseLabs(c.courseId);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),r=function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.state.labModel.getCourseUserStatus(c.$route.params.id);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),this.isContest&&(e=function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.state.labModel.getContest(c.contestSlug);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),n=function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.state.labModel.getChallenges(c.contestSlug);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),r=function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.state.labModel.getContestUserStatus(c.contestSlug);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()),o=[e(),n(),r()],Promise.all(o).then(function(){var t=Object(Vt.a)(regeneratorRuntime.mark(function t(e){var n,r,o,l,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.every(function(t){return t.ok}),r=e.some(function(t){return t.response&&404===t.response.status}),n&&!r){t.next=7;break}return c.notAllowedText="访问出错了",c.notAllowedUrl=c.isContest?"/contests/":"/courses/",c.notAllowed=!0,t.abrupt("return",!1);case 7:if(o=null,!c.isContest&&c.state.labModel.courseUserStatus&&(o=c.state.labModel.courseUserStatus.last_learned_lab_id),c.labId&&(o=c.labId),l=null,o?l=c.state.labModel.getLab(o):c.state.labModel.labs.length&&(l=c.state.labModel.labs[0],c.state.labModel.setLab(l)),!l){t.next=18;break}c.state.createEnvModels(l.id),c.initedModels=!0,l.is_open||c.permissionTeacher||(l.id===c.state.labModel.labs[0].id?(c.notAllowedText="该课程暂未开放",c.notAllowedUrl="/courses/",c.notAllowed=!0):(c.notAllowedText="该章节暂未开放",c.notAllowedUrl=c.isContest?"/contests/".concat(c.contestSlug):"/courses/".concat(c.state.labModel.course.id),c.notAllowed=!0)),t.next=22;break;case 18:return c.notAllowedText="该章节不存在",c.notAllowedUrl=c.isContest?"/contests/":"/courses/",c.notAllowed=!0,t.abrupt("return",!1);case 22:if(c.isContest){t.next=29;break}if("active"===(d=c.state.labModel.courseUserStatus.status)||"trial"===d||"expired"===d){t.next=29;break}return c.notAllowedText="无访问权限",c.notAllowedUrl=c.isContest?"/contests/":"/courses/",c.notAllowed=!0,t.abrupt("return",!1);case 29:c.getTitle(c.state.labModel.course.name+" - "+c.state.labModel.lab.name);case 30:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),initSocket:function(){var t=Object(Aa.b)(this.cometAuthServerUrl);Object(Aa.a)(t)},onMouseDown:function(t){this.canDrag=!0},onMouseUp:function(t){this.canDrag=!1},drag:function(t){if(this.canDrag){var e=window.innerWidth,n=t.clientX;e-n<=150&&(n=e-150),n<50&&(n=50),this.state.labModel.setBoxWidth(n)}},setShowTip:function(t){this.showTip=t}})}),Ea=(n(1457),n(1458),Object(de.a)(Ia,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"lab-operation",on:{mouseup:t.onMouseUp,mousemove:t.drag}},[t.state.labModel.lab&&t.initedModels?n("section-box",{attrs:{state:t.state,"set-show-tip":t.setShowTip}}):t._e(),t._v(" "),t.state.labModel.lab?[n("div",{directives:[{name:"show",rawName:"v-show",value:t.canDrag,expression:"canDrag"}],staticClass:"drag can-drag",on:{mousedown:t.onMouseDown}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.canDrag,expression:"!canDrag"}],staticClass:"drag can-not-drag",style:{left:t.state.labModel.leftBoxWidth-2+"px"},on:{mousedown:t.onMouseDown}})]:t._e(),t._v(" "),t.state.labModel.lab&&t.initedModels?n("env-box",{attrs:{state:t.state}}):t._e(),t._v(" "),t.initedModels&&t.state.envModel.isCurrentLabRunning?n("lab-tools",{attrs:{state:t.state}}):t._e(),t._v(" "),n("console-message",{attrs:{level:t.userLevel}}),t._v(" "),t.showTip&&t.state.labModel.labUserStatus?n("tip-boxes",{attrs:{"set-show-tip":t.setShowTip}}):t._e(),t._v(" "),t.state.labModel.course?n("b-modal",{ref:"openModal",attrs:{"modal-class":"open-modal",size:"sm","hide-header":"","hide-footer":"","no-close-on-backdrop":""}},[n("div",{staticClass:"text"},[t._v("\n      该课程暂未开放\n    ")]),t._v(" "),t.state.labModel.course.support_embed?t._e():n("a",{staticClass:"btn btn-primary",attrs:{href:"/courses/"+t.state.labModel.course.id}},[t._v("\n      确定\n    ")])]):t._e(),t._v(" "),t.notAllowed?n("not-allowed",{attrs:{text:t.notAllowedText,url:t.notAllowedUrl}}):t._e(),t._v(" "),n("hundred-level-modal",{attrs:{"user-info":t.$auth.user}})],2)},[],!1,null,"d68b6290",null));e.a=Ea.exports},2940:function(t,e,n){"use strict";n.r(e);var r={layout:"body-layout",middleware:["auth"],components:{CourseLearning:n(1459).a},data:function(){return{title:"学习页面"}},computed:{pageTitle:function(){return this.title}},asyncData:function(t){var e=t.params,n=t.store,r=t.redirect;if("active"!==n.state.auth.user.status)return r("/courses/".concat(e.id))},methods:{getTitle:function(title){this.title=title}},head:function(){return{title:this.pageTitle}}},o=n(5),component=Object(o.a)(r,function(){var t=this.$createElement;return(this._self._c||t)("course-learning",{attrs:{"get-title":this.getTitle}})},[],!1,null,null,null);e.default=component.exports}}]);